(function(A){"object"===typeof exports&&"undefined"!==typeof module?module.exports=A():"function"===typeof define&&define.Z?define([],A):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).martinez=A()})(function(){return function t(k,m,g){function b(c,w){if(!m[c]){if(!k[c]){var x="function"==typeof require&&require;if(!w&&x)return x(c,!0);if(a)return a(c,!0);x=Error("Cannot find module '"+c+"'");throw x.code="MODULE_NOT_FOUND",x;}x=m[c]={exports:{}};
k[c][0].call(x.exports,function(a){var w=k[c][1][a];return b(w?w:a)},x,x.exports,t,k,m,g)}return m[c].exports}for(var a="function"==typeof require&&require,c=0;c<g.length;c++)b(g[c]);return b}({1:[function(t,k){k.exports=t("./src/index")},{"./src/index":12}],2:[function(t,k){k.exports={V:t("./lib/rbtree"),Y:t("./lib/bintree")}},{"./lib/bintree":3,"./lib/rbtree":4}],3:[function(t,k){function m(a){this.data=a;this.right=this.left=null}function g(a){this.h=null;this.u=a;this.size=0}var b=t("./treebase");
m.prototype.i=function(a){return a?this.right:this.left};m.prototype.s=function(a,b){a?this.right=b:this.left=b};g.prototype=new b;g.prototype.K=function(a){if(null===this.h)return this.h=new m(a),this.size++,!0;for(var b=0,h=null,w=this.h;;){if(null===w)return w=new m(a),h.s(b,w),ret=!0,this.size++,!0;if(0===this.u(w.data,a))return!1;b=0>this.u(w.data,a);h=w;w=w.i(b)}};g.prototype.remove=function(a){if(null===this.h)return!1;var b=new m(void 0),h=b;h.right=this.h;for(var w=null,g=null,r=1;null!==
h.i(r);){var w=h,h=h.i(r),k=this.u(a,h.data),r=0<k;0===k&&(g=h)}return null!==g?(g.data=h.data,w.s(w.right===h,h.i(null===h.left)),this.h=b.right,this.size--,!0):!1};k.exports=g},{"./treebase":5}],4:[function(t,k){function m(a){this.data=a;this.right=this.left=null;this.red=!0}function g(a){this.h=null;this.u=a;this.size=0}function b(a){return null!==a&&a.red}function a(a,b){var c=a.i(!b);a.s(!b,c.i(b));c.s(b,a);a.red=!0;c.red=!1;return c}function c(b,c){b.s(!c,a(b.i(!c),!c));return a(b,c)}var h=
t("./treebase");m.prototype.i=function(a){return a?this.right:this.left};m.prototype.s=function(a,b){a?this.right=b:this.left=b};g.prototype=new h;g.prototype.K=function(h){var g=!1;if(null===this.h)this.h=new m(h),g=!0,this.size++;else{var r=new m(void 0),k=0,t=0,u=null,l=r,d=null,q=this.h;for(l.right=this.h;;){null===q?(q=new m(h),d.s(k,q),g=!0,this.size++):b(q.left)&&b(q.right)&&(q.red=!0,q.left.red=!1,q.right.red=!1);if(b(q)&&b(d)){var f=l.right===u;q===d.i(t)?l.s(f,a(u,!t)):l.s(f,c(u,!t))}f=
this.u(q.data,h);if(0===f)break;t=k;k=0>f;null!==u&&(l=u);u=d;d=q;q=q.i(k)}this.h=r.right}this.h.red=!1;return g};g.prototype.remove=function(h){if(null===this.h)return!1;var g=new m(void 0),r=g;r.right=this.h;for(var k=null,t,u=null,l=1;null!==r.i(l);){var d=l;t=k;var k=r,r=r.i(l),q=this.u(h,r.data),l=0<q;0===q&&(u=r);if(!b(r)&&!b(r.i(l)))if(b(r.i(!l)))t=a(r,l),k.s(d,t),k=t;else if(!b(r.i(!l))&&(q=k.i(!d),null!==q))if(b(q.i(!d))||b(q.i(d))){var f=t.right===k;b(q.i(d))?t.s(f,c(k,d)):b(q.i(!d))&&t.s(f,
a(k,d));d=t.i(f);d.red=!0;r.red=!0;d.left.red=!1;d.right.red=!1}else k.red=!1,q.red=!0,r.red=!0}null!==u&&(u.data=r.data,k.s(k.right===r,r.i(null===r.left)),this.size--);this.h=g.right;null!==this.h&&(this.h.red=!1);return null!==u};k.exports=g},{"./treebase":5}],5:[function(t,k){function m(){}function g(b){this.S=b;this.l=[];this.g=null}m.prototype.clear=function(){this.h=null;this.size=0};m.prototype.find=function(b){for(var a=this.h;null!==a;){var c=this.u(b,a.data);if(0===c)return a.data;a=a.i(0<
c)}return null};m.prototype.v=function(b){for(var a=this.h,c=this.iterator();null!==a;){var h=this.u(b,a.data);if(0===h)return c.g=a,c;c.l.push(a);a=a.i(0<h)}return null};m.prototype.lowerBound=function(b){for(var a=this.h,c=this.iterator(),h=this.u;null!==a;){var g=h(b,a.data);if(0===g)return c.g=a,c;c.l.push(a);a=a.i(0<g)}for(g=c.l.length-1;0<=g;--g)if(a=c.l[g],0>h(b,a.data))return c.g=a,c.l.length=g,c;c.l.length=0;return c};m.prototype.upperBound=function(b){for(var a=this.lowerBound(b),c=this.u;null!==
a.data()&&0===c(a.data(),b);)a.next();return a};m.prototype.min=function(){var b=this.h;if(null===b)return null;for(;null!==b.left;)b=b.left;return b.data};m.prototype.max=function(){var b=this.h;if(null===b)return null;for(;null!==b.right;)b=b.right;return b.data};m.prototype.iterator=function(){return new g(this)};g.prototype.data=function(){return null!==this.g?this.g.data:null};g.prototype.next=function(){if(null===this.g){var b=this.S.h;null!==b&&this.R(b)}else if(null===this.g.right){do if(b=
this.g,this.l.length)this.g=this.l.pop();else{this.g=null;break}while(this.g.right===b)}else this.l.push(this.g),this.R(this.g.right);return null!==this.g?this.g.data:null};g.prototype.G=function(){if(null===this.g){var b=this.S.h;null!==b&&this.P(b)}else if(null===this.g.left){do if(b=this.g,this.l.length)this.g=this.l.pop();else{this.g=null;break}while(this.g.left===b)}else this.l.push(this.g),this.P(this.g.left);return null!==this.g?this.g.data:null};g.prototype.R=function(b){for(;null!==b.left;)this.l.push(b),
b=b.left;this.g=b};g.prototype.P=function(b){for(;null!==b.right;)this.l.push(b),b=b.right;this.g=b};k.exports=m},{}],6:[function(t,k){function m(l,d,q,a,b,e){this.a=l;this.key=d;this.value=q;this.left=a;this.right=b;this.f=e}function g(l){return new m(l.a,l.key,l.value,l.left,l.right,l.f)}function b(l,d){return new m(l,d.key,d.value,d.left,d.right,d.f)}function a(l){l.f=1+(l.left?l.left.f:0)+(l.right?l.right.f:0)}function c(l,d){this.o=l;this.root=d}function h(l,d){if(d.left){var a=h(l,d.left);if(a)return a}if(a=
l(d.key,d.value))return a;if(d.right)return h(l,d.right)}function w(l,d,a,b){if(0>=d(l,b.key)){if(b.left){var c=w(l,d,a,b.left);if(c)return c}if(c=a(b.key,b.value))return c}if(b.right)return w(l,d,a,b.right)}function x(l,d,a,b,c){var e=a(l,c.key),p=a(d,c.key);if(0>=e&&(c.left&&(e=x(l,d,a,b,c.left))||0<p&&(e=b(c.key,c.value))))return e;if(0<p&&c.right)return x(l,d,a,b,c.right)}function r(l,d){this.B=l;this.j=d}function y(l,d){l.key=d.key;l.value=d.value;l.left=d.left;l.right=d.right;l.a=d.a;l.f=d.f}
function z(l,d){return l<d?-1:l>d?1:0}k.exports=function(l){return new c(l||z,null)};var u=c.prototype;Object.defineProperty(u,"keys",{get:function(){var l=[];this.forEach(function(d){l.push(d)});return l}});Object.defineProperty(u,"values",{get:function(){var l=[];this.forEach(function(d,a){l.push(a)});return l}});Object.defineProperty(u,"length",{get:function(){return this.root?this.root.f:0}});u.K=function(l,d){for(var q=this.o,f=this.root,n=[],e=[];f;){var p=q(l,f.key);n.push(f);e.push(p);f=0>=
p?f.left:f.right}n.push(new m(0,l,d,null,null,1));for(p=n.length-2;0<=p;--p)f=n[p],n[p]=0>=e[p]?new m(f.a,f.key,f.value,n[p+1],f.right,f.f+1):new m(f.a,f.key,f.value,f.left,n[p+1],f.f+1);for(p=n.length-1;1<p;--p){e=n[p-1];f=n[p];if(1===e.a||1===f.a)break;var g=n[p-2];if(g.left===e)if(e.left===f){var v=g.right;if(v&&0===v.a)e.a=1,g.right=b(1,v),g.a=0,--p;else{g.a=0;g.left=e.right;e.a=1;e.right=g;n[p-2]=e;n[p-1]=f;a(g);a(e);3<=p&&(p=n[p-3],p.left===g?p.left=e:p.right=e);break}}else if((v=g.right)&&
0===v.a)e.a=1,g.right=b(1,v),g.a=0,--p;else{e.right=f.left;g.a=0;g.left=f.right;f.a=1;f.left=e;f.right=g;n[p-2]=f;n[p-1]=e;a(g);a(e);a(f);3<=p&&(p=n[p-3],p.left===g?p.left=f:p.right=f);break}else if(e.right===f)if((v=g.left)&&0===v.a)e.a=1,g.left=b(1,v),g.a=0,--p;else{g.a=0;g.right=e.left;e.a=1;e.left=g;n[p-2]=e;n[p-1]=f;a(g);a(e);3<=p&&(p=n[p-3],p.right===g?p.right=e:p.left=e);break}else if((v=g.left)&&0===v.a)e.a=1,g.left=b(1,v),g.a=0,--p;else{e.left=f.right;g.a=0;g.right=f.left;f.a=1;f.right=e;
f.left=g;n[p-2]=f;n[p-1]=e;a(g);a(e);a(f);3<=p&&(p=n[p-3],p.right===g?p.right=f:p.left=f);break}}n[0].a=1;return new c(q,n[0])};u.forEach=function(l,d,a){if(this.root)switch(arguments.length){case 1:return h(l,this.root);case 2:return w(d,this.o,l,this.root);case 3:if(!(0<=this.o(d,a)))return x(d,a,this.o,l,this.root)}};Object.defineProperty(u,"begin",{get:function(){for(var a=[],d=this.root;d;)a.push(d),d=d.left;return new r(this,a)}});Object.defineProperty(u,"end",{get:function(){for(var a=[],d=
this.root;d;)a.push(d),d=d.right;return new r(this,a)}});u.$=function(a){if(0>a)return new r(this,[]);for(var d=this.root,b=[];;){b.push(d);if(d.left){if(a<d.left.f){d=d.left;continue}a-=d.left.f}if(!a)return new r(this,b);--a;if(d.right){if(a>=d.right.f)break;d=d.right}else break}return new r(this,[])};u.da=function(a){for(var d=this.o,b=this.root,f=[],c=0;b;){var e=d(a,b.key);f.push(b);0>=e&&(c=f.length);b=0>=e?b.left:b.right}f.length=c;return new r(this,f)};u.ea=function(a){for(var d=this.o,b=
this.root,f=[],c=0;b;){var e=d(a,b.key);f.push(b);0>e&&(c=f.length);b=0>e?b.left:b.right}f.length=c;return new r(this,f)};u.ga=function(a){for(var d=this.o,b=this.root,c=[],g=0;b;){var e=d(a,b.key);c.push(b);0<e&&(g=c.length);b=0>=e?b.left:b.right}c.length=g;return new r(this,c)};u.fa=function(a){for(var d=this.o,b=this.root,c=[],g=0;b;){var e=d(a,b.key);c.push(b);0<=e&&(g=c.length);b=0>e?b.left:b.right}c.length=g;return new r(this,c)};u.find=function(a){for(var d=this.o,b=this.root,c=[];b;){var g=
d(a,b.key);c.push(b);if(0===g)return new r(this,c);b=0>=g?b.left:b.right}return new r(this,[])};u.remove=function(b){return(b=this.find(b))?b.remove():this};u.get=function(b){for(var d=this.o,a=this.root;a;){var c=d(b,a.key);if(0===c)return a.value;a=0>=c?a.left:a.right}};u=r.prototype;Object.defineProperty(u,"valid",{get:function(){return 0<this.j.length}});Object.defineProperty(u,"node",{get:function(){return 0<this.j.length?this.j[this.j.length-1]:null},enumerable:!0});u.clone=function(){return new r(this.B,
this.j.slice())};u.remove=function(){var l=this.j;if(0===l.length)return this.B;var d=Array(l.length),q=l[l.length-1];d[d.length-1]=new m(q.a,q.key,q.value,q.left,q.right,q.f);for(var f=l.length-2;0<=f;--f)q=l[f],d[f]=q.left===l[f+1]?new m(q.a,q.key,q.value,d[f+1],q.right,q.f):new m(q.a,q.key,q.value,q.left,d[f+1],q.f);q=d[d.length-1];if(q.left&&q.right){l=d.length;for(q=q.left;q.right;)d.push(q),q=q.right;f=d[l-1];d.push(new m(q.a,f.key,f.value,q.left,q.right,q.f));d[l-1].key=q.key;d[l-1].value=
q.value;for(f=d.length-2;f>=l;--f)q=d[f],d[f]=new m(q.a,q.key,q.value,q.left,d[f+1],q.f);d[l-1].left=d[l]}q=d[d.length-1];if(0===q.a)for(f=d[d.length-2],f.left===q?f.left=null:f.right===q&&(f.right=null),d.pop(),f=0;f<d.length;++f)d[f].f--;else if(q.left||q.right)for(q.left?y(q,q.left):q.right&&y(q,q.right),q.a=1,f=0;f<d.length-1;++f)d[f].f--;else{if(1===d.length)return new c(this.B.o,null);for(f=0;f<d.length;++f)d[f].f--;for(var f=d[d.length-2],n,e,p,h=d.length-1;0<=h;--h){l=d[h];if(0===h){l.a=1;
break}n=d[h-1];if(n.left===l){e=n.right;if(e.right&&0===e.right.a){e=n.right=g(e);p=e.right=g(e.right);n.right=e.left;e.left=n;e.right=p;e.a=n.a;l.a=1;n.a=1;p.a=1;a(n);a(e);if(1<h){var v=d[h-2];v.left===n?v.left=e:v.right=e}d[h-1]=e;break}else if(e.left&&0===e.left.a){e=n.right=g(e);p=e.left=g(e.left);n.right=p.left;e.left=p.right;p.left=n;p.right=e;p.a=n.a;n.a=1;e.a=1;l.a=1;a(n);a(e);a(p);1<h&&(v=d[h-2],v.left===n?v.left=p:v.right=p);d[h-1]=p;break}if(1===e.a)if(0===n.a){n.a=1;n.right=b(0,e);break}else n.right=
b(0,e);else e=g(e),n.right=e.left,e.left=n,e.a=n.a,n.a=0,a(n),a(e),1<h&&(v=d[h-2],v.left===n?v.left=e:v.right=e),d[h-1]=e,d[h]=n,h+1<d.length?d[h+1]=l:d.push(l),h+=2}else{e=n.left;if(e.left&&0===e.left.a){e=n.left=g(e);p=e.left=g(e.left);n.left=e.right;e.right=n;e.left=p;e.a=n.a;l.a=1;n.a=1;p.a=1;a(n);a(e);1<h&&(v=d[h-2],v.right===n?v.right=e:v.left=e);d[h-1]=e;break}else if(e.right&&0===e.right.a){e=n.left=g(e);p=e.right=g(e.right);n.left=p.right;e.right=p.left;p.right=n;p.left=e;p.a=n.a;n.a=1;e.a=
1;l.a=1;a(n);a(e);a(p);1<h&&(v=d[h-2],v.right===n?v.right=p:v.left=p);d[h-1]=p;break}if(1===e.a)if(0===n.a){n.a=1;n.left=b(0,e);break}else n.left=b(0,e);else e=g(e),n.left=e.right,e.right=n,e.a=n.a,n.a=0,a(n),a(e),1<h&&(v=d[h-2],v.right===n?v.right=e:v.left=e),d[h-1]=e,d[h]=n,h+1<d.length?d[h+1]=l:d.push(l),h+=2}}f.left===q?f.left=null:f.right=null}return new c(this.B.o,d[0])};Object.defineProperty(u,"key",{get:function(){if(0<this.j.length)return this.j[this.j.length-1].key},enumerable:!0});Object.defineProperty(u,
"value",{get:function(){if(0<this.j.length)return this.j[this.j.length-1].value},enumerable:!0});Object.defineProperty(u,"index",{get:function(){var b=0,a=this.j;if(0===a.length)return(b=this.B.root)?b.f:0;a[a.length-1].left&&(b=a[a.length-1].left.f);for(var c=a.length-2;0<=c;--c)a[c+1]===a[c].right&&(++b,a[c].left&&(b+=a[c].left.f));return b},enumerable:!0});u.next=function(){var a=this.j;if(0!==a.length){var b=a[a.length-1];if(b.right)for(b=b.right;b;)a.push(b),b=b.left;else for(a.pop();0<a.length&&
a[a.length-1].right===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(u,"hasNext",{get:function(){var a=this.j;if(0===a.length)return!1;if(a[a.length-1].right)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].left===a[b])return!0;return!1}});u.update=function(a){var b=this.j;if(0===b.length)throw Error("Can't update empty node!");var g=Array(b.length),f=b[b.length-1];g[g.length-1]=new m(f.a,f.key,a,f.left,f.right,f.f);for(a=b.length-2;0<=a;--a)f=b[a],g[a]=f.left===b[a+1]?new m(f.a,f.key,f.value,
g[a+1],f.right,f.f):new m(f.a,f.key,f.value,f.left,g[a+1],f.f);return new c(this.B.o,g[0])};u.G=function(){var a=this.j;if(0!==a.length){var b=a[a.length-1];if(b.left)for(b=b.left;b;)a.push(b),b=b.right;else for(a.pop();0<a.length&&a[a.length-1].left===b;)b=a[a.length-1],a.pop()}};Object.defineProperty(u,"hasPrev",{get:function(){var a=this.j;if(0===a.length)return!1;if(a[a.length-1].left)return!0;for(var b=a.length-1;0<b;--b)if(a[b-1].right===a[b])return!0;return!1}})},{}],7:[function(t,k){function m(b,
a){if(!(this instanceof m))return new m(b,a);this.data=b||[];this.length=this.data.length;this.compare=a||g;if(b)for(var c=Math.floor(this.length/2);0<=c;c--)this.O(c)}function g(b,a){return b<a?-1:b>a?1:0}k.exports=m;m.prototype={push:function(b){this.data.push(b);this.length++;this.W(this.length-1)},pop:function(){var b=this.data[0];this.data[0]=this.data[this.length-1];this.length--;this.data.pop();this.O(0);return b},W:function(b){for(var a=this.data,c=this.compare;0<b;){var g=Math.floor((b-1)/
2);if(0>c(a[b],a[g])){var m=a,k=m[g];m[g]=m[b];m[b]=k;b=g}else break}},O:function(b){for(var a=this.data,c=this.compare,g=this.length;;){var m=2*b+1,k=m+1,r=b;m<g&&0>c(a[m],a[r])&&(r=m);k<g&&0>c(a[k],a[r])&&(r=k);if(r===b)break;m=a;k=m[r];m[r]=m[b];m[b]=k;b=r}}}},{}],8:[function(t,k){var m=t("./signed_area");k.exports=function(g,b){var a=g.b,c=b.b;return a[0]>c[0]?1:a[0]<c[0]?-1:a[1]!==c[1]?a[1]>c[1]?1:-1:g.left!==b.left?g.left?1:-1:0!==m(a,g.c.b,b.c.b)?g.F(b.c.b)?-1:1:!g.m&&b.m?1:-1}},{"./signed_area":14}],
9:[function(t,k){var m=t("./signed_area"),g=t("./compare_events"),b=t("./equals");k.exports=function(a,c){return a===c?0:0!==m(a.b,a.c.b,c.b)||0!==m(a.b,a.c.b,c.c.b)?b(a.b,c.b)?a.F(c.c.b)?-1:1:a.b[0]===c.b[0]?a.b[1]<c.b[1]?-1:1:1===g(a,c)?c.X(a.b)?-1:1:a.F(c.b)?-1:1:a.m!==c.m?a.m&&!c.m?1:-1:b(a.b,c.b)?0:1===g(a,c)?1:-1}},{"./compare_events":8,"./equals":11,"./signed_area":14}],10:[function(t,k){k.exports={M:0,U:1,N:2,L:3}},{}],11:[function(t,k){k.exports=function(m,g){return m[0]===g[0]&&m[1]===g[1]}},
{}],12:[function(t,k){function m(a,b,c,g){var e,f;if("number"===typeof a[0][0])for(e=0,f=a.length-1;e<f;e++){var l=a[e],h=a[e+1],n=b,k=c,r=g,t=new d(l,!1,void 0,n),h=new d(h,!1,t,n);t.c=h;0<q(t,h)?h.left=!0:t.left=!0;r[0]=C(r[0],l[0]);r[1]=C(r[1],l[1]);r[2]=p(r[2],l[0]);r[3]=p(r[3],l[1]);k.push(t);k.push(h)}else for(e=0,f=a.length;e<f;e++)m(a[e],b,c,g)}function g(a,b,d,c){var e=new u(null,q);m(a,!0,e,d);m(b,!1,e,c);return e}function b(b,d,c,e){null===d?(b.A=!1,b.w=!0):b.m===d.m?(b.A=!d.A,b.w=d.w):
(b.A=!d.w,b.w=d.T()?!d.A:d.A);d&&(b.D=!a(d,e)||d.T()?d.D:d);b.J=a(b,e)}function a(a,b){switch(a.type){case z.M:switch(b){case 0:return!a.w;case 1:return a.w;case 2:return a.m&&a.w||!a.m&&!a.w;case 3:return!0}case z.N:return 0===b||1===b;case z.L:return 2===b}return!1}function c(a,b,d){var c=n(a.b,a.c.b,b.b,b.c.b),g=c?c.length:0;if(0===g||1===g&&(e(a.b,b.b)||e(a.c.b,b.c.b)))return 0;if(2===g&&a.m===b.m)throw console.warn(a.b,a.c.b,b.b,b.c.b),Error("Edges of the same polygon overlap");if(1===g)return e(a.b,
c[0])||e(a.c.b,c[0])||h(a,c[0],d),e(b.b,c[0])||e(b.c.b,c[0])||h(b,c[0],d),1;var c=[],f=g=!1;e(a.b,b.b)?g=!0:1===q(a,b)?c.push(b,a):c.push(a,b);e(a.c.b,b.c.b)?f=!0:1===q(a.c,b.c)?c.push(b.c,a.c):c.push(a.c,b.c);if(g&&f||g)return a.type=z.U,b.type=a.A===b.A?z.N:z.L,g&&!f&&h(c[2].c,c[1].b,d),2;if(f)return h(c[0],c[1].b,d),3;if(c[0]!==c[3].c)return h(c[0],c[1].b,d),h(c[1],c[2].b,d),3;h(c[0],c[1].b,d);h(c[3].c,c[2].b,d);return 3}function h(a,b,c){var e=new d(b,!1,a,a.m);b=new d(b,!0,a.c,a.m);0<q(b,a.c)&&
(a.c.left=!0,b.left=!1);a.c.c=b;a.c=e;c.push(b);c.push(e);return c}function w(a,d,e,g,h,q){var n;e=new l(f);d=[];for(var p=C(g[2],h[2]);a.length;){var m=a.pop();d.push(m);if(0===q&&m.b[0]>p||2===q&&m.b[0]>g[2])break;m.left?(e.K(m),n=e.v(m),h=e.v(m),m.iterator=e.v(m),h.data()!==e.min()?h.G():(h=e.v(e.max()),h.next()),n.next(),b(m,h.data(),0,q),n.data()&&2===c(m,n.data(),a)&&(b(m,h.data(),0,q),b(m,n.data(),0,q)),h.data()&&2===c(h.data(),m,a)&&(n=e.v(h.data()),n.data()!==e.min()?n.G():(n=e.v(e.max()),
n.next()),b(h.data(),n.data(),0,q),b(m,h.data(),0,q))):(m=m.c,n=e.v(m),(h=e.v(m))&&n&&(h.data()!==e.min()?h.G():(h=e.v(e.max()),h.next()),n.next(),e.remove(m),n.data()&&h.data()&&c(h.data(),n.data(),a)))}return d}function x(a,b){"[object Array]"===Object.prototype.toString.call(a[0][0])||(a=[a]);a[b]=[]}function r(a,b,c){var d,f=null;if(0===a.length*b.length)if(0===c)f=y;else if(2===c)f=a;else if(1===c||3===c)f=0===a.length?b:a;if(d=f)return d===y?null:d;var f=[Infinity,Infinity,-Infinity,-Infinity],
h=[Infinity,Infinity,-Infinity,-Infinity],l=g(a,b,f,h);d=null;if(f[0]>h[2]||h[0]>f[2]||f[1]>h[3]||h[1]>f[3])if(0===c)d=y;else if(2===c)d=a;else if(1===c||3===c)d=a.concat(b);if(d)return d===y?null:d;f=w(l,0,0,f,h,c);a=[];b=0;for(c=f.length;b<c;b++)h=f[b],(h.left&&h.J||!h.left&&h.c.J)&&a.push(h);for(f=!1;!f;)for(f=!0,b=0,c=a.length;b<c;b++)b+1<c&&1===q(a[b],a[b+1])&&(f=a,h=b+1,l=f[b],f[b]=f[h],f[h]=l,f=!1);b=0;for(c=a.length;b<c;b++)a[b].C=b,a[b].left||(f=a[b].C,a[b].C=a[b].c.C,a[b].c.C=f);f=Array(a.length);
h=[];l=[];d=[];var m={};b=0;for(c=a.length;b<c;b++)if(!f[b]){var n=[];h.push(n);var p=h.length-1;l.push(0);d.push(-1);if(a[b].D){var k=a[b].D.I;a[b].D.H?m[k]&&(x(h[d[k]],p),d[p]=d[k],l[p]=l[k],m[p]=!0):(x(h[k],p),d[p]=k,l[p]=l[k]+1,m[p]=!0)}k=b;for(n.push(a[b].b);k>=b;){f[k]=!0;a[k].left?(a[k].H=!1,a[k].I=p):(a[k].c.H=!0,a[k].c.I=p);k=a[k].C;f[k]=!0;n.push(a[k].b);a:{for(var r=a,t=f,u=k+1,z=r.length;u<z&&e(r[u].b,r[k].b);)if(t[u])u+=1;else{k=u;break a}for(u=k-1;t[u];)--u;k=u}}k=-1===k?b:k;f[k]=f[a[k].C]=
!0;a[k].c.H=!0;a[k].c.I=p;l[p]&1&&n.reverse()}return h}var y=[],z=t("./edge_type"),u=t("tinyqueue"),l=t("bintrees").V,d=t("./sweep_event"),q=t("./compare_events"),f=t("./compare_segments"),n=t("./segment_intersection"),e=t("./equals");window.B=t("functional-red-black-tree");var p=Math.max,C=Math.min;k.exports=r;k.exports.union=function(a,b){return r(a,b,1)};k.exports.diff=function(a,b){return r(a,b,2)};k.exports.ja=function(a,b){return r(a,b,3)};k.exports.intersection=function(a,b){return r(a,b,0)};
k.exports.operations={INTERSECTION:0,DIFFERENCE:2,UNION:1,XOR:3};k.exports.ca=g;k.exports.aa=b;k.exports.ia=w;k.exports.ba=h;k.exports.ha=c},{"./compare_events":8,"./compare_segments":9,"./edge_type":10,"./equals":11,"./segment_intersection":13,"./sweep_event":15,bintrees:2,"functional-red-black-tree":6,tinyqueue:7}],13:[function(t,k){function m(b,a){return b[0]*a[1]-b[1]*a[0]}function g(b,a){return b[0]*a[0]+b[1]*a[1]}k.exports=function(b,a,c,h,k){function t(a,b,c){return[a[0]+b*c[0],a[1]+b*c[1]]}
a=[a[0]-b[0],a[1]-b[1]];h=[h[0]-c[0],h[1]-c[1]];c=[c[0]-b[0],c[1]-b[1]];var r=m(a,h),y=g(a,a);if(r*r>1E-9*y*g(h,h)){h=m(c,h)/r;if(0>h||1<h)return null;c=m(c,a)/r;return 0>c||1<c?null:k?null:[t(b,h,a)]}var z=g(c,c),r=m(c,a);if(r*r>1E-9*y*z)return null;c=g(a,c)/y;r=c+g(a,h)/y;h=Math.min(c,r);c=Math.max(c,r);return 1>=h&&0<=c?1===h?k?null:[t(b,0<h?h:0,a)]:0===c?k?null:[t(b,1>c?c:1,a)]:k&&0===h&&1===c?null:[t(b,0<h?h:0,a),t(b,1>c?c:1,a)]:null}},{}],14:[function(t,k){k.exports=function(k,g,b){return(k[0]-
b[0])*(g[1]-b[1])-(g[0]-b[0])*(k[1]-b[1])}},{}],15:[function(t,k){function m(a,c,g,k,m){this.left=c;this.b=a;this.c=g;this.m=k;this.type=m||b.M;this.w=this.A=!1;this.D=null;this.H=this.J=!1}var g=t("./signed_area"),b=t("./edge_type");m.prototype={F:function(a){return this.left?0<g(this.b,this.c.b,a):0<g(this.c.b,this.b,a)},X:function(a){return!this.F(a)},T:function(){return this.b[0]===this.c.b[0]}};k.exports=m},{"./edge_type":10,"./signed_area":14}]},{},[1])(1)});
