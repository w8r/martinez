/**
 * martinez v0.6.0
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define(["exports"],e):(t=t||self,e(t.martinez={}))})(this,function(t){"use strict";function i(t,e){return t>e?1:t<e?-1:0}var y=function t(e,r){if(e===void 0)e=i;if(r===void 0)r=false;this._compare=e;this._root=null;this._size=0;this._noDuplicates=!!r};var e={size:{configurable:true}};y.prototype.rotateLeft=function t(e){var r=e.right;if(r){e.right=r.left;if(r.left){r.left.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.left=e}e.parent=r};y.prototype.rotateRight=function t(e){var r=e.left;if(r){e.left=r.right;if(r.right){r.right.parent=e}r.parent=e.parent}if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.right=e}e.parent=r};y.prototype._splay=function t(e){while(e.parent){var r=e.parent;if(!r.parent){if(r.left===e){this.rotateRight(r)}else{this.rotateLeft(r)}}else if(r.left===e&&r.parent.left===r){this.rotateRight(r.parent);this.rotateRight(r)}else if(r.right===e&&r.parent.right===r){this.rotateLeft(r.parent);this.rotateLeft(r)}else if(r.left===e&&r.parent.right===r){this.rotateRight(r);this.rotateLeft(r)}else{this.rotateLeft(r);this.rotateRight(r)}}};y.prototype.splay=function t(e){var r,i,n,o,f;while(e.parent){r=e.parent;i=r.parent;if(i&&i.parent){n=i.parent;if(n.left===i){n.left=e}else{n.right=e}e.parent=n}else{e.parent=null;this._root=e}o=e.left;f=e.right;if(e===r.left){if(i){if(i.left===r){if(r.right){i.left=r.right;i.left.parent=i}else{i.left=null}r.right=i;i.parent=r}else{if(o){i.right=o;o.parent=i}else{i.right=null}e.left=i;i.parent=e}}if(f){r.left=f;f.parent=r}else{r.left=null}e.right=r;r.parent=e}else{if(i){if(i.right===r){if(r.left){i.right=r.left;i.right.parent=i}else{i.right=null}r.left=i;i.parent=r}else{if(f){i.left=f;f.parent=i}else{i.left=null}e.right=i;i.parent=e}}if(o){r.right=o;o.parent=r}else{r.right=null}e.left=r;r.parent=e}}};y.prototype.replace=function t(e,r){if(!e.parent){this._root=r}else if(e===e.parent.left){e.parent.left=r}else{e.parent.right=r}if(r){r.parent=e.parent}};y.prototype.minNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.left){e=e.left}}return e};y.prototype.maxNode=function t(e){if(e===void 0)e=this._root;if(e){while(e.right){e=e.right}}return e};y.prototype.insert=function t(e,r){var i=this._root;var n=null;var o=this._compare;var f;if(this._noDuplicates){while(i){n=i;f=o(i.key,e);if(f===0){return}else if(o(i.key,e)<0){i=i.right}else{i=i.left}}}else{while(i){n=i;if(o(i.key,e)<0){i=i.right}else{i=i.left}}}i={key:e,data:r,left:null,right:null,parent:n};if(!n){this._root=i}else if(o(n.key,i.key)<0){n.right=i}else{n.left=i}this.splay(i);this._size++;return i};y.prototype.find=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(r.key,e);if(n<0){r=r.right}else if(n>0){r=r.left}else{return r}}return null};y.prototype.contains=function t(e){var r=this._root;var i=this._compare;while(r){var n=i(e,r.key);if(n===0){return true}else if(n<0){r=r.left}else{r=r.right}}return false};y.prototype.remove=function t(e){var r=this.find(e);if(!r){return false}this.splay(r);if(!r.left){this.replace(r,r.right)}else if(!r.right){this.replace(r,r.left)}else{var i=this.minNode(r.right);if(i.parent!==r){this.replace(i,i.right);i.right=r.right;i.right.parent=i}this.replace(r,i);i.left=r.left;i.left.parent=i}this._size--;return true};y.prototype.removeNode=function t(e){if(!e){return false}this.splay(e);if(!e.left){this.replace(e,e.right)}else if(!e.right){this.replace(e,e.left)}else{var r=this.minNode(e.right);if(r.parent!==e){this.replace(r,r.right);r.right=e.right;r.right.parent=r}this.replace(e,r);r.left=e.left;r.left.parent=r}this._size--;return true};y.prototype.erase=function t(e){var r=this.find(e);if(!r){return}this.splay(r);var i=r.left;var n=r.right;var o=null;if(i){i.parent=null;o=this.maxNode(i);this.splay(o);this._root=o}if(n){if(i){o.right=n}else{this._root=n}n.parent=o}this._size--};y.prototype.pop=function t(){var e=this._root,r=null;if(e){while(e.left){e=e.left}r={key:e.key,data:e.data};this.remove(e.key)}return r};y.prototype.next=function t(e){var r=e;if(r){if(r.right){r=r.right;while(r&&r.left){r=r.left}}else{r=e.parent;while(r&&r.right===e){e=r;r=r.parent}}}return r};y.prototype.prev=function t(e){var r=e;if(r){if(r.left){r=r.left;while(r&&r.right){r=r.right}}else{r=e.parent;while(r&&r.left===e){e=r;r=r.parent}}}return r};y.prototype.forEach=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();e(r,o++);r=r.right}else{n=true}}}return this};y.prototype.range=function t(e,r,i,n){var o=[];var f=this._compare;var l=this._root,a;while(o.length!==0||l){if(l){o.push(l);l=l.left}else{l=o.pop();a=f(l.key,r);if(a>0){break}else if(f(l.key,e)>=0){if(i.call(n,l)){return this}}l=l.right}}return this};y.prototype.keys=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.key);e=e.right}else{n=true}}}return i};y.prototype.values=function t(){var e=this._root;var r=[],i=[],n=false;while(!n){if(e){r.push(e);e=e.left}else{if(r.length>0){e=r.pop();i.push(e.data);e=e.right}else{n=true}}}return i};y.prototype.at=function t(e){var r=this._root;var i=[],n=false,o=0;while(!n){if(r){i.push(r);r=r.left}else{if(i.length>0){r=i.pop();if(o===e){return r}o++;r=r.right}else{n=true}}}return null};y.prototype.load=function t(e,r,i){if(e===void 0)e=[];if(r===void 0)r=[];if(i===void 0)i=false;if(this._size!==0){throw new Error("bulk-load: tree is not empty")}var n=e.length;if(i){u(e,r,0,n-1,this._compare)}this._root=s(null,e,r,0,n);this._size=n;return this};y.prototype.min=function t(){var e=this.minNode(this._root);if(e){return e.key}else{return null}};y.prototype.max=function t(){var e=this.maxNode(this._root);if(e){return e.key}else{return null}};y.prototype.isEmpty=function t(){return this._root===null};e.size.get=function(){return this._size};y.createTree=function t(e,r,i,n,o){return new y(i,o).load(e,r,n)};Object.defineProperties(y.prototype,e);function s(t,e,r,i,n){var o=n-i;if(o>0){var f=i+Math.floor(o/2);var l=e[f];var a=r[f];var u={key:l,data:a,parent:t};u.left=s(u,e,r,i,f);u.right=s(u,e,r,f+1,n);return u}return null}function u(t,e,r,i,n){if(r>=i){return}var o=t[r+i>>1];var f=r-1;var l=i+1;while(true){do{f++}while(n(t[f],o)<0);do{l--}while(n(t[l],o)>0);if(f>=l){break}var a=t[f];t[f]=t[l];t[l]=a;a=e[f];e[f]=e[l];e[l]=a}u(t,e,r,l,n);u(t,e,l+1,i,n)}var f=0;var a=1;var h=2;var p=3;var d=0;var l=1;var E=2;var v=3;function w(t,e,r){if(e===null){t.inOut=false;t.otherInOut=true}else{if(t.isSubject===e.isSubject){t.inOut=!e.inOut;t.otherInOut=e.otherInOut}else{t.inOut=!e.otherInOut;t.otherInOut=e.isVertical()?!e.inOut:e.inOut}if(e){t.prevInResult=!n(e,r)||e.isVertical()?e.prevInResult:e}}t.inResult=n(t,r)}function n(t,e){switch(t.type){case f:switch(e){case d:return!t.otherInOut;case l:return t.otherInOut;case E:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case v:return true}break;case h:return e===d||e===l;case p:return e===E;case a:return false}return false}var c=function t(e,r,i,n,o){this.left=r;this.point=e;this.otherEvent=i;this.isSubject=n;this.type=o||f;this.inOut=false;this.otherInOut=false;this.prevInResult=null;this.inResult=false;this.resultInOut=false;this.isExteriorRing=true};c.prototype.isBelow=function t(e){var r=this.point,i=this.otherEvent.point;return this.left?(r[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(r[1]-e[1])>0:(i[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(i[1]-e[1])>0};c.prototype.isAbove=function t(e){return!this.isBelow(e)};c.prototype.isVertical=function t(){return this.point[0]===this.otherEvent.point[0]};c.prototype.clone=function t(){var e=new c(this.point,this.left,this.otherEvent,this.isSubject,this.type);e.inResult=this.inResult;e.prevInResult=this.prevInResult;e.isExteriorRing=this.isExteriorRing;e.inOut=this.inOut;e.otherInOut=this.otherInOut;return e};function g(t,e){if(t[0]===e[0]){if(t[1]===e[1]){return true}else{return false}}return false}var r=11102230246251565e-32;var B=134217729;var A=(3+8*r)*r;function D(t,e,r,i,n){var o,f,l,a;var u=e[0];var s=i[0];var h=0;var p=0;if(s>u===s>-u){o=u;u=e[++h]}else{o=s;s=i[++p]}var v=0;if(h<t&&p<r){if(s>u===s>-u){f=u+o;l=o-(f-u);u=e[++h]}else{f=s+o;l=o-(f-s);s=i[++p]}o=f;if(l!==0){n[v++]=l}while(h<t&&p<r){if(s>u===s>-u){f=o+u;a=f-o;l=o-(f-a)+(u-a);u=e[++h]}else{f=o+s;a=f-o;l=o-(f-a)+(s-a);s=i[++p]}o=f;if(l!==0){n[v++]=l}}}while(h<t){f=o+u;a=f-o;l=o-(f-a)+(u-a);u=e[++h];o=f;if(l!==0){n[v++]=l}}while(p<r){f=o+s;a=f-o;l=o-(f-a)+(s-a);s=i[++p];o=f;if(l!==0){n[v++]=l}}if(o!==0||v===0){n[v++]=o}return v}function F(t,e){var r=e[0];for(var i=1;i<t;i++){r+=e[i]}return r}function o(t){return new Float64Array(t)}var _=(3+16*r)*r;var T=(2+12*r)*r;var V=(9+64*r)*r*r;var C=o(4);var P=o(8);var U=o(12);var X=o(16);var q=o(4);function I(t,e,r,i,n,o,f){var l,a,u,s;var h,p,v,c,g,y,d,E,w,_,I,m,b,k;var O=t-n;var R=r-n;var j=e-o;var x=i-o;_=O*x;p=B*O;v=p-(p-O);c=O-v;p=B*x;g=p-(p-x);y=x-g;I=c*y-(_-v*g-c*g-v*y);m=j*R;p=B*j;v=p-(p-j);c=j-v;p=B*R;g=p-(p-R);y=R-g;b=c*y-(m-v*g-c*g-v*y);d=I-b;h=I-d;C[0]=I-(d+h)+(h-b);E=_+d;h=E-_;w=_-(E-h)+(d-h);d=w-m;h=w-d;C[1]=w-(d+h)+(h-m);k=E+d;h=k-E;C[2]=E-(k-h)+(d-h);C[3]=k;var S=F(4,C);var N=T*f;if(S>=N||-S>=N){return S}h=t-O;l=t-(O+h)+(h-n);h=r-R;u=r-(R+h)+(h-n);h=e-j;a=e-(j+h)+(h-o);h=i-x;s=i-(x+h)+(h-o);if(l===0&&a===0&&u===0&&s===0){return S}N=V*f+A*Math.abs(S);S+=O*s+x*l-(j*u+R*a);if(S>=N||-S>=N){return S}_=l*x;p=B*l;v=p-(p-l);c=l-v;p=B*x;g=p-(p-x);y=x-g;I=c*y-(_-v*g-c*g-v*y);m=a*R;p=B*a;v=p-(p-a);c=a-v;p=B*R;g=p-(p-R);y=R-g;b=c*y-(m-v*g-c*g-v*y);d=I-b;h=I-d;q[0]=I-(d+h)+(h-b);E=_+d;h=E-_;w=_-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var z=D(4,C,4,q,P);_=O*s;p=B*O;v=p-(p-O);c=O-v;p=B*s;g=p-(p-s);y=s-g;I=c*y-(_-v*g-c*g-v*y);m=j*u;p=B*j;v=p-(p-j);c=j-v;p=B*u;g=p-(p-u);y=u-g;b=c*y-(m-v*g-c*g-v*y);d=I-b;h=I-d;q[0]=I-(d+h)+(h-b);E=_+d;h=E-_;w=_-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var M=D(z,P,4,q,U);_=l*s;p=B*l;v=p-(p-l);c=l-v;p=B*s;g=p-(p-s);y=s-g;I=c*y-(_-v*g-c*g-v*y);m=a*u;p=B*a;v=p-(p-a);c=a-v;p=B*u;g=p-(p-u);y=u-g;b=c*y-(m-v*g-c*g-v*y);d=I-b;h=I-d;q[0]=I-(d+h)+(h-b);E=_+d;h=E-_;w=_-(E-h)+(d-h);d=w-m;h=w-d;q[1]=w-(d+h)+(h-m);k=E+d;h=k-E;q[2]=E-(k-h)+(d-h);q[3]=k;var L=D(M,U,4,q,X);return X[L-1]}function m(t,e,r,i,n,o){var f=(e-o)*(r-n);var l=(t-n)*(i-o);var a=f-l;if(f===0||l===0||f>0!==l>0){return a}var u=Math.abs(f+l);if(Math.abs(a)>=_*u){return a}return-I(t,e,r,i,n,o,u)}function b(t,e,r){var i=m(t[0],t[1],e[0],e[1],r[0],r[1]);if(i>0){return-1}if(i<0){return 1}return 0}function k(t,e){var r=t.point;var i=e.point;if(r[0]>i[0]){return 1}if(r[0]<i[0]){return-1}if(r[1]!==i[1]){return r[1]>i[1]?1:-1}return O(t,e,r)}function O(t,e,r,i){if(t.left!==e.left){return t.left?1:-1}if(b(r,t.otherEvent.point,e.otherEvent.point)!==0){return!t.isBelow(e.otherEvent.point)?1:-1}return!t.isSubject&&e.isSubject?1:-1}function R(t,e,r){var i=new c(e,false,t,t.isSubject);var n=new c(e,true,t.otherEvent,t.isSubject);if(g(t.point,t.otherEvent.point)){console.warn("what is that, a collapsed segment?",t)}i.contourId=n.contourId=t.contourId;if(k(n,t.otherEvent)>0){t.otherEvent.left=true;n.left=false}t.otherEvent.otherEvent=n;t.otherEvent=i;r.push(n);r.push(i);return r}function j(t,e){return t[0]*e[1]-t[1]*e[0]}function x(t,e){return t[0]*e[0]+t[1]*e[1]}function S(t,e,r,i,n){var o=[e[0]-t[0],e[1]-t[1]];var f=[i[0]-r[0],i[1]-r[1]];function l(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var a=[r[0]-t[0],r[1]-t[1]];var u=j(o,f);var s=u*u;var h=x(o,o);if(s>0){var p=j(a,f)/u;if(p<0||p>1){return null}var v=j(a,o)/u;if(v<0||v>1){return null}if(p===0||p===1){return n?null:[l(t,p,o)]}if(v===0||v===1){return n?null:[l(r,v,f)]}return[l(t,p,o)]}u=j(a,o);s=u*u;if(s>0){return null}var c=x(o,a)/h;var g=c+x(o,f)/h;var y=Math.min(c,g);var d=Math.max(c,g);if(y<=1&&d>=0){if(y===1){return n?null:[l(t,y>0?y:0,o)]}if(d===0){return n?null:[l(t,d<1?d:1,o)]}if(n&&y===0&&d===1){return null}return[l(t,y>0?y:0,o),l(t,d<1?d:1,o)]}return null}function N(t,e,r){var i=S(t.point,t.otherEvent.point,e.point,e.otherEvent.point);var n=i?i.length:0;if(n===0){return 0}if(n===1&&(g(t.point,e.point)||g(t.otherEvent.point,e.otherEvent.point))){return 0}if(n===2&&t.isSubject===e.isSubject){return 0}if(n===1){if(!g(t.point,i[0])&&!g(t.otherEvent.point,i[0])){R(t,i[0],r)}if(!g(e.point,i[0])&&!g(e.otherEvent.point,i[0])){R(e,i[0],r)}return 1}var o=[];var f=false;var l=false;if(g(t.point,e.point)){f=true}else if(k(t,e)===1){o.push(e,t)}else{o.push(t,e)}if(g(t.otherEvent.point,e.otherEvent.point)){l=true}else if(k(t.otherEvent,e.otherEvent)===1){o.push(e.otherEvent,t.otherEvent)}else{o.push(t.otherEvent,e.otherEvent)}if(f&&l||f){e.type=a;t.type=e.inOut===t.inOut?h:p;if(f&&!l){R(o[1].otherEvent,o[0].point,r)}return 2}if(l){R(o[0],o[1].point,r);return 3}if(o[0]!==o[3].otherEvent){R(o[0],o[1].point,r);R(o[1],o[2].point,r);return 3}R(o[0],o[1].point,r);R(o[3].otherEvent,o[2].point,r);return 3}function z(t,e){if(t===e){return 0}if(b(t.point,t.otherEvent.point,e.point)!==0||b(t.point,t.otherEvent.point,e.otherEvent.point)!==0){if(g(t.point,e.point)){return t.isBelow(e.otherEvent.point)?-1:1}if(t.point[0]===e.point[0]){return t.point[1]<e.point[1]?-1:1}if(k(t,e)===1){return e.isAbove(t.point)?-1:1}return t.isBelow(e.point)?-1:1}if(t.isSubject===e.isSubject){var r=t.point,i=e.point;if(r[0]===i[0]&&r[1]===i[1]){r=t.otherEvent.point;i=e.otherEvent.point;if(r[0]===i[0]&&r[1]===i[1]){return 0}else{return t.contourId>e.contourId?1:-1}}}else{return t.isSubject?-1:1}return k(t,e)===1?1:-1}function M(t,e,r,i,n,o){var f=new y(z);var l=[];var a=Math.min(i[2],n[2]);var u,s,h;while(t.length!==0){var p=t.pop();l.push(p);if(o===d&&p.point[0]>a||o===E&&p.point[0]>i[2]){break}if(p.left){s=u=f.insert(p);h=f.minNode();if(u!==h){u=f.prev(u)}else{u=null}s=f.next(s);var v=u?u.key:null;var c=void 0;w(p,v,o);if(s){if(N(p,s.key,t)===2){w(p,v,o);w(p,s.key,o)}}if(u){if(N(u.key,p,t)===2){var g=u;if(g!==h){g=f.prev(g)}else{g=null}c=g?g.key:null;w(v,c,o);w(p,v,o)}}}else{p=p.otherEvent;s=u=f.find(p);if(u&&s){if(u!==h){u=f.prev(u)}else{u=null}s=f.next(s);f.remove(p);if(s&&u){N(u.key,s.key,t)}}}}return l}function L(t){var e,r,i,n;var o=[];for(r=0,i=t.length;r<i;r++){e=t[r];if(e.left&&e.inResult||!e.left&&e.otherEvent.inResult){o.push(e)}}var f=false;while(!f){f=true;for(r=0,i=o.length;r<i;r++){if(r+1<i&&k(o[r],o[r+1])===1){n=o[r];o[r]=o[r+1];o[r+1]=n;f=false}}}for(r=0,i=o.length;r<i;r++){e=o[r];e.pos=r}for(r=0,i=o.length;r<i;r++){e=o[r];if(!e.left){n=e.pos;e.pos=e.otherEvent.pos;e.otherEvent.pos=n}}return o}function G(t,e,r,i){var n,o;var f=t+1;var l=e.length;n=e[t].point;if(f<l){o=e[f].point}while(f<l&&o[0]===n[0]&&o[1]===n[1]){if(!r[f]){return f}else{f++}o=e[f].point}f=t-1;while(r[f]&&f>=i){f--}return f}function H(t,e){var r,i;var n=L(t);var o={};var f=[];var l;for(r=0,i=n.length;r<i;r++){if(o[r]){continue}var a=[[]];if(!n[r].isExteriorRing){if(e===E&&!n[r].isSubject&&f.length===0){f.push(a)}else if(f.length===0){f.push([[a]])}else{f[f.length-1].push(a[0])}}else if(e===E&&!n[r].isSubject&&f.length>1){f[f.length-1].push(a[0])}else{f.push(a)}var u=f.length-1;var s=r;var h=n[r].point;a[0].push(h);while(s>=r){l=n[s];o[s]=true;if(l.left){l.resultInOut=false;l.contourId=u}else{l.otherEvent.resultInOut=true;l.otherEvent.contourId=u}s=l.pos;o[s]=true;a[0].push(n[s].point);s=G(s,n,o,r)}s=s===-1?r:s;l=n[s];o[s]=o[l.pos]=true;l.otherEvent.resultInOut=true;l.otherEvent.contourId=u}return f}var J=Q;var K=Q;function Q(t,e){if(!(this instanceof Q)){return new Q(t,e)}this.data=t||[];this.length=this.data.length;this.compare=e||W;if(this.length>0){for(var r=(this.length>>1)-1;r>=0;r--){this._down(r)}}}function W(t,e){return t<e?-1:t>e?1:0}Q.prototype={push:function(t){this.data.push(t);this.length++;this._up(this.length-1)},pop:function(){if(this.length===0){return undefined}var t=this.data[0];this.length--;if(this.length>0){this.data[0]=this.data[this.length];this._down(0)}this.data.pop();return t},peek:function(){return this.data[0]},_up:function(t){var e=this.data;var r=this.compare;var i=e[t];while(t>0){var n=t-1>>1;var o=e[n];if(r(i,o)>=0){break}e[t]=o;t=n}e[t]=i},_down:function(t){var e=this.data;var r=this.compare;var i=this.length>>1;var n=e[t];while(t<i){var o=(t<<1)+1;var f=o+1;var l=e[o];if(f<this.length&&r(e[f],l)<0){o=f;l=e[f]}if(r(l,n)>=0){break}e[t]=l;t=o}e[t]=n}};J.default=K;var Y=Math.max;var Z=Math.min;var $=0;function tt(t,e,r,i,n,o){var f,l,a,u,s,h;for(f=0,l=t.length-1;f<l;f++){a=t[f];u=t[f+1];s=new c(a,false,undefined,e);h=new c(u,false,s,e);s.otherEvent=h;if(a[0]===u[0]&&a[1]===u[1]){continue}s.contourId=h.contourId=r;if(!o){s.isExteriorRing=false;h.isExteriorRing=false}if(k(s,h)>0){h.left=true}else{s.left=true}var p=a[0],v=a[1];n[0]=Z(n[0],p);n[1]=Z(n[1],v);n[2]=Y(n[2],p);n[3]=Y(n[3],v);i.push(s);i.push(h)}}function et(t,e,r,i,n){var o=new J(null,k);var f,l,a,u,s,h;for(a=0,u=t.length;a<u;a++){f=t[a];for(s=0,h=f.length;s<h;s++){l=s===0;if(l){$++}tt(f[s],true,$,o,r,l)}}for(a=0,u=e.length;a<u;a++){f=e[a];for(s=0,h=f.length;s<h;s++){l=s===0;if(n===E){l=false}if(l){$++}tt(f[s],false,$,o,i,l)}}return o}var rt=[];function it(t,e,r){var i=null;if(t.length*e.length===0){if(r===d){i=rt}else if(r===E){i=t}else if(r===l||r===v){i=t.length===0?e:t}}return i}function nt(t,e,r,i,n){var o=null;if(r[0]>i[2]||i[0]>r[2]||r[1]>i[3]||i[1]>r[3]){if(n===d){o=rt}else if(n===E){o=t}else if(n===l||n===v){o=t.concat(e)}}return o}function ot(t,e,r){if(typeof t[0][0][0]==="number"){t=[t]}if(typeof e[0][0][0]==="number"){e=[e]}var i=it(t,e,r);if(i){return i===rt?null:i}var n=[Infinity,Infinity,-Infinity,-Infinity];var o=[Infinity,Infinity,-Infinity,-Infinity];var f=et(t,e,n,o,r);i=nt(t,e,n,o,r);if(i){return i===rt?null:i}var l=M(f,t,e,n,o,r);var a=H(l,r);return a}function ft(t,e){return ot(t,e,l)}function lt(t,e){return ot(t,e,E)}function at(t,e){return ot(t,e,v)}function ut(t,e){return ot(t,e,d)}var st={UNION:l,DIFFERENCE:E,INTERSECTION:d,XOR:v};t.diff=lt;t.intersection=ut;t.operations=st;t.union=ft;t.xor=at;Object.defineProperty(t,"__esModule",{value:true})});