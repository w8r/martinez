(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))g(P);new MutationObserver(P=>{for(const b of P)if(b.type==="childList")for(const I of b.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&g(I)}).observe(document,{childList:!0,subtree:!0});function f(P){const b={};return P.integrity&&(b.integrity=P.integrity),P.referrerPolicy&&(b.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?b.credentials="include":P.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function g(P){if(P.ep)return;P.ep=!0;const b=f(P);fetch(P.href,b)}})();var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uu(N){return N&&N.__esModule&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N}var ko={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var va;function ba(){return va||(va=1,function(N,p){(function(f,g){g(p)})(Sa,function(f){var g="1.9.4";function P(i){var o,u,h,m;for(u=1,h=arguments.length;u<h;u++){m=arguments[u];for(o in m)i[o]=m[o]}return i}var b=Object.create||function(){function i(){}return function(o){return i.prototype=o,new i}}();function I(i,o){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var h=u.call(arguments,2);return function(){return i.apply(o,h.length?h.concat(u.call(arguments)):arguments)}}var k=0;function z(i){return"_leaflet_id"in i||(i._leaflet_id=++k),i._leaflet_id}function Y(i,o,u){var h,m,y,C;return C=function(){h=!1,m&&(y.apply(u,m),m=!1)},y=function(){h?m=arguments:(i.apply(u,arguments),setTimeout(C,o),h=!0)},y}function X(i,o,u){var h=o[1],m=o[0],y=h-m;return i===h&&u?i:((i-m)%y+y)%y+m}function F(){return!1}function c(i,o){if(o===!1)return i;var u=Math.pow(10,o===void 0?6:o);return Math.round(i*u)/u}function E(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function S(i){return E(i).split(/\s+/)}function _(i,o){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?b(i.options):{});for(var u in o)i.options[u]=o[u];return i.options}function H(i,o,u){var h=[];for(var m in i)h.push(encodeURIComponent(u?m.toUpperCase():m)+"="+encodeURIComponent(i[m]));return(!o||o.indexOf("?")===-1?"?":"&")+h.join("&")}var j=/\{ *([\w_ -]+) *\}/g;function tt(i,o){return i.replace(j,function(u,h){var m=o[h];if(m===void 0)throw new Error("No value provided for variable "+u);return typeof m=="function"&&(m=m(o)),m})}var Lt=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function pt(i,o){for(var u=0;u<i.length;u++)if(i[u]===o)return u;return-1}var Wt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var M=0;function yt(i){var o=+new Date,u=Math.max(0,16-(o-M));return M=o+u,window.setTimeout(i,u)}var Q=window.requestAnimationFrame||ee("RequestAnimationFrame")||yt,Pe=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Tt(i,o,u){if(u&&Q===yt)i.call(o);else return Q.call(window,I(i,o))}function x(i){i&&Pe.call(window,i)}var W={__proto__:null,extend:P,create:b,bind:I,get lastId(){return k},stamp:z,throttle:Y,wrapNum:X,falseFn:F,formatNum:c,trim:E,splitWords:S,setOptions:_,getParamString:H,template:tt,isArray:Lt,indexOf:pt,emptyImageUrl:Wt,requestFn:Q,cancelFn:Pe,requestAnimFrame:Tt,cancelAnimFrame:x};function qt(){}qt.extend=function(i){var o=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=o.__super__=this.prototype,h=b(u);h.constructor=o,o.prototype=h;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return i.statics&&P(o,i.statics),i.includes&&(Ge(i.includes),P.apply(null,[h].concat(i.includes))),P(h,i),delete h.statics,delete h.includes,h.options&&(h.options=u.options?b(u.options):{},P(h.options,i.options)),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,C=h._initHooks.length;y<C;y++)h._initHooks[y].call(this)}},o},qt.include=function(i){var o=this.prototype.options;return P(this.prototype,i),i.options&&(this.prototype.options=o,this.mergeOptions(i.options)),this},qt.mergeOptions=function(i){return P(this.prototype.options,i),this},qt.addInitHook=function(i){var o=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Ge(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Lt(i)?i:[i];for(var o=0;o<i.length;o++)i[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var jt={on:function(i,o,u){if(typeof i=="object")for(var h in i)this._on(h,i[h],o);else{i=S(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,u)}return this},off:function(i,o,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var h in i)this._off(h,i[h],o);else{i=S(i);for(var m=arguments.length===1,y=0,C=i.length;y<C;y++)m?this._off(i[y]):this._off(i[y],o,u)}return this},_on:function(i,o,u,h){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(i,o,u)===!1){u===this&&(u=void 0);var m={fn:o,ctx:u};h&&(m.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(m)}},_off:function(i,o,u){var h,m,y;if(this._events&&(h=this._events[i],!!h)){if(arguments.length===1){if(this._firingCount)for(m=0,y=h.length;m<y;m++)h[m].fn=F;delete this._events[i];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var C=this._listens(i,o,u);if(C!==!1){var R=h[C];this._firingCount&&(R.fn=F,this._events[i]=h=h.slice()),h.splice(C,1)}}},fire:function(i,o,u){if(!this.listens(i,u))return this;var h=P({},o,{type:i,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[i];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,C=m.length;y<C;y++){var R=m[y],A=R.fn;R.once&&this.off(i,A,R.ctx),A.call(R.ctx||this,h)}this._firingCount--}}return u&&this._propagateEvent(h),this},listens:function(i,o,u,h){typeof i!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(h=!!o,m=void 0,u=void 0);var y=this._events&&this._events[i];if(y&&y.length&&this._listens(i,m,u)!==!1)return!0;if(h){for(var C in this._eventParents)if(this._eventParents[C].listens(i,o,u,h))return!0}return!1},_listens:function(i,o,u){if(!this._events)return!1;var h=this._events[i]||[];if(!o)return!!h.length;u===this&&(u=void 0);for(var m=0,y=h.length;m<y;m++)if(h[m].fn===o&&h[m].ctx===u)return m;return!1},once:function(i,o,u){if(typeof i=="object")for(var h in i)this._on(h,i[h],o,!0);else{i=S(i);for(var m=0,y=i.length;m<y;m++)this._on(i[m],o,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[z(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[z(i)],this},_propagateEvent:function(i){for(var o in this._eventParents)this._eventParents[o].fire(i.type,P({layer:i.target,propagatedFrom:i.target},i),!0)}};jt.addEventListener=jt.on,jt.removeEventListener=jt.clearAllEventListeners=jt.off,jt.addOneTimeEventListener=jt.once,jt.fireEvent=jt.fire,jt.hasEventListeners=jt.listens;var vn=qt.extend(jt);function T(i,o,u){this.x=u?Math.round(i):i,this.y=u?Math.round(o):o}var Te=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};T.prototype={clone:function(){return new T(this.x,this.y)},add:function(i){return this.clone()._add($(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract($(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new T(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new T(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Te(this.x),this.y=Te(this.y),this},distanceTo:function(i){i=$(i);var o=i.x-this.x,u=i.y-this.y;return Math.sqrt(o*o+u*u)},equals:function(i){return i=$(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=$(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}};function $(i,o,u){return i instanceof T?i:Lt(i)?new T(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new T(i.x,i.y):new T(i,o,u)}function ut(i,o){if(i)for(var u=o?[i,o]:i,h=0,m=u.length;h<m;h++)this.extend(u[h])}ut.prototype={extend:function(i){var o,u;if(!i)return this;if(i instanceof T||typeof i[0]=="number"||"x"in i)o=u=$(i);else if(i=Ut(i),o=i.min,u=i.max,!o||!u)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=u.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return $(this.min.x,this.max.y)},getTopRight:function(){return $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var o,u;return typeof i[0]=="number"||i instanceof T?i=$(i):i=Ut(i),i instanceof ut?(o=i.min,u=i.max):o=u=i,o.x>=this.min.x&&u.x<=this.max.x&&o.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=Ut(i);var o=this.min,u=this.max,h=i.min,m=i.max,y=m.x>=o.x&&h.x<=u.x,C=m.y>=o.y&&h.y<=u.y;return y&&C},overlaps:function(i){i=Ut(i);var o=this.min,u=this.max,h=i.min,m=i.max,y=m.x>o.x&&h.x<u.x,C=m.y>o.y&&h.y<u.y;return y&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var o=this.min,u=this.max,h=Math.abs(o.x-u.x)*i,m=Math.abs(o.y-u.y)*i;return Ut($(o.x-h,o.y-m),$(u.x+h,u.y+m))},equals:function(i){return i?(i=Ut(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function Ut(i,o){return!i||i instanceof ut?i:new ut(i,o)}function Me(i,o){if(i)for(var u=o?[i,o]:i,h=0,m=u.length;h<m;h++)this.extend(u[h])}Me.prototype={extend:function(i){var o=this._southWest,u=this._northEast,h,m;if(i instanceof Z)h=i,m=i;else if(i instanceof Me){if(h=i._southWest,m=i._northEast,!h||!m)return this}else return i?this.extend(_t(i)||At(i)):this;return!o&&!u?(this._southWest=new Z(h.lat,h.lng),this._northEast=new Z(m.lat,m.lng)):(o.lat=Math.min(h.lat,o.lat),o.lng=Math.min(h.lng,o.lng),u.lat=Math.max(m.lat,u.lat),u.lng=Math.max(m.lng,u.lng)),this},pad:function(i){var o=this._southWest,u=this._northEast,h=Math.abs(o.lat-u.lat)*i,m=Math.abs(o.lng-u.lng)*i;return new Me(new Z(o.lat-h,o.lng-m),new Z(u.lat+h,u.lng+m))},getCenter:function(){return new Z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Z(this.getNorth(),this.getWest())},getSouthEast:function(){return new Z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Z||"lat"in i?i=_t(i):i=At(i);var o=this._southWest,u=this._northEast,h,m;return i instanceof Me?(h=i.getSouthWest(),m=i.getNorthEast()):h=m=i,h.lat>=o.lat&&m.lat<=u.lat&&h.lng>=o.lng&&m.lng<=u.lng},intersects:function(i){i=At(i);var o=this._southWest,u=this._northEast,h=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>=o.lat&&h.lat<=u.lat,C=m.lng>=o.lng&&h.lng<=u.lng;return y&&C},overlaps:function(i){i=At(i);var o=this._southWest,u=this._northEast,h=i.getSouthWest(),m=i.getNorthEast(),y=m.lat>o.lat&&h.lat<u.lat,C=m.lng>o.lng&&h.lng<u.lng;return y&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,o){return i?(i=At(i),this._southWest.equals(i.getSouthWest(),o)&&this._northEast.equals(i.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(i,o){return i instanceof Me?i:new Me(i,o)}function Z(i,o,u){if(isNaN(i)||isNaN(o))throw new Error("Invalid LatLng object: ("+i+", "+o+")");this.lat=+i,this.lng=+o,u!==void 0&&(this.alt=+u)}Z.prototype={equals:function(i,o){if(!i)return!1;i=_t(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(o===void 0?1e-9:o)},toString:function(i){return"LatLng("+c(this.lat,i)+", "+c(this.lng,i)+")"},distanceTo:function(i){return yn.distance(this,_t(i))},wrap:function(){return yn.wrapLatLng(this)},toBounds:function(i){var o=180*i/40075017,u=o/Math.cos(Math.PI/180*this.lat);return At([this.lat-o,this.lng-u],[this.lat+o,this.lng+u])},clone:function(){return new Z(this.lat,this.lng,this.alt)}};function _t(i,o,u){return i instanceof Z?i:Lt(i)&&typeof i[0]!="object"?i.length===3?new Z(i[0],i[1],i[2]):i.length===2?new Z(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Z(i.lat,"lng"in i?i.lng:i.lon,i.alt):o===void 0?null:new Z(i,o,u)}var zt={latLngToPoint:function(i,o){var u=this.projection.project(i),h=this.scale(o);return this.transformation._transform(u,h)},pointToLatLng:function(i,o){var u=this.scale(o),h=this.transformation.untransform(i,u);return this.projection.unproject(h)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var o=this.projection.bounds,u=this.scale(i),h=this.transformation.transform(o.min,u),m=this.transformation.transform(o.max,u);return new ut(h,m)},infinite:!1,wrapLatLng:function(i){var o=this.wrapLng?X(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?X(i.lat,this.wrapLat,!0):i.lat,h=i.alt;return new Z(u,o,h)},wrapLatLngBounds:function(i){var o=i.getCenter(),u=this.wrapLatLng(o),h=o.lat-u.lat,m=o.lng-u.lng;if(h===0&&m===0)return i;var y=i.getSouthWest(),C=i.getNorthEast(),R=new Z(y.lat-h,y.lng-m),A=new Z(C.lat-h,C.lng-m);return new Me(R,A)}},yn=P({},zt,{wrapLng:[-180,180],R:6371e3,distance:function(i,o){var u=Math.PI/180,h=i.lat*u,m=o.lat*u,y=Math.sin((o.lat-i.lat)*u/2),C=Math.sin((o.lng-i.lng)*u/2),R=y*y+Math.cos(h)*Math.cos(m)*C*C,A=2*Math.atan2(Math.sqrt(R),Math.sqrt(1-R));return this.R*A}}),xr=6378137,Ui={R:xr,MAX_LATITUDE:85.0511287798,project:function(i){var o=Math.PI/180,u=this.MAX_LATITUDE,h=Math.max(Math.min(u,i.lat),-u),m=Math.sin(h*o);return new T(this.R*i.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(i){var o=180/Math.PI;return new Z((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*o,i.x*o/this.R)},bounds:function(){var i=xr*Math.PI;return new ut([-i,-i],[i,i])}()};function Zi(i,o,u,h){if(Lt(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=o,this._c=u,this._d=h}Zi.prototype={transform:function(i,o){return this._transform(i.clone(),o)},_transform:function(i,o){return o=o||1,i.x=o*(this._a*i.x+this._b),i.y=o*(this._c*i.y+this._d),i},untransform:function(i,o){return o=o||1,new T((i.x/o-this._b)/this._a,(i.y/o-this._d)/this._c)}};function nt(i,o,u,h){return new Zi(i,o,u,h)}var Er=P({},yn,{code:"EPSG:3857",projection:Ui,transformation:function(){var i=.5/(Math.PI*Ui.R);return nt(i,.5,-i,.5)}()}),Ts=P({},Er,{code:"EPSG:900913"});function ci(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ms(i,o){var u="",h,m,y,C,R,A;for(h=0,y=i.length;h<y;h++){for(R=i[h],m=0,C=R.length;m<C;m++)A=R[m],u+=(m?"L":"M")+A.x+" "+A.y;u+=o?it.svg?"z":"x":""}return u||"M0 0"}var Yi=document.documentElement.style,re="ActiveXObject"in window,ao=re&&!document.addEventListener,Dt="msLaunchUri"in navigator&&!("documentMode"in document),nn=rn("webkit"),jr=rn("android"),Rs=rn("android 2")||rn("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Kr=jr&&rn("Google")&&ae<537&&!("AudioNode"in window),Jr=!!window.opera,we=!Dt&&rn("chrome"),_n=rn("gecko")&&!nn&&!Jr&&!re,V=!we&&rn("safari"),xn=rn("phantom"),fi="OTransition"in Yi,vt=navigator.platform.indexOf("Win")===0,ke=re&&"transition"in Yi,En="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Rs,Qr="MozPerspective"in Yi,Uo=!window.L_DISABLE_3D&&(ke||En||Qr)&&!fi&&!xn,wr=typeof orientation<"u"||rn("mobile"),Zo=wr&&nn,Yo=wr&&En,uo=!window.PointerEvent&&window.MSPointerEvent,lo=!!(window.PointerEvent||uo),Ve="ontouchstart"in window||!!window.TouchEvent,ne=!window.L_NO_TOUCH&&(Ve||lo),dt=wr&&Jr,$r=wr&&_n,Zt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,On=function(){var i=!1;try{var o=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",F,o),window.removeEventListener("testPassiveEventSupport",F,o)}catch{}return i}(),Rt=function(){return!!document.createElement("canvas").getContext}(),Re=!!(document.createElementNS&&ci("svg").createSVGRect),Qt=!!Re&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ce=!Re&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var o=i.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),Ye=navigator.platform.indexOf("Mac")===0,ts=navigator.platform.indexOf("Linux")===0;function rn(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var it={ie:re,ielt9:ao,edge:Dt,webkit:nn,android:jr,android23:Rs,androidStock:Kr,opera:Jr,chrome:we,gecko:_n,safari:V,phantom:xn,opera12:fi,win:vt,ie3d:ke,webkit3d:En,gecko3d:Qr,any3d:Uo,mobile:wr,mobileWebkit:Zo,mobileWebkit3d:Yo,msPointer:uo,pointer:lo,touch:ne,touchNative:Ve,mobileOpera:dt,mobileGecko:$r,retina:Zt,passiveEvents:On,canvas:Rt,svg:Re,vml:ce,inlineSvg:Qt,mac:Ye,linux:ts},es=it.msPointer?"MSPointerDown":"pointerdown",qe=it.msPointer?"MSPointerMove":"pointermove",Dn=it.msPointer?"MSPointerUp":"pointerup",ho=it.msPointer?"MSPointerCancel":"pointercancel",Os={touchstart:es,touchmove:qe,touchend:Dn,touchcancel:ho},co={touchstart:Ds,touchmove:ns,touchend:ns,touchcancel:ns},Xi={},fo=!1;function Xo(i,o,u){return o==="touchstart"&&Ko(),co[o]?(u=co[o].bind(this,u),i.addEventListener(Os[o],u,!1),u):(console.warn("wrong event specified:",o),F)}function Ho(i,o,u){if(!Os[o]){console.warn("wrong event specified:",o);return}i.removeEventListener(Os[o],u,!1)}function Wo(i){Xi[i.pointerId]=i}function jo(i){Xi[i.pointerId]&&(Xi[i.pointerId]=i)}function go(i){delete Xi[i.pointerId]}function Ko(){fo||(document.addEventListener(es,Wo,!0),document.addEventListener(qe,jo,!0),document.addEventListener(Dn,go,!0),document.addEventListener(ho,go,!0),fo=!0)}function ns(i,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var u in Xi)o.touches.push(Xi[u]);o.changedTouches=[o],i(o)}}function Ds(i,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&ve(o),ns(i,o)}function Jo(i){var o={},u,h;for(h in i)u=i[h],o[h]=u&&u.bind?u.bind(i):u;return i=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var Qo=200;function An(i,o){i.addEventListener("dblclick",o);var u=0,h;function m(y){if(y.detail!==1){h=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var C=rs(y);if(!(C.some(function(A){return A instanceof HTMLLabelElement&&A.attributes.for})&&!C.some(function(A){return A instanceof HTMLInputElement||A instanceof HTMLSelectElement}))){var R=Date.now();R-u<=Qo?(h++,h===2&&o(Jo(y))):h=1,u=R}}}return i.addEventListener("click",m),{dblclick:o,simDblclick:m}}function Mt(i,o){i.removeEventListener("dblclick",o.dblclick),i.removeEventListener("click",o.simDblclick)}var Ke=pe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gt=pe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),is=gt==="webkitTransition"||gt==="OTransition"?gt+"End":"transitionend";function de(i){return typeof i=="string"?document.getElementById(i):i}function It(i,o){var u=i.style[o]||i.currentStyle&&i.currentStyle[o];if((!u||u==="auto")&&document.defaultView){var h=document.defaultView.getComputedStyle(i,null);u=h?h[o]:null}return u==="auto"?null:u}function lt(i,o,u){var h=document.createElement(i);return h.className=o||"",u&&u.appendChild(h),h}function Gt(i){var o=i.parentNode;o&&o.removeChild(i)}function Fn(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function q(i){var o=i.parentNode;o&&o.lastChild!==i&&o.appendChild(i)}function st(i){var o=i.parentNode;o&&o.firstChild!==i&&o.insertBefore(i,o.firstChild)}function St(i,o){if(i.classList!==void 0)return i.classList.contains(o);var u=Yn(i);return u.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(u)}function ct(i,o){if(i.classList!==void 0)for(var u=S(o),h=0,m=u.length;h<m;h++)i.classList.add(u[h]);else if(!St(i,o)){var y=Yn(i);me(i,(y?y+" ":"")+o)}}function ie(i,o){i.classList!==void 0?i.classList.remove(o):me(i,E((" "+Yn(i)+" ").replace(" "+o+" "," ")))}function me(i,o){i.className.baseVal===void 0?i.className=o:i.className.baseVal=o}function Yn(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function he(i,o){"opacity"in i.style?i.style.opacity=o:"filter"in i.style&&Hi(i,o)}function Hi(i,o){var u=!1,h="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(h)}catch{if(o===1)return}o=Math.round(o*100),u?(u.Enabled=o!==100,u.Opacity=o):i.style.filter+=" progid:"+h+"(opacity="+o+")"}function pe(i){for(var o=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in o)return i[u];return!1}function sn(i,o,u){var h=o||new T(0,0);i.style[Ke]=(it.ie3d?"translate("+h.x+"px,"+h.y+"px)":"translate3d("+h.x+"px,"+h.y+"px,0)")+(u?" scale("+u+")":"")}function bt(i,o){i._leaflet_pos=o,it.any3d?sn(i,o):(i.style.left=o.x+"px",i.style.top=o.y+"px")}function wn(i){return i._leaflet_pos||new T(0,0)}var Ie,Xn,Wi;if("onselectstart"in document)Ie=function(){mt(window,"selectstart",ve)},Xn=function(){xt(window,"selectstart",ve)};else{var Hn=pe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ie=function(){if(Hn){var i=document.documentElement.style;Wi=i[Hn],i[Hn]="none"}},Xn=function(){Hn&&(document.documentElement.style[Hn]=Wi,Wi=void 0)}}function Wn(){mt(window,"dragstart",ve)}function jn(){xt(window,"dragstart",ve)}var Kn,Mi;function Ir(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ri(),Kn=i,Mi=i.style.outlineStyle,i.style.outlineStyle="none",mt(window,"keydown",Ri))}function Ri(){Kn&&(Kn.style.outlineStyle=Mi,Kn=void 0,Mi=void 0,xt(window,"keydown",Ri))}function In(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Cr(i){var o=i.getBoundingClientRect();return{x:o.width/i.offsetWidth||1,y:o.height/i.offsetHeight||1,boundingClientRect:o}}var gi={__proto__:null,TRANSFORM:Ke,TRANSITION:gt,TRANSITION_END:is,get:de,getStyle:It,create:lt,remove:Gt,empty:Fn,toFront:q,toBack:st,hasClass:St,addClass:ct,removeClass:ie,setClass:me,getClass:Yn,setOpacity:he,testProp:pe,setTransform:sn,setPosition:bt,getPosition:wn,get disableTextSelection(){return Ie},get enableTextSelection(){return Xn},disableImageDrag:Wn,enableImageDrag:jn,preventOutline:Ir,restoreOutline:Ri,getSizedParentNode:In,getScale:Cr};function mt(i,o,u,h){if(o&&typeof o=="object")for(var m in o)ji(i,m,o[m],u);else{o=S(o);for(var y=0,C=o.length;y<C;y++)ji(i,o[y],u,h)}return this}var Kt="_leaflet_events";function xt(i,o,u,h){if(arguments.length===1)Jt(i),delete i[Kt];else if(o&&typeof o=="object")for(var m in o)kt(i,m,o[m],u);else if(o=S(o),arguments.length===2)Jt(i,function(R){return pt(o,R)!==-1});else for(var y=0,C=o.length;y<C;y++)kt(i,o[y],u,h);return this}function Jt(i,o){for(var u in i[Kt]){var h=u.split(/\d/)[0];(!o||o(h))&&kt(i,h,null,null,u)}}var As={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ji(i,o,u,h){var m=o+z(u)+(h?"_"+z(h):"");if(i[Kt]&&i[Kt][m])return this;var y=function(R){return u.call(h||i,R||window.event)},C=y;!it.touchNative&&it.pointer&&o.indexOf("touch")===0?y=Xo(i,o,y):it.touch&&o==="dblclick"?y=An(i,y):"addEventListener"in i?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?i.addEventListener(As[o]||o,y,it.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(R){R=R||window.event,Et(i,R)&&C(R)},i.addEventListener(As[o],y,!1)):i.addEventListener(o,C,!1):i.attachEvent("on"+o,y),i[Kt]=i[Kt]||{},i[Kt][m]=y}function kt(i,o,u,h,m){m=m||o+z(u)+(h?"_"+z(h):"");var y=i[Kt]&&i[Kt][m];if(!y)return this;!it.touchNative&&it.pointer&&o.indexOf("touch")===0?Ho(i,o,y):it.touch&&o==="dblclick"?Mt(i,y):"removeEventListener"in i?i.removeEventListener(As[o]||o,y,!1):i.detachEvent("on"+o,y),i[Kt][m]=null}function Cn(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ce(i){return ji(i,"wheel",Cn),this}function Oi(i){return mt(i,"mousedown touchstart dblclick contextmenu",Cn),i._leaflet_disable_click=!0,this}function ve(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function di(i){return ve(i),Cn(i),this}function rs(i){if(i.composedPath)return i.composedPath();for(var o=[],u=i.target;u;)o.push(u),u=u.parentNode;return o}function on(i,o){if(!o)return new T(i.clientX,i.clientY);var u=Cr(o),h=u.boundingClientRect;return new T((i.clientX-h.left)/u.x-o.clientLeft,(i.clientY-h.top)/u.y-o.clientTop)}var Nr=it.linux&&it.chrome?window.devicePixelRatio:it.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ss(i){return it.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Nr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Et(i,o){var u=o.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var an={__proto__:null,on:mt,off:xt,stopPropagation:Cn,disableScrollPropagation:Ce,disableClickPropagation:Oi,preventDefault:ve,stop:di,getPropagationPath:rs,getMousePosition:on,getWheelDelta:ss,isExternalTarget:Et,addListener:mt,removeListener:xt},Ki=vn.extend({run:function(i,o,u,h){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(h||.5,.2),this._startPos=wn(i),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Tt(this._animate,this),this._step()},_step:function(i){var o=+new Date-this._startTime,u=this._duration*1e3;o<u?this._runFrame(this._easeOut(o/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,o){var u=this._startPos.add(this._offset.multiplyBy(i));o&&u._round(),bt(this._el,u),this.fire("step")},_complete:function(){x(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ct=vn.extend({options:{crs:Er,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,o){o=_(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=I(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(_t(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gt&&it.any3d&&!it.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,is,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,o,u){if(o=o===void 0?this._zoom:this._limitZoom(o),i=this._limitCenter(_t(i),o,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=P({animate:u.animate},u.zoom),u.pan=P({animate:u.animate,duration:u.duration},u.pan));var h=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,o,u.zoom):this._tryAnimatedPan(i,u.pan);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(i,o,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,o){return this._loaded?this.setView(this.getCenter(),i,{zoom:o}):(this._zoom=i,this)},zoomIn:function(i,o){return i=i||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,o)},zoomOut:function(i,o){return i=i||(it.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,o)},setZoomAround:function(i,o,u){var h=this.getZoomScale(o),m=this.getSize().divideBy(2),y=i instanceof T?i:this.latLngToContainerPoint(i),C=y.subtract(m).multiplyBy(1-1/h),R=this.containerPointToLatLng(m.add(C));return this.setView(R,o,{zoom:u})},_getBoundsCenterZoom:function(i,o){o=o||{},i=i.getBounds?i.getBounds():At(i);var u=$(o.paddingTopLeft||o.padding||[0,0]),h=$(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(i,!1,u.add(h));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:i.getCenter(),zoom:m};var y=h.subtract(u).divideBy(2),C=this.project(i.getSouthWest(),m),R=this.project(i.getNorthEast(),m),A=this.unproject(C.add(R).divideBy(2).add(y),m);return{center:A,zoom:m}},fitBounds:function(i,o){if(i=At(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,o);return this.setView(u.center,u.zoom,o)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,o){return this.setView(i,this._zoom,{pan:o})},panBy:function(i,o){if(i=$(i).round(),o=o||{},!i.x&&!i.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ki,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){ct(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,o.duration||.25,o.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,o,u){if(u=u||{},u.animate===!1||!it.any3d)return this.setView(i,o,u);this._stop();var h=this.project(this.getCenter()),m=this.project(i),y=this.getSize(),C=this._zoom;i=_t(i),o=o===void 0?C:o;var R=Math.max(y.x,y.y),A=R*this.getZoomScale(C,o),B=m.distanceTo(h)||1,J=1.42,at=J*J;function ft(ue){var Li=ue?-1:1,ps=ue?A:R,Gr=A*A-R*R+Li*at*at*B*B,vs=2*ps*at*B,Gi=Gr/vs,Vr=Math.sqrt(Gi*Gi+1)-Gi,ys=Vr<1e-9?-18:Math.log(Vr);return ys}function Fe(ue){return(Math.exp(ue)-Math.exp(-ue))/2}function Bt(ue){return(Math.exp(ue)+Math.exp(-ue))/2}function $t(ue){return Fe(ue)/Bt(ue)}var be=ft(0);function Be(ue){return R*(Bt(be)/Bt(be+J*ue))}function Us(ue){return R*(Bt(be)*$t(be+J*ue)-Fe(be))/at}function Gn(ue){return 1-Math.pow(1-ue,1.5)}var ds=Date.now(),ms=(ft(1)-be)/J,lr=u.duration?1e3*u.duration:1e3*ms*.8;function zr(){var ue=(Date.now()-ds)/lr,Li=Gn(ue)*ms;ue<=1?(this._flyToFrame=Tt(zr,this),this._move(this.unproject(h.add(m.subtract(h).multiplyBy(Us(Li)/B)),C),this.getScaleZoom(R/Be(Li),C),{flyTo:!0})):this._move(i,o)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),zr.call(this),this},flyToBounds:function(i,o){var u=this._getBoundsCenterZoom(i,o);return this.flyTo(u.center,u.zoom,o)},setMaxBounds:function(i){return i=At(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var o=this.options.minZoom;return this.options.minZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var o=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&o!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,o){this._enforcingBounds=!0;var u=this.getCenter(),h=this._limitCenter(u,this._zoom,At(i));return u.equals(h)||this.panTo(h,o),this._enforcingBounds=!1,this},panInside:function(i,o){o=o||{};var u=$(o.paddingTopLeft||o.padding||[0,0]),h=$(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(i),C=this.getPixelBounds(),R=Ut([C.min.add(u),C.max.subtract(h)]),A=R.getSize();if(!R.contains(y)){this._enforcingBounds=!0;var B=y.subtract(R.getCenter()),J=R.extend(y).getSize().subtract(A);m.x+=B.x<0?-J.x:J.x,m.y+=B.y<0?-J.y:J.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=P({animate:!1,pan:!0},i===!0?{animate:!0}:i);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),h=o.divideBy(2).round(),m=u.divideBy(2).round(),y=h.subtract(m);return!y.x&&!y.y?this:(i.animate&&i.pan?this.panBy(y):(i.pan&&this._rawPanBy(y),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(I(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=P({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=I(this._handleGeolocationResponse,this),u=I(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,u,i):navigator.geolocation.getCurrentPosition(o,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var o=i.code,u=i.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var o=i.coords.latitude,u=i.coords.longitude,h=new Z(o,u),m=h.toBounds(i.coords.accuracy*2),y=this._locateOptions;if(y.setView){var C=this.getBoundsZoom(m);this.setView(h,y.maxZoom?Math.min(C,y.maxZoom):C)}var R={latlng:h,bounds:m,timestamp:i.timestamp};for(var A in i.coords)typeof i.coords[A]=="number"&&(R[A]=i.coords[A]);this.fire("locationfound",R)}},addHandler:function(i,o){if(!o)return this;var u=this[i]=new o(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(x(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Gt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,o){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),h=lt("div",u,o||this._mapPane);return i&&(this._panes[i]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),o=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new Me(o,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,o,u){i=At(i),u=$(u||[0,0]);var h=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),C=i.getNorthWest(),R=i.getSouthEast(),A=this.getSize().subtract(u),B=Ut(this.project(R,h),this.project(C,h)).getSize(),J=it.any3d?this.options.zoomSnap:1,at=A.x/B.x,ft=A.y/B.y,Fe=o?Math.max(at,ft):Math.min(at,ft);return h=this.getScaleZoom(Fe,h),J&&(h=Math.round(h/(J/100))*(J/100),h=o?Math.ceil(h/J)*J:Math.floor(h/J)*J),Math.max(m,Math.min(y,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new T(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,o){var u=this._getTopLeftPoint(i,o);return new ut(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,o){var u=this.options.crs;return o=o===void 0?this._zoom:o,u.scale(i)/u.scale(o)},getScaleZoom:function(i,o){var u=this.options.crs;o=o===void 0?this._zoom:o;var h=u.zoom(i*u.scale(o));return isNaN(h)?1/0:h},project:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(_t(i),o)},unproject:function(i,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng($(i),o)},layerPointToLatLng:function(i){var o=$(i).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(i){var o=this.project(_t(i))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(_t(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(At(i))},distance:function(i,o){return this.options.crs.distance(_t(i),_t(o))},containerPointToLayerPoint:function(i){return $(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return $(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var o=this.containerPointToLayerPoint($(i));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(_t(i)))},mouseEventToContainerPoint:function(i){return on(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var o=this._container=de(i);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mt(o,"scroll",this._onScroll,this),this._containerId=z(o)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&it.any3d,ct(i,"leaflet-container"+(it.touch?" leaflet-touch":"")+(it.retina?" leaflet-retina":"")+(it.ielt9?" leaflet-oldie":"")+(it.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=It(i,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new T(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ct(i.markerPane,"leaflet-zoom-hide"),ct(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,o,u){bt(this._mapPane,new T(0,0));var h=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,u)._move(i,o)._moveEnd(m),this.fire("viewreset"),h&&this.fire("load")},_moveStart:function(i,o){return i&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(i,o,u,h){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),h?u&&u.pinch&&this.fire("zoom",u):((m||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return x(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){bt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[z(this._container)]=this;var o=i?xt:mt;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),it.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){x(this._resizeRequest),this._resizeRequest=Tt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,o){for(var u=[],h,m=o==="mouseout"||o==="mouseover",y=i.target||i.srcElement,C=!1;y;){if(h=this._targets[z(y)],h&&(o==="click"||o==="preclick")&&this._draggableMoved(h)){C=!0;break}if(h&&h.listens(o,!0)&&(m&&!Et(y,i)||(u.push(h),m))||y===this._container)break;y=y.parentNode}return!u.length&&!C&&!m&&this.listens(o,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var o=i.target||i.srcElement;if(!(!this._loaded||o._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(o))){var u=i.type;u==="mousedown"&&Ir(o),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,o,u){if(i.type==="click"){var h=P({},i);h.type="preclick",this._fireDOMEvent(h,h.type,u)}var m=this._findEventTargets(i,o);if(u){for(var y=[],C=0;C<u.length;C++)u[C].listens(o,!0)&&y.push(u[C]);m=y.concat(m)}if(m.length){o==="contextmenu"&&ve(i);var R=m[0],A={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var B=R.getLatLng&&(!R._radius||R._radius<=10);A.containerPoint=B?this.latLngToContainerPoint(R.getLatLng()):this.mouseEventToContainerPoint(i),A.layerPoint=this.containerPointToLayerPoint(A.containerPoint),A.latlng=B?R.getLatLng():this.layerPointToLatLng(A.layerPoint)}for(C=0;C<m.length;C++)if(m[C].fire(o,A,!0),A.originalEvent._stopped||m[C].options.bubblingMouseEvents===!1&&pt(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,o=this._handlers.length;i<o;i++)this._handlers[i].disable()},whenReady:function(i,o){return this._loaded?i.call(o||this,{target:this}):this.on("load",i,o),this},_getMapPanePos:function(){return wn(this._mapPane)||new T(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,o){var u=i&&o!==void 0?this._getNewPixelOrigin(i,o):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,o){var u=this.getSize()._divideBy(2);return this.project(i,o)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,o,u){var h=this._getNewPixelOrigin(u,o);return this.project(i,o)._subtract(h)},_latLngBoundsToNewLayerBounds:function(i,o,u){var h=this._getNewPixelOrigin(u,o);return Ut([this.project(i.getSouthWest(),o)._subtract(h),this.project(i.getNorthWest(),o)._subtract(h),this.project(i.getSouthEast(),o)._subtract(h),this.project(i.getNorthEast(),o)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,o,u){if(!u)return i;var h=this.project(i,o),m=this.getSize().divideBy(2),y=new ut(h.subtract(m),h.add(m)),C=this._getBoundsOffset(y,u,o);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?i:this.unproject(h.add(C),o)},_limitOffset:function(i,o){if(!o)return i;var u=this.getPixelBounds(),h=new ut(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(h,o))},_getBoundsOffset:function(i,o,u){var h=Ut(this.project(o.getNorthEast(),u),this.project(o.getSouthWest(),u)),m=h.min.subtract(i.min),y=h.max.subtract(i.max),C=this._rebound(m.x,-y.x),R=this._rebound(m.y,-y.y);return new T(C,R)},_rebound:function(i,o){return i+o>0?Math.round(i-o)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(o))},_limitZoom:function(i){var o=this.getMinZoom(),u=this.getMaxZoom(),h=it.any3d?this.options.zoomSnap:1;return h&&(i=Math.round(i/h)*h),Math.max(o,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ie(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,o){var u=this._getCenterOffset(i)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,o),!0)},_createAnimProxy:function(){var i=this._proxy=lt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(o){var u=Ke,h=this._proxy.style[u];sn(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),h===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),o=this.getZoom();sn(this._proxy,this.project(i,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,o,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(o),m=this._getCenterOffset(i)._divideBy(1-1/h);return u.animate!==!0&&!this.getSize().contains(m)?!1:(Tt(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,o,!0)},this),!0)},_animateZoom:function(i,o,u,h){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=o,ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:o,noUpdate:h}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(I(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ie(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mi(i,o){return new Ct(i,o)}var Ue=qt.extend({options:{position:"topright"},initialize:function(i){_(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var o=this._map;return o&&o.removeControl(this),this.options.position=i,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var o=this._container=this.onAdd(i),u=this.getPosition(),h=i._controlCorners[u];return ct(o,"leaflet-control"),u.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),ye=function(i){return new Ue(i)};Ct.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},o="leaflet-",u=this._controlContainer=lt("div",o+"control-container",this._container);function h(m,y){var C=o+m+" "+o+y;i[m+y]=lt("div",C,u)}h("top","left"),h("top","right"),h("bottom","left"),h("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Gt(this._controlCorners[i]);Gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ji=Ue.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,o,u,h){return u<h?-1:h<u?1:0}},initialize:function(i,o,u){_(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var h in i)this._addLayer(i[h],h);for(h in o)this._addLayer(o[h],h,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ue.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,o){return this._addLayer(i,o),this._map?this._update():this},addOverlay:function(i,o){return this._addLayer(i,o,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var o=this._getLayer(z(i));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ie(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ie(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",o=this._container=lt("div",i),u=this.options.collapsed;o.setAttribute("aria-haspopup",!0),Oi(o),Ce(o);var h=this._section=lt("section",i+"-list");u&&(this._map.on("click",this.collapse,this),mt(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=lt("a",i+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),mt(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){ve(y),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=lt("div",i+"-base",h),this._separator=lt("div",i+"-separator",h),this._overlaysList=lt("div",i+"-overlays",h),o.appendChild(h)},_getLayer:function(i){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&z(this._layers[o].layer)===i)return this._layers[o]},_addLayer:function(i,o,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:o,overlay:u}),this.options.sortLayers&&this._layers.sort(I(function(h,m){return this.options.sortFunction(h.layer,m.layer,h.name,m.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fn(this._baseLayersList),Fn(this._overlaysList),this._layerControlInputs=[];var i,o,u,h,m=0;for(u=0;u<this._layers.length;u++)h=this._layers[u],this._addItem(h),o=o||h.overlay,i=i||!h.overlay,m+=h.overlay?0:1;return this.options.hideSingleBase&&(i=i&&m>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=o&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var o=this._getLayer(z(i.target)),u=o.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,o)},_createRadioElement:function(i,o){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(o?' checked="checked"':"")+"/>",h=document.createElement("div");return h.innerHTML=u,h.firstChild},_addItem:function(i){var o=document.createElement("label"),u=this._map.hasLayer(i.layer),h;i.overlay?(h=document.createElement("input"),h.type="checkbox",h.className="leaflet-control-layers-selector",h.defaultChecked=u):h=this._createRadioElement("leaflet-base-layers_"+z(this),u),this._layerControlInputs.push(h),h.layerId=z(i.layer),mt(h,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+i.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(h),y.appendChild(m);var C=i.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,o,u,h=[],m=[];this._handlingClick=!0;for(var y=i.length-1;y>=0;y--)o=i[y],u=this._getLayer(o.layerId).layer,o.checked?h.push(u):o.checked||m.push(u);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<h.length;y++)this._map.hasLayer(h[y])||this._map.addLayer(h[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,o,u,h=this._map.getZoom(),m=i.length-1;m>=0;m--)o=i[m],u=this._getLayer(o.layerId).layer,o.disabled=u.options.minZoom!==void 0&&h<u.options.minZoom||u.options.maxZoom!==void 0&&h>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,mt(i,"click",ve),this.expand();var o=this;setTimeout(function(){xt(i,"click",ve),o._preventClick=!1})}}),Jn=function(i,o,u){return new Ji(i,o,u)},Di=Ue.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var o="leaflet-control-zoom",u=lt("div",o+" leaflet-bar"),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,o+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,o+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,o,u,h,m){var y=lt("a",u,h);return y.innerHTML=i,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),Oi(y),mt(y,"click",di),mt(y,"click",m,this),mt(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var i=this._map,o="leaflet-disabled";ie(this._zoomInButton,o),ie(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ct(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ct(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ct.mergeOptions({zoomControl:!0}),Ct.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Di,this.addControl(this.zoomControl))});var Ai=function(i){return new Di(i)},Fi=Ue.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var o="leaflet-control-scale",u=lt("div",o),h=this.options;return this._addScales(h,o+"-line",u),i.on(h.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,o,u){i.metric&&(this._mScale=lt("div",o,u)),i.imperial&&(this._iScale=lt("div",o,u))},_update:function(){var i=this._map,o=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,o]),i.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var o=this._getRoundNum(i),u=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,u,o/i)},_updateImperial:function(i){var o=i*3.2808399,u,h,m;o>5280?(u=o/5280,h=this._getRoundNum(u),this._updateScale(this._iScale,h+" mi",h/u)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(i,o,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=o},_getRoundNum:function(i){var o=Math.pow(10,(Math.floor(i)+"").length-1),u=i/o;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,o*u}}),U=function(i){return new Fi(i)},Ze='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ht=Ue.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(it.inlineSvg?Ze+" ":"")+"Leaflet</a>"},initialize:function(i){_(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=lt("div","leaflet-control-attribution"),Oi(this._container);for(var o in i._layers)i._layers[o].getAttribution&&this.addAttribution(i._layers[o].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var o in this._attributions)this._attributions[o]&&i.push(o);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Ct.mergeOptions({attributionControl:!0}),Ct.addInitHook(function(){this.options.attributionControl&&new Ht().addTo(this)});var Qi=function(i){return new Ht(i)};Ue.Layers=Ji,Ue.Zoom=Di,Ue.Scale=Fi,Ue.Attribution=Ht,ye.layers=Jn,ye.zoom=Ai,ye.scale=U,ye.attribution=Qi;var Je=qt.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Je.addTo=function(i,o){return i.addHandler(o,this),this};var Lr={Events:jt},Qn=it.touch?"touchstart mousedown":"mousedown",Oe=vn.extend({options:{clickTolerance:3},initialize:function(i,o,u,h){_(this,h),this._element=i,this._dragStartTarget=o||i,this._preventOutline=u},enable:function(){this._enabled||(mt(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Oe._dragging===this&&this.finishDrag(!0),xt(this._dragStartTarget,Qn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!St(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){Oe._dragging===this&&this.finishDrag();return}if(!(Oe._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(Oe._dragging=this,this._preventOutline&&Ir(this._element),Wn(),Ie(),!this._moving)){this.fire("down");var o=i.touches?i.touches[0]:i,u=In(this._element);this._startPoint=new T(o.clientX,o.clientY),this._startPos=wn(this._element),this._parentScale=Cr(u);var h=i.type==="mousedown";mt(document,h?"mousemove":"touchmove",this._onMove,this),mt(document,h?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var o=i.touches&&i.touches.length===1?i.touches[0]:i,u=new T(o.clientX,o.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ve(i),this._moved||(this.fire("dragstart"),this._moved=!0,ct(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),bt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ie(document.body,"leaflet-dragging"),this._lastTarget&&(ie(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xt(document,"mousemove touchmove",this._onMove,this),xt(document,"mouseup touchend touchcancel",this._onUp,this),jn(),Xn();var o=this._moved&&this._moving;this._moving=!1,Oe._dragging=!1,o&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function ki(i,o,u){var h,m=[1,4,2,8],y,C,R,A,B,J,at,ft;for(y=0,J=i.length;y<J;y++)i[y]._code=ei(i[y],o);for(R=0;R<4;R++){for(at=m[R],h=[],y=0,J=i.length,C=J-1;y<J;C=y++)A=i[y],B=i[C],A._code&at?B._code&at||(ft=ti(B,A,at,o,u),ft._code=ei(ft,o),h.push(ft)):(B._code&at&&(ft=ti(B,A,at,o,u),ft._code=ei(ft,o),h.push(ft)),h.push(A));i=h}return i}function un(i,o){var u,h,m,y,C,R,A,B,J;if(!i||i.length===0)throw new Error("latlngs not passed");_e(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var at=_t([0,0]),ft=At(i),Fe=ft.getNorthWest().distanceTo(ft.getSouthWest())*ft.getNorthEast().distanceTo(ft.getNorthWest());Fe<1700&&(at=$n(i));var Bt=i.length,$t=[];for(u=0;u<Bt;u++){var be=_t(i[u]);$t.push(o.project(_t([be.lat-at.lat,be.lng-at.lng])))}for(R=A=B=0,u=0,h=Bt-1;u<Bt;h=u++)m=$t[u],y=$t[h],C=m.y*y.x-y.y*m.x,A+=(m.x+y.x)*C,B+=(m.y+y.y)*C,R+=C*3;R===0?J=$t[0]:J=[A/R,B/R];var Be=o.unproject($(J));return _t([Be.lat+at.lat,Be.lng+at.lng])}function $n(i){for(var o=0,u=0,h=0,m=0;m<i.length;m++){var y=_t(i[m]);o+=y.lat,u+=y.lng,h++}return _t([o/h,u/h])}var Bi={__proto__:null,clipPolygon:ki,polygonCenter:un,centroid:$n};function ln(i,o){if(!o||!i.length)return i.slice();var u=o*o;return i=Xe(i,u),i=ks(i,u),i}function Sr(i,o,u){return Math.sqrt(vi(i,o,u,!0))}function Fs(i,o,u){return vi(i,o,u)}function ks(i,o){var u=i.length,h=typeof Uint8Array<"u"?Uint8Array:Array,m=new h(u);m[0]=m[u-1]=1,$i(i,m,o,0,u-1);var y,C=[];for(y=0;y<u;y++)m[y]&&C.push(i[y]);return C}function $i(i,o,u,h,m){var y=0,C,R,A;for(R=h+1;R<=m-1;R++)A=vi(i[R],i[h],i[m],!0),A>y&&(C=R,y=A);y>u&&(o[C]=1,$i(i,o,u,h,C),$i(i,o,u,C,m))}function Xe(i,o){for(var u=[i[0]],h=1,m=0,y=i.length;h<y;h++)kn(i[h],i[m])>o&&(u.push(i[h]),m=h);return m<y-1&&u.push(i[y-1]),u}var pi;function br(i,o,u,h,m){var y=h?pi:ei(i,u),C=ei(o,u),R,A,B;for(pi=C;;){if(!(y|C))return[i,o];if(y&C)return!1;R=y||C,A=ti(i,o,R,u,m),B=ei(A,u),R===y?(i=A,y=B):(o=A,C=B)}}function ti(i,o,u,h,m){var y=o.x-i.x,C=o.y-i.y,R=h.min,A=h.max,B,J;return u&8?(B=i.x+y*(A.y-i.y)/C,J=A.y):u&4?(B=i.x+y*(R.y-i.y)/C,J=R.y):u&2?(B=A.x,J=i.y+C*(A.x-i.x)/y):u&1&&(B=R.x,J=i.y+C*(R.x-i.x)/y),new T(B,J,m)}function ei(i,o){var u=0;return i.x<o.min.x?u|=1:i.x>o.max.x&&(u|=2),i.y<o.min.y?u|=4:i.y>o.max.y&&(u|=8),u}function kn(i,o){var u=o.x-i.x,h=o.y-i.y;return u*u+h*h}function vi(i,o,u,h){var m=o.x,y=o.y,C=u.x-m,R=u.y-y,A=C*C+R*R,B;return A>0&&(B=((i.x-m)*C+(i.y-y)*R)/A,B>1?(m=u.x,y=u.y):B>0&&(m+=C*B,y+=R*B)),C=i.x-m,R=i.y-y,h?C*C+R*R:new T(m,y)}function _e(i){return!Lt(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Pr(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),_e(i)}function yi(i,o){var u,h,m,y,C,R,A,B;if(!i||i.length===0)throw new Error("latlngs not passed");_e(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var J=_t([0,0]),at=At(i),ft=at.getNorthWest().distanceTo(at.getSouthWest())*at.getNorthEast().distanceTo(at.getNorthWest());ft<1700&&(J=$n(i));var Fe=i.length,Bt=[];for(u=0;u<Fe;u++){var $t=_t(i[u]);Bt.push(o.project(_t([$t.lat-J.lat,$t.lng-J.lng])))}for(u=0,h=0;u<Fe-1;u++)h+=Bt[u].distanceTo(Bt[u+1])/2;if(h===0)B=Bt[0];else for(u=0,y=0;u<Fe-1;u++)if(C=Bt[u],R=Bt[u+1],m=C.distanceTo(R),y+=m,y>h){A=(y-h)/m,B=[R.x-A*(R.x-C.x),R.y-A*(R.y-C.y)];break}var be=o.unproject($(B));return _t([be.lat+J.lat,be.lng+J.lng])}var Bs={__proto__:null,simplify:ln,pointToSegmentDistance:Sr,closestPointOnSegment:Fs,clipSegment:br,_getEdgeIntersection:ti,_getBitCode:ei,_sqClosestPointOnSegment:vi,isFlat:_e,_flat:Pr,polylineCenter:yi},tr={project:function(i){return new T(i.lng,i.lat)},unproject:function(i){return new Z(i.y,i.x)},bounds:new ut([-180,-90],[180,90])},er={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ut([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var o=Math.PI/180,u=this.R,h=i.lat*o,m=this.R_MINOR/u,y=Math.sqrt(1-m*m),C=y*Math.sin(h),R=Math.tan(Math.PI/4-h/2)/Math.pow((1-C)/(1+C),y/2);return h=-u*Math.log(Math.max(R,1e-10)),new T(i.lng*o*u,h)},unproject:function(i){for(var o=180/Math.PI,u=this.R,h=this.R_MINOR/u,m=Math.sqrt(1-h*h),y=Math.exp(-i.y/u),C=Math.PI/2-2*Math.atan(y),R=0,A=.1,B;R<15&&Math.abs(A)>1e-7;R++)B=m*Math.sin(C),B=Math.pow((1-B)/(1+B),m/2),A=Math.PI/2-2*Math.atan(y*B)-C,C+=A;return new Z(C*o,i.x*o/u)}},zs={__proto__:null,LonLat:tr,Mercator:er,SphericalMercator:Ui},Ne=P({},yn,{code:"EPSG:3395",projection:er,transformation:function(){var i=.5/(Math.PI*er.R);return nt(i,.5,-i,.5)}()}),Tr=P({},yn,{code:"EPSG:4326",projection:tr,transformation:nt(1/180,1,-1/180,.5)}),Mr=P({},zt,{projection:tr,transformation:nt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,o){var u=o.lng-i.lng,h=o.lat-i.lat;return Math.sqrt(u*u+h*h)},infinite:!0});zt.Earth=yn,zt.EPSG3395=Ne,zt.EPSG3857=Er,zt.EPSG900913=Ts,zt.EPSG4326=Tr,zt.Simple=Mr;var He=vn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[z(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[z(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var o=i.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var u=this.getEvents();o.on(u,this),this.once("remove",function(){o.off(u,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});Ct.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var o=z(i);return this._layers[o]?this:(this._layers[o]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var o=z(i);return this._layers[o]?(this._loaded&&i.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return z(i)in this._layers},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},_addLayers:function(i){i=i?Lt(i)?i:[i]:[];for(var o=0,u=i.length;o<u;o++)this.addLayer(i[o])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[z(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var o=z(i);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,o=-1/0,u=this._getZoomSpan();for(var h in this._zoomBoundLayers){var m=this._zoomBoundLayers[h].options;i=m.minZoom===void 0?i:Math.min(i,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ni=He.extend({initialize:function(i,o){_(this,o),this._layers={};var u,h;if(i)for(u=0,h=i.length;u<h;u++)this.addLayer(i[u])},addLayer:function(i){var o=this.getLayerId(i);return this._layers[o]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var o=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(i){var o=typeof i=="number"?i:this.getLayerId(i);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var o=Array.prototype.slice.call(arguments,1),u,h;for(u in this._layers)h=this._layers[u],h[i]&&h[i].apply(h,o);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,o){for(var u in this._layers)i.call(o,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return z(i)}}),Gs=function(i,o){return new ni(i,o)},Nn=ni.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),ni.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),ni.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Me;for(var o in this._layers){var u=this._layers[o];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),Rr=function(i,o){return new Nn(i,o)},_i=qt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){_(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,o){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var h=this._createImg(u,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(h,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),h},_setIconStyles:function(i,o){var u=this.options,h=u[o+"Size"];typeof h=="number"&&(h=[h,h]);var m=$(h),y=$(o==="shadow"&&u.shadowAnchor||u.iconAnchor||m&&m.divideBy(2,!0));i.className="leaflet-marker-"+o+" "+(u.className||""),y&&(i.style.marginLeft=-y.x+"px",i.style.marginTop=-y.y+"px"),m&&(i.style.width=m.x+"px",i.style.height=m.y+"px")},_createImg:function(i,o){return o=o||document.createElement("img"),o.src=i,o},_getIconUrl:function(i){return it.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function hn(i){return new _i(i)}var De=_i.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof De.imagePath!="string"&&(De.imagePath=this._detectIconPath()),(this.options.imagePath||De.imagePath)+_i.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var o=function(u,h,m){var y=h.exec(u);return y&&y[m]};return i=o(i,/^url\((['"])?(.+)\1\)$/,2),i&&o(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=lt("div","leaflet-default-icon-path",document.body),o=It(i,"background-image")||It(i,"backgroundImage");if(document.body.removeChild(i),o=this._stripUrl(o),o)return o;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Ae=Je.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new Oe(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ct(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ie(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var o=this._marker,u=o._map,h=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=wn(o._icon),C=u.getPixelBounds(),R=u.getPixelOrigin(),A=Ut(C.min._subtract(R).add(m),C.max._subtract(R).subtract(m));if(!A.contains(y)){var B=$((Math.max(A.max.x,y.x)-A.max.x)/(C.max.x-A.max.x)-(Math.min(A.min.x,y.x)-A.min.x)/(C.min.x-A.min.x),(Math.max(A.max.y,y.y)-A.max.y)/(C.max.y-A.max.y)-(Math.min(A.min.y,y.y)-A.min.y)/(C.min.y-A.min.y)).multiplyBy(h);u.panBy(B,{animate:!1}),this._draggable._newPos._add(B),this._draggable._startPos._add(B),bt(o._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Tt(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(x(this._panRequest),this._panRequest=Tt(this._adjustPan.bind(this,i)))},_onDrag:function(i){var o=this._marker,u=o._shadow,h=wn(o._icon),m=o._map.layerPointToLatLng(h);u&&bt(u,h),o._latlng=m,i.latlng=m,i.oldLatLng=this._oldLatLng,o.fire("move",i).fire("drag",i)},_onDragEnd:function(i){x(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Ln=He.extend({options:{icon:new De,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,o){_(this,o),this._latlng=_t(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var o=this._latlng;return this._latlng=_t(i),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),h=!1;u!==this._icon&&(this._icon&&this._removeIcon(),h=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),ct(u,o),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(u,"focus",this._panOnFocus,this);var m=i.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(ct(m,o),m.alt=""),this._shadow=m,i.opacity<1&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xt(this._icon,"focus",this._panOnFocus,this),Gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Gt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&bt(this._icon,i),this._shadow&&bt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ae)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ae(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&he(this._icon,i),this._shadow&&he(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var o=this.options.icon.options,u=o.iconSize?$(o.iconSize):$(0,0),h=o.iconAnchor?$(o.iconAnchor):$(0,0);i.panInside(this._latlng,{paddingTopLeft:h,paddingBottomRight:u.subtract(h)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xi(i,o){return new Ln(i,o)}var Sn=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return _(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),et=Sn.extend({options:{fill:!0,radius:10},initialize:function(i,o){_(this,o),this._latlng=_t(i),this._radius=this.options.radius},setLatLng:function(i){var o=this._latlng;return this._latlng=_t(i),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var o=i&&i.radius||this._radius;return Sn.prototype.setStyle.call(this,i),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,o=this._radiusY||i,u=this._clickTolerance(),h=[i+u,o+u];this._pxBounds=new ut(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Qe(i,o){return new et(i,o)}var se=et.extend({initialize:function(i,o,u){if(typeof o=="number"&&(o=P({},u,{radius:o})),_(this,o),this._latlng=_t(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Me(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Sn.prototype.setStyle,_project:function(){var i=this._latlng.lng,o=this._latlng.lat,u=this._map,h=u.options.crs;if(h.distance===yn.distance){var m=Math.PI/180,y=this._mRadius/yn.R/m,C=u.project([o+y,i]),R=u.project([o-y,i]),A=C.add(R).divideBy(2),B=u.unproject(A).lat,J=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(B*m))/(Math.cos(o*m)*Math.cos(B*m)))/m;(isNaN(J)||J===0)&&(J=y/Math.cos(Math.PI/180*o)),this._point=A.subtract(u.getPixelOrigin()),this._radius=isNaN(J)?0:A.x-u.project([B,i-J]).x,this._radiusY=A.y-C.y}else{var at=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(at).x}this._updateBounds()}});function cn(i,o,u){return new se(i,o,u)}var We=Sn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,o){_(this,o),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var o=1/0,u=null,h=vi,m,y,C=0,R=this._parts.length;C<R;C++)for(var A=this._parts[C],B=1,J=A.length;B<J;B++){m=A[B-1],y=A[B];var at=h(i,m,y,!0);at<o&&(o=at,u=h(i,m,y))}return u&&(u.distance=Math.sqrt(o)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yi(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,o){return o=o||this._defaultShape(),i=_t(i),o.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Me,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return _e(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var o=[],u=_e(i),h=0,m=i.length;h<m;h++)u?(o[h]=_t(i[h]),this._bounds.extend(o[h])):o[h]=this._convertLatLngs(i[h]);return o},_project:function(){var i=new ut;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),o=new T(i,i);this._rawPxBounds&&(this._pxBounds=new ut([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(i,o,u){var h=i[0]instanceof Z,m=i.length,y,C;if(h){for(C=[],y=0;y<m;y++)C[y]=this._map.latLngToLayerPoint(i[y]),u.extend(C[y]);o.push(C)}else for(y=0;y<m;y++)this._projectLatlngs(i[y],o,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,u,h,m,y,C,R,A;for(u=0,m=0,y=this._rings.length;u<y;u++)for(A=this._rings[u],h=0,C=A.length;h<C-1;h++)R=br(A[h],A[h+1],i,h,!0),R&&(o[m]=o[m]||[],o[m].push(R[0]),(R[1]!==A[h+1]||h===C-2)&&(o[m].push(R[1]),m++))}},_simplifyPoints:function(){for(var i=this._parts,o=this.options.smoothFactor,u=0,h=i.length;u<h;u++)i[u]=ln(i[u],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,o){var u,h,m,y,C,R,A=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,y=this._parts.length;u<y;u++)for(R=this._parts[u],h=0,C=R.length,m=C-1;h<C;m=h++)if(!(!o&&h===0)&&Sr(i,R[m],R[h])<=A)return!0;return!1}});function os(i,o){return new We(i,o)}We._flat=Pr;var ii=We.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return un(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var o=We.prototype._convertLatLngs.call(this,i),u=o.length;return u>=2&&o[0]instanceof Z&&o[0].equals(o[u-1])&&o.pop(),o},_setLatLngs:function(i){We.prototype._setLatLngs.call(this,i),_e(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return _e(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,o=this.options.weight,u=new T(o,o);if(i=new ut(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var h=0,m=this._rings.length,y;h<m;h++)y=ki(this._rings[h],i,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var o=!1,u,h,m,y,C,R,A,B;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(y=0,A=this._parts.length;y<A;y++)for(u=this._parts[y],C=0,B=u.length,R=B-1;C<B;R=C++)h=u[C],m=u[R],h.y>i.y!=m.y>i.y&&i.x<(m.x-h.x)*(i.y-h.y)/(m.y-h.y)+h.x&&(o=!o);return o||We.prototype._containsPoint.call(this,i,!0)}});function Ei(i,o){return new ii(i,o)}var xe=Nn.extend({initialize:function(i,o){_(this,o),this._layers={},i&&this.addData(i)},addData:function(i){var o=Lt(i)?i:i.features,u,h,m;if(o){for(u=0,h=o.length;u<h;u++)m=o[u],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(i))return this;var C=$e(i,y);return C?(C.feature=ri(i),C.defaultOptions=C.options,this.resetStyle(C),y.onEachFeature&&y.onEachFeature(i,C),this.addLayer(C)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=P({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(o){this._setLayerStyle(o,i)},this)},_setLayerStyle:function(i,o){i.setStyle&&(typeof o=="function"&&(o=o(i.feature)),i.setStyle(o))}});function $e(i,o){var u=i.type==="Feature"?i.geometry:i,h=u?u.coordinates:null,m=[],y=o&&o.pointToLayer,C=o&&o.coordsToLatLng||Vs,R,A,B,J;if(!h&&!u)return null;switch(u.type){case"Point":return R=C(h),wi(y,i,R,o);case"MultiPoint":for(B=0,J=h.length;B<J;B++)R=C(h[B]),m.push(wi(y,i,R,o));return new Nn(m);case"LineString":case"MultiLineString":return A=Ii(h,u.type==="LineString"?0:1,C),new We(A,o);case"Polygon":case"MultiPolygon":return A=Ii(h,u.type==="Polygon"?1:2,C),new ii(A,o);case"GeometryCollection":for(B=0,J=u.geometries.length;B<J;B++){var at=$e({geometry:u.geometries[B],type:"Feature",properties:i.properties},o);at&&m.push(at)}return new Nn(m);case"FeatureCollection":for(B=0,J=u.features.length;B<J;B++){var ft=$e(u.features[B],o);ft&&m.push(ft)}return new Nn(m);default:throw new Error("Invalid GeoJSON object.")}}function wi(i,o,u,h){return i?i(o,u):new Ln(u,h&&h.markersInheritOptions&&h)}function Vs(i){return new Z(i[1],i[0],i[2])}function Ii(i,o,u){for(var h=[],m=0,y=i.length,C;m<y;m++)C=o?Ii(i[m],o-1,u):(u||Vs)(i[m]),h.push(C);return h}function bn(i,o){return i=_t(i),i.alt!==void 0?[c(i.lng,o),c(i.lat,o),c(i.alt,o)]:[c(i.lng,o),c(i.lat,o)]}function Pn(i,o,u,h){for(var m=[],y=0,C=i.length;y<C;y++)m.push(o?Pn(i[y],_e(i[y])?0:o-1,u,h):bn(i[y],h));return!o&&u&&m.length>0&&m.push(m[0].slice()),m}function Tn(i,o){return i.feature?P({},i.feature,{geometry:o}):ri(o)}function ri(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Or={toGeoJSON:function(i){return Tn(this,{type:"Point",coordinates:bn(this.getLatLng(),i)})}};Ln.include(Or),se.include(Or),et.include(Or),We.include({toGeoJSON:function(i){var o=!_e(this._latlngs),u=Pn(this._latlngs,o?1:0,!1,i);return Tn(this,{type:(o?"Multi":"")+"LineString",coordinates:u})}}),ii.include({toGeoJSON:function(i){var o=!_e(this._latlngs),u=o&&!_e(this._latlngs[0]),h=Pn(this._latlngs,u?2:o?1:0,!0,i);return o||(h=[h]),Tn(this,{type:(u?"Multi":"")+"Polygon",coordinates:h})}}),ni.include({toMultiPoint:function(i){var o=[];return this.eachLayer(function(u){o.push(u.toGeoJSON(i).geometry.coordinates)}),Tn(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(i){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(i);var u=o==="GeometryCollection",h=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(i);if(u)h.push(y.geometry);else{var C=ri(y);C.type==="FeatureCollection"?h.push.apply(h,C.features):h.push(C)}}}),u?Tn(this,{geometries:h,type:"GeometryCollection"}):{type:"FeatureCollection",features:h}}});function nr(i,o){return new xe(i,o)}var Dr=nr,ot=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,o,u){this._url=i,this._bounds=At(o),_(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&q(this._image),this},bringToBack:function(){return this._map&&st(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=At(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",o=this._image=i?this._url:lt("img");if(ct(o,"leaflet-image-layer"),this._zoomAnimated&&ct(o,"leaflet-zoom-animated"),this.options.className&&ct(o,this.options.className),o.onselectstart=F,o.onmousemove=F,o.onload=I(this.fire,this,"load"),o.onerror=I(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(i){var o=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;sn(this._image,u,o)},_reset:function(){var i=this._image,o=new ut(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=o.getSize();bt(i,o.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){he(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Ft=function(i,o,u){return new ot(i,o,u)},Bn=ot.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",o=this._image=i?this._url:lt("video");if(ct(o,"leaflet-image-layer"),this._zoomAnimated&&ct(o,"leaflet-zoom-animated"),this.options.className&&ct(o,this.options.className),o.onselectstart=F,o.onmousemove=F,o.onloadeddata=I(this.fire,this,"load"),i){for(var u=o.getElementsByTagName("source"),h=[],m=0;m<u.length;m++)h.push(u[m].src);this._url=u.length>0?h:[o.src];return}Lt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var C=lt("source");C.src=this._url[y],o.appendChild(C)}}});function Le(i,o,u){return new Bn(i,o,u)}var si=ot.extend({_initImage:function(){var i=this._image=this._url;ct(i,"leaflet-image-layer"),this._zoomAnimated&&ct(i,"leaflet-zoom-animated"),this.options.className&&ct(i,this.options.className),i.onselectstart=F,i.onmousemove=F}});function Ar(i,o,u){return new si(i,o,u)}var Ee=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,o){i&&(i instanceof Z||Lt(i))?(this._latlng=_t(i),_(this,o)):(_(this,i),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&he(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&he(this._container,1),this.bringToFront(),this.options.interactive&&(ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(he(this._container,0),this._removeTimeout=setTimeout(I(Gt,void 0,this._container),200)):Gt(this._container),this.options.interactive&&(ie(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=_t(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&q(this._container),this},bringToBack:function(){return this._map&&st(this._container),this},_prepareOpen:function(i){var o=this._source;if(!o._map)return!1;if(o instanceof Nn){o=null;var u=this._source._layers;for(var h in u)if(u[h]._map){o=u[h];break}if(!o)return!1;this._source=o}if(!i)if(o.getCenter)i=o.getCenter();else if(o.getLatLng)i=o.getLatLng();else if(o.getBounds)i=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")i.innerHTML=o;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),o=$(this.options.offset),u=this._getAnchor();this._zoomAnimated?bt(this._container,i.add(u)):o=o.add(i).add(u);var h=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=h+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Ct.include({_initOverlay:function(i,o,u,h){var m=o;return m instanceof i||(m=new i(h).setContent(o)),u&&m.setLatLng(u),m}}),He.include({_initOverlay:function(i,o,u,h){var m=u;return m instanceof i?(_(m,h),m._source=this):(m=o&&!h?o:new i(h,this),m.setContent(u)),m}});var Se=Ee.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Ee.prototype.openOn.call(this,i)},onAdd:function(i){Ee.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Sn||this._source.on("preclick",Cn))},onRemove:function(i){Ee.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Sn||this._source.off("preclick",Cn))},getEvents:function(){var i=Ee.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",o=this._container=lt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=lt("div",i+"-content-wrapper",o);if(this._contentNode=lt("div",i+"-content",u),Oi(o),Ce(this._contentNode),mt(o,"contextmenu",Cn),this._tipContainer=lt("div",i+"-tip-container",o),this._tip=lt("div",i+"-tip",this._tipContainer),this.options.closeButton){var h=this._closeButton=lt("a",i+"-close-button",o);h.setAttribute("role","button"),h.setAttribute("aria-label","Close popup"),h.href="#close",h.innerHTML='<span aria-hidden="true">&#215;</span>',mt(h,"click",function(m){ve(m),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,o=i.style;o.width="",o.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),o.width=u+1+"px",o.whiteSpace="",o.height="";var h=i.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&h>m?(o.height=m+"px",ct(i,y)):ie(i,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();bt(this._container,o.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,o=parseInt(It(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+o,h=this._containerWidth,m=new T(this._containerLeft,-u-this._containerBottom);m._add(wn(this._container));var y=i.layerPointToContainerPoint(m),C=$(this.options.autoPanPadding),R=$(this.options.autoPanPaddingTopLeft||C),A=$(this.options.autoPanPaddingBottomRight||C),B=i.getSize(),J=0,at=0;y.x+h+A.x>B.x&&(J=y.x+h-B.x+A.x),y.x-J-R.x<0&&(J=y.x-R.x),y.y+u+A.y>B.y&&(at=y.y+u-B.y+A.y),y.y-at-R.y<0&&(at=y.y-R.y),(J||at)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([J,at]))}},_getAnchor:function(){return $(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ir=function(i,o){return new Se(i,o)};Ct.mergeOptions({closePopupOnClick:!0}),Ct.include({openPopup:function(i,o,u){return this._initOverlay(Se,i,o,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),He.include({bindPopup:function(i,o){return this._popup=this._initOverlay(Se,this._popup,i,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Nn||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){di(i);var o=i.layer||i.target;if(this._popup._source===o&&!(o instanceof Sn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=o,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var zi=Ee.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Ee.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Ee.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Ee.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",o=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=lt("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+z(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var o,u,h=this._map,m=this._container,y=h.latLngToContainerPoint(h.getCenter()),C=h.layerPointToContainerPoint(i),R=this.options.direction,A=m.offsetWidth,B=m.offsetHeight,J=$(this.options.offset),at=this._getAnchor();R==="top"?(o=A/2,u=B):R==="bottom"?(o=A/2,u=0):R==="center"?(o=A/2,u=B/2):R==="right"?(o=0,u=B/2):R==="left"?(o=A,u=B/2):C.x<y.x?(R="right",o=0,u=B/2):(R="left",o=A+(J.x+at.x)*2,u=B/2),i=i.subtract($(o,u,!0)).add(J).add(at),ie(m,"leaflet-tooltip-right"),ie(m,"leaflet-tooltip-left"),ie(m,"leaflet-tooltip-top"),ie(m,"leaflet-tooltip-bottom"),ct(m,"leaflet-tooltip-"+R),bt(m,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&he(this._container,i)},_animateZoom:function(i){var o=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(o)},_getAnchor:function(){return $(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),as=function(i,o){return new zi(i,o)};Ct.include({openTooltip:function(i,o,u){return this._initOverlay(zi,i,o,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),He.include({bindTooltip:function(i,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zi,this._tooltip,i,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var o=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[o](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Nn||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&(mt(o,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),mt(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var o=typeof i.getElement=="function"&&i.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var o=i.latlng,u,h;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),h=this._map.containerPointToLayerPoint(u),o=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(o)}});var rr=_i.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var o=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Fn(o),o.appendChild(u.html)):o.innerHTML=u.html!==!1?u.html:"",u.bgPos){var h=$(u.bgPos);o.style.backgroundPosition=-h.x+"px "+-h.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function Mn(i){return new rr(i)}_i.Default=De;var oi=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:it.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){_(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Gt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(q(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(st(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Y(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof T?i:new T(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var o=this.getPane().children,u=-i(-1/0,1/0),h=0,m=o.length,y;h<m;h++)y=o[h].style.zIndex,o[h]!==this._container&&y&&(u=i(u,+y));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it.ielt9){he(this._container,this.options.opacity);var i=+new Date,o=!1,u=!1;for(var h in this._tiles){var m=this._tiles[h];if(!(!m.current||!m.loaded)){var y=Math.min(1,(i-m.loaded)/200);he(m.el,y),y<1?o=!0:(m.active?u=!0:this._onOpaqueTile(m),m.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),o&&(x(this._fadeFrame),this._fadeFrame=Tt(this._updateOpacity,this))}},_onOpaqueTile:F,_initContainer:function(){this._container||(this._container=lt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,o=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=o-Math.abs(i-u),this._onUpdateLevel(u)):(Gt(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var h=this._levels[i],m=this._map;return h||(h=this._levels[i]={},h.el=lt("div","leaflet-tile-container leaflet-zoom-animated",this._container),h.el.style.zIndex=o,h.origin=m.project(m.unproject(m.getPixelOrigin()),i).round(),h.zoom=i,this._setZoomTransform(h,m.getCenter(),m.getZoom()),F(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:F,_onRemoveLevel:F,_onCreateLevel:F,_pruneTiles:function(){if(this._map){var i,o,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)o=this._tiles[i],o.retain=o.current;for(i in this._tiles)if(o=this._tiles[i],o.current&&!o.active){var h=o.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var o in this._tiles)this._tiles[o].coords.z===i&&this._removeTile(o)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Gt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,o,u,h){var m=Math.floor(i/2),y=Math.floor(o/2),C=u-1,R=new T(+m,+y);R.z=+C;var A=this._tileCoordsToKey(R),B=this._tiles[A];return B&&B.active?(B.retain=!0,!0):(B&&B.loaded&&(B.retain=!0),C>h?this._retainParent(m,y,C,h):!1)},_retainChildren:function(i,o,u,h){for(var m=2*i;m<2*i+2;m++)for(var y=2*o;y<2*o+2;y++){var C=new T(m,y);C.z=u+1;var R=this._tileCoordsToKey(C),A=this._tiles[R];if(A&&A.active){A.retain=!0;continue}else A&&A.loaded&&(A.retain=!0);u+1<h&&this._retainChildren(m,y,u+1,h)}},_resetView:function(i){var o=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var o=this.options;return o.minNativeZoom!==void 0&&i<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<i?o.maxNativeZoom:i},_setView:function(i,o,u,h){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!h||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,o)},_setZoomTransforms:function(i,o){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,o)},_setZoomTransform:function(i,o,u){var h=this._map.getZoomScale(u,i.zoom),m=i.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(o,u)).round();it.any3d?sn(i.el,m,h):bt(i.el,m)},_resetGrid:function(){var i=this._map,o=i.options.crs,u=this._tileSize=this.getTileSize(),h=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,o.wrapLng[0]],h).x/u.x),Math.ceil(i.project([0,o.wrapLng[1]],h).x/u.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([o.wrapLat[0],0],h).y/u.x),Math.ceil(i.project([o.wrapLat[1],0],h).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var o=this._map,u=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),h=o.getZoomScale(u,this._tileZoom),m=o.project(i,this._tileZoom).floor(),y=o.getSize().divideBy(h*2);return new ut(m.subtract(y),m.add(y))},_update:function(i){var o=this._map;if(o){var u=this._clampZoom(o.getZoom());if(i===void 0&&(i=o.getCenter()),this._tileZoom!==void 0){var h=this._getTiledPixelBounds(i),m=this._pxBoundsToTileRange(h),y=m.getCenter(),C=[],R=this.options.keepBuffer,A=new ut(m.getBottomLeft().subtract([R,-R]),m.getTopRight().add([R,-R]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var B in this._tiles){var J=this._tiles[B].coords;(J.z!==this._tileZoom||!A.contains(new T(J.x,J.y)))&&(this._tiles[B].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var at=m.min.y;at<=m.max.y;at++)for(var ft=m.min.x;ft<=m.max.x;ft++){var Fe=new T(ft,at);if(Fe.z=this._tileZoom,!!this._isValidTile(Fe)){var Bt=this._tiles[this._tileCoordsToKey(Fe)];Bt?Bt.current=!0:C.push(Fe)}}if(C.sort(function(be,Be){return be.distanceTo(y)-Be.distanceTo(y)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var $t=document.createDocumentFragment();for(ft=0;ft<C.length;ft++)this._addTile(C[ft],$t);this._level.el.appendChild($t)}}}},_isValidTile:function(i){var o=this._map.options.crs;if(!o.infinite){var u=this._globalTileRange;if(!o.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!o.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(i);return At(this.options.bounds).overlaps(h)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var o=this._map,u=this.getTileSize(),h=i.scaleBy(u),m=h.add(u),y=o.unproject(h,i.z),C=o.unproject(m,i.z);return[y,C]},_tileCoordsToBounds:function(i){var o=this._tileCoordsToNwSe(i),u=new Me(o[0],o[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var o=i.split(":"),u=new T(+o[0],+o[1]);return u.z=+o[2],u},_removeTile:function(i){var o=this._tiles[i];o&&(Gt(o.el),delete this._tiles[i],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ct(i,"leaflet-tile");var o=this.getTileSize();i.style.width=o.x+"px",i.style.height=o.y+"px",i.onselectstart=F,i.onmousemove=F,it.ielt9&&this.options.opacity<1&&he(i,this.options.opacity)},_addTile:function(i,o){var u=this._getTilePos(i),h=this._tileCoordsToKey(i),m=this.createTile(this._wrapCoords(i),I(this._tileReady,this,i));this._initTile(m),this.createTile.length<2&&Tt(I(this._tileReady,this,i,null,m)),bt(m,u),this._tiles[h]={el:m,coords:i,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:i})},_tileReady:function(i,o,u){o&&this.fire("tileerror",{error:o,tile:u,coords:i});var h=this._tileCoordsToKey(i);u=this._tiles[h],u&&(u.loaded=+new Date,this._map._fadeAnimated?(he(u.el,0),x(this._fadeFrame),this._fadeFrame=Tt(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),o||(ct(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it.ielt9||!this._map._fadeAnimated?Tt(this._pruneTiles,this):setTimeout(I(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var o=new T(this._wrapX?X(i.x,this._wrapX):i.x,this._wrapY?X(i.y,this._wrapY):i.y);return o.z=i.z,o},_pxBoundsToTileRange:function(i){var o=this.getTileSize();return new ut(i.min.unscaleBy(o).floor(),i.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function ai(i){return new oi(i)}var fn=oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,o){this._url=i,o=_(this,o),o.detectRetina&&it.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,o){return this._url===i&&o===void 0&&(o=!0),this._url=i,o||this.redraw(),this},createTile:function(i,o){var u=document.createElement("img");return mt(u,"load",I(this._tileOnLoad,this,o,u)),mt(u,"error",I(this._tileOnError,this,o,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var o={r:it.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(o.y=u),o["-y"]=u}return tt(this._url,P(o,this.options))},_tileOnLoad:function(i,o){it.ielt9?setTimeout(I(i,this,null,o),0):i(null,o)},_tileOnError:function(i,o,u){var h=this.options.errorTileUrl;h&&o.getAttribute("src")!==h&&(o.src=h),i(u,o)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,o=this.options.maxZoom,u=this.options.zoomReverse,h=this.options.zoomOffset;return u&&(i=o-i),i+h},_getSubdomain:function(i){var o=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var i,o;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(o=this._tiles[i].el,o.onload=F,o.onerror=F,!o.complete)){o.src=Wt;var u=this._tiles[i].coords;Gt(o),delete this._tiles[i],this.fire("tileabort",{tile:o,coords:u})}},_removeTile:function(i){var o=this._tiles[i];if(o)return o.el.setAttribute("src",Wt),oi.prototype._removeTile.call(this,i)},_tileReady:function(i,o,u){if(!(!this._map||u&&u.getAttribute("src")===Wt))return oi.prototype._tileReady.call(this,i,o,u)}});function ui(i,o){return new fn(i,o)}var us=fn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,o){this._url=i;var u=P({},this.defaultWmsParams);for(var h in o)h in this.options||(u[h]=o[h]);o=_(this,o);var m=o.detectRetina&&it.retina?2:1,y=this.getTileSize();u.width=y.x*m,u.height=y.y*m,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,fn.prototype.onAdd.call(this,i)},getTileUrl:function(i){var o=this._tileCoordsToNwSe(i),u=this._crs,h=Ut(u.project(o[0]),u.project(o[1])),m=h.min,y=h.max,C=(this._wmsVersion>=1.3&&this._crs===Tr?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),R=fn.prototype.getTileUrl.call(this,i);return R+H(this.wmsParams,R,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(i,o){return P(this.wmsParams,i),o||this.redraw(),this}});function mo(i,o){return new us(i,o)}fn.WMS=us,ui.wms=mo;var zn=He.extend({options:{padding:.1},initialize:function(i){_(this,i),z(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,o){var u=this._map.getZoomScale(o,this._zoom),h=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=h.multiplyBy(-u).add(m).subtract(this._map._getNewPixelOrigin(i,o));it.any3d?sn(this._container,y,u):bt(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,o=this._map.getSize(),u=this._map.containerPointToLayerPoint(o.multiplyBy(-i)).round();this._bounds=new ut(u,u.add(o.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qs=zn.extend({options:{tolerance:0},getEvents:function(){var i=zn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");mt(i,"mousemove",this._onMouseMove,this),mt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){x(this._redrawRequest),delete this._ctx,Gt(this._container),xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var o in this._layers)i=this._layers[o],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var i=this._bounds,o=this._container,u=i.getSize(),h=it.retina?2:1;bt(o,i.min),o.width=h*u.x,o.height=h*u.y,o.style.width=u.x+"px",o.style.height=u.y+"px",it.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[z(i)]=i;var o=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var o=i._order,u=o.next,h=o.prev;u?u.prev=h:this._drawLast=h,h?h.next=u:this._drawFirst=u,delete i._order,delete this._layers[z(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var o=i.options.dashArray.split(/[, ]+/),u=[],h,m;for(m=0;m<o.length;m++){if(h=Number(o[m]),isNaN(h))return;u.push(h)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Tt(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var o=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ut,this._redrawBounds.extend(i._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(i._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var o=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,o=this._redrawBounds;if(this._ctx.save(),o){var u=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)i=h.layer,(!o||i._pxBounds&&i._pxBounds.intersects(o))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,o){if(this._drawing){var u,h,m,y,C=i._parts,R=C.length,A=this._ctx;if(R){for(A.beginPath(),u=0;u<R;u++){for(h=0,m=C[u].length;h<m;h++)y=C[u][h],A[h?"lineTo":"moveTo"](y.x,y.y);o&&A.closePath()}this._fillStroke(A,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var o=i._point,u=this._ctx,h=Math.max(Math.round(i._radius),1),m=(Math.max(Math.round(i._radiusY),1)||h)/h;m!==1&&(u.save(),u.scale(1,m)),u.beginPath(),u.arc(o.x,o.y/m,h,0,Math.PI*2,!1),m!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,o){var u=o.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(o.options&&o.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var o=this._map.mouseEventToLayerPoint(i),u,h,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(h=u);this._fireEvent(h?[h]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,o)}},_handleMouseOut:function(i){var o=this._hoveredLayer;o&&(ie(this._container,"leaflet-interactive"),this._fireEvent([o],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,o){if(!this._mouseHoverThrottled){for(var u,h,m=this._drawFirst;m;m=m.next)u=m.layer,u.options.interactive&&u._containsPoint(o)&&(h=u);h!==this._hoveredLayer&&(this._handleMouseOut(i),h&&(ct(this._container,"leaflet-interactive"),this._fireEvent([h],i,"mouseover"),this._hoveredLayer=h)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(I(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,o,u){this._map._fireDOMEvent(o,u||o.type,i)},_bringToFront:function(i){var o=i._order;if(o){var u=o.next,h=o.prev;if(u)u.prev=h;else return;h?h.next=u:u&&(this._drawFirst=u),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(i)}},_bringToBack:function(i){var o=i._order;if(o){var u=o.next,h=o.prev;if(h)h.next=u;else return;u?u.prev=h:h&&(this._drawLast=h),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(i)}}});function sr(i){return it.canvas?new qs(i):null}var or=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fr={_initContainer:function(){this._container=lt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var o=i._container=or("shape");ct(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",i._path=or("path"),o.appendChild(i._path),this._updateStyle(i),this._layers[z(i)]=i},_addPath:function(i){var o=i._container;this._container.appendChild(o),i.options.interactive&&i.addInteractiveTarget(o)},_removePath:function(i){var o=i._container;Gt(o),i.removeInteractiveTarget(o),delete this._layers[z(i)]},_updateStyle:function(i){var o=i._stroke,u=i._fill,h=i.options,m=i._container;m.stroked=!!h.stroke,m.filled=!!h.fill,h.stroke?(o||(o=i._stroke=or("stroke")),m.appendChild(o),o.weight=h.weight+"px",o.color=h.color,o.opacity=h.opacity,h.dashArray?o.dashStyle=Lt(h.dashArray)?h.dashArray.join(" "):h.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=h.lineCap.replace("butt","flat"),o.joinstyle=h.lineJoin):o&&(m.removeChild(o),i._stroke=null),h.fill?(u||(u=i._fill=or("fill")),m.appendChild(u),u.color=h.fillColor||h.color,u.opacity=h.fillOpacity):u&&(m.removeChild(u),i._fill=null)},_updateCircle:function(i){var o=i._point.round(),u=Math.round(i._radius),h=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+o.x+","+o.y+" "+u+","+h+" 0,"+65535*360)},_setPath:function(i,o){i._path.v=o},_bringToFront:function(i){q(i._container)},_bringToBack:function(i){st(i._container)}},Ci=it.vml?or:ci,Ni=zn.extend({_initContainer:function(){this._container=Ci("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ci("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Gt(this._container),xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var i=this._bounds,o=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,u.setAttribute("width",o.x),u.setAttribute("height",o.y)),bt(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(i){var o=i._path=Ci("path");i.options.className&&ct(o,i.options.className),i.options.interactive&&ct(o,"leaflet-interactive"),this._updateStyle(i),this._layers[z(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Gt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[z(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var o=i._path,u=i.options;o&&(u.stroke?(o.setAttribute("stroke",u.color),o.setAttribute("stroke-opacity",u.opacity),o.setAttribute("stroke-width",u.weight),o.setAttribute("stroke-linecap",u.lineCap),o.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?o.setAttribute("stroke-dasharray",u.dashArray):o.removeAttribute("stroke-dasharray"),u.dashOffset?o.setAttribute("stroke-dashoffset",u.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),u.fill?(o.setAttribute("fill",u.fillColor||u.color),o.setAttribute("fill-opacity",u.fillOpacity),o.setAttribute("fill-rule",u.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(i,o){this._setPath(i,Ms(i._parts,o))},_updateCircle:function(i){var o=i._point,u=Math.max(Math.round(i._radius),1),h=Math.max(Math.round(i._radiusY),1)||u,m="a"+u+","+h+" 0 1,0 ",y=i._empty()?"M0 0":"M"+(o.x-u)+","+o.y+m+u*2+",0 "+m+-u*2+",0 ";this._setPath(i,y)},_setPath:function(i,o){i._path.setAttribute("d",o)},_bringToFront:function(i){q(i._path)},_bringToBack:function(i){st(i._path)}});it.vml&&Ni.include(Fr);function wt(i){return it.svg||it.vml?new Ni(i):null}Ct.include({getRenderer:function(i){var o=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var o=this._paneRenderers[i];return o===void 0&&(o=this._createRenderer({pane:i}),this._paneRenderers[i]=o),o},_createRenderer:function(i){return this.options.preferCanvas&&sr(i)||wt(i)}});var ls=ii.extend({initialize:function(i,o){ii.prototype.initialize.call(this,this._boundsToLatLngs(i),o)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=At(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function hs(i,o){return new ls(i,o)}Ni.create=Ci,Ni.pointsToPath=Ms,xe.geometryToLayer=$e,xe.coordsToLatLng=Vs,xe.coordsToLatLngs=Ii,xe.latLngToCoords=bn,xe.latLngsToCoords=Pn,xe.getFeature=Tn,xe.asFeature=ri,Ct.mergeOptions({boxZoom:!0});var cs=Je.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ie(),Wn(),this._startPoint=this._map.mouseEventToContainerPoint(i),mt(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=lt("div","leaflet-zoom-box",this._container),ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var o=new ut(this._point,this._startPoint),u=o.getSize();bt(this._box,o.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Gt(this._box),ie(this._container,"leaflet-crosshair")),Xn(),jn(),xt(document,{contextmenu:di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(I(this._resetState,this),0);var o=new Me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ct.addInitHook("addHandler","boxZoom",cs),Ct.mergeOptions({doubleClickZoom:!0});var fe=Je.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var o=this._map,u=o.getZoom(),h=o.options.zoomDelta,m=i.originalEvent.shiftKey?u-h:u+h;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(i.containerPoint,m)}});Ct.addInitHook("addHandler","doubleClickZoom",fe),Ct.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ar=Je.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new Oe(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ie(this._map._container,"leaflet-grab"),ie(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=At(this._map.options.maxBounds);this._offsetLimit=Ut(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var o=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(o),this._prunePositions(o)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,o){return i-(i-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;i.x<o.min.x&&(i.x=this._viscousLimit(i.x,o.min.x)),i.y<o.min.y&&(i.y=this._viscousLimit(i.y,o.min.y)),i.x>o.max.x&&(i.x=this._viscousLimit(i.x,o.max.x)),i.y>o.max.y&&(i.y=this._viscousLimit(i.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,o=Math.round(i/2),u=this._initialWorldOffset,h=this._draggable._newPos.x,m=(h-o+u)%i+o-u,y=(h+o+u)%i-o-u,C=Math.abs(m+u)<Math.abs(y+u)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(i){var o=this._map,u=o.options,h=!u.inertia||i.noInertia||this._times.length<2;if(o.fire("dragend",i),h)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,C=u.easeLinearity,R=m.multiplyBy(C/y),A=R.distanceTo([0,0]),B=Math.min(u.inertiaMaxSpeed,A),J=R.multiplyBy(B/A),at=B/(u.inertiaDeceleration*C),ft=J.multiplyBy(-at/2).round();!ft.x&&!ft.y?o.fire("moveend"):(ft=o._limitOffset(ft,o.options.maxBounds),Tt(function(){o.panBy(ft,{duration:at,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});Ct.addInitHook("addHandler","dragging",ar),Ct.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gn=Je.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),mt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,o=document.documentElement,u=i.scrollTop||o.scrollTop,h=i.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(h,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var o=this._panKeys={},u=this.keyCodes,h,m;for(h=0,m=u.left.length;h<m;h++)o[u.left[h]]=[-1*i,0];for(h=0,m=u.right.length;h<m;h++)o[u.right[h]]=[i,0];for(h=0,m=u.down.length;h<m;h++)o[u.down[h]]=[0,i];for(h=0,m=u.up.length;h<m;h++)o[u.up[h]]=[0,-1*i]},_setZoomDelta:function(i){var o=this._zoomKeys={},u=this.keyCodes,h,m;for(h=0,m=u.zoomIn.length;h<m;h++)o[u.zoomIn[h]]=i;for(h=0,m=u.zoomOut.length;h<m;h++)o[u.zoomOut[h]]=-i},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var o=i.keyCode,u=this._map,h;if(o in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(h=this._panKeys[o],i.shiftKey&&(h=$(h).multiplyBy(3)),u.options.maxBounds&&(h=u._limitOffset($(h),u.options.maxBounds)),u.options.worldCopyJump){var m=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(h)));u.panTo(m)}else u.panBy(h)}else if(o in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;di(i)}}});Ct.addInitHook("addHandler","keyboard",gn),Ct.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ur=Je.extend({addHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){xt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var o=ss(i),u=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var h=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(I(this._performZoom,this),h),di(i)},_performZoom:function(){var i=this._map,o=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var h=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,y=u?Math.ceil(m/u)*u:m,C=i._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,C&&(i.options.scrollWheelZoom==="center"?i.setZoom(o+C):i.setZoomAround(this._lastMousePos,o+C))}});Ct.addInitHook("addHandler","scrollWheelZoom",ur);var fs=600;Ct.mergeOptions({tapHold:it.touchNative&&it.safari&&it.mobile,tapTolerance:15});var kr=Je.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var o=i.touches[0];this._startPos=this._newPos=new T(o.clientX,o.clientY),this._holdTimeout=setTimeout(I(function(){this._cancel(),this._isTapValid()&&(mt(document,"touchend",ve),mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),fs),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){xt(document,"touchend",ve),xt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),xt(document,"touchend touchcancel contextmenu",this._cancel,this),xt(document,"touchmove",this._onMove,this)},_onMove:function(i){var o=i.touches[0];this._newPos=new T(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,o){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});u._simulated=!0,o.target.dispatchEvent(u)}});Ct.addInitHook("addHandler","tapHold",kr),Ct.mergeOptions({touchZoom:it.touch,bounceAtZoomLimits:!0});var gs=Je.extend({addHooks:function(){ct(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ie(this._map._container,"leaflet-touch-zoom"),xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var o=this._map;if(!(!i.touches||i.touches.length!==2||o._animatingZoom||this._zooming)){var u=o.mouseEventToContainerPoint(i.touches[0]),h=o.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(u.add(h)._divideBy(2))),this._startDist=u.distanceTo(h),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),ve(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var o=this._map,u=o.mouseEventToContainerPoint(i.touches[0]),h=o.mouseEventToContainerPoint(i.touches[1]),m=u.distanceTo(h)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=u._add(h)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),x(this._animRequest);var C=I(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Tt(C,this,!0),ve(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,x(this._animRequest),xt(document,"touchmove",this._onTouchMove,this),xt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ct.addInitHook("addHandler","touchZoom",gs),Ct.BoxZoom=cs,Ct.DoubleClickZoom=fe,Ct.Drag=ar,Ct.Keyboard=gn,Ct.ScrollWheelZoom=ur,Ct.TapHold=kr,Ct.TouchZoom=gs,f.Bounds=ut,f.Browser=it,f.CRS=zt,f.Canvas=qs,f.Circle=se,f.CircleMarker=et,f.Class=qt,f.Control=Ue,f.DivIcon=rr,f.DivOverlay=Ee,f.DomEvent=an,f.DomUtil=gi,f.Draggable=Oe,f.Evented=vn,f.FeatureGroup=Nn,f.GeoJSON=xe,f.GridLayer=oi,f.Handler=Je,f.Icon=_i,f.ImageOverlay=ot,f.LatLng=Z,f.LatLngBounds=Me,f.Layer=He,f.LayerGroup=ni,f.LineUtil=Bs,f.Map=Ct,f.Marker=Ln,f.Mixin=Lr,f.Path=Sn,f.Point=T,f.PolyUtil=Bi,f.Polygon=ii,f.Polyline=We,f.Popup=Se,f.PosAnimation=Ki,f.Projection=zs,f.Rectangle=ls,f.Renderer=zn,f.SVG=Ni,f.SVGOverlay=si,f.TileLayer=fn,f.Tooltip=zi,f.Transformation=Zi,f.Util=W,f.VideoOverlay=Bn,f.bind=I,f.bounds=Ut,f.canvas=sr,f.circle=cn,f.circleMarker=Qe,f.control=ye,f.divIcon=Mn,f.extend=P,f.featureGroup=Rr,f.geoJSON=nr,f.geoJson=Dr,f.gridLayer=ai,f.icon=hn,f.imageOverlay=Ft,f.latLng=_t,f.latLngBounds=At,f.layerGroup=Gs,f.map=mi,f.marker=xi,f.point=$,f.polygon=Ei,f.polyline=os,f.popup=ir,f.rectangle=hs,f.setOptions=_,f.stamp=z,f.svg=wt,f.svgOverlay=Ar,f.tileLayer=ui,f.tooltip=as,f.transformation=nt,f.version=g,f.videoOverlay=Le;var Br=window.L;f.noConflict=function(){return window.L=Br,this},window.L=f})}(ko,ko.exports)),ko.exports}var lu=ba();const Xt=uu(lu);Xt.Control.Coordinates=Xt.Control.extend({options:{position:"bottomright"},onAdd:function(N){return this._container=Xt.DomUtil.create("div","leaflet-bar"),this._container.style.background="#ffffff",N.on("mousemove",this._onMouseMove,this),this._container},_onMouseMove:function(N){this._container.innerHTML='<span style="padding: 5px">'+N.latlng.lng.toFixed(3)+", "+N.latlng.lat.toFixed(3)+"</span>"}});Xt.Coordinates=function(N){return new Xt.Control.Coordinates(N)};Xt.Control.EditControl=Xt.Control.extend({options:{position:"topleft",callback:null,kind:"",html:""},onAdd:function(N){const p=Xt.DomUtil.create("div","leaflet-control leaflet-bar"),f=Xt.DomUtil.create("a","",p);return f.href="#",f.title="Create a new "+this.options.kind,f.innerHTML=this.options.html,Xt.DomEvent.on(f,"click",Xt.DomEvent.stop).on(f,"click",function(){window.LAYER=this.options.callback.call(N.editTools)},this),p}});Xt.NewPolygonControl=Xt.Control.EditControl.extend({options:{position:"topleft",kind:"polygon",html:""}});Xt.BooleanControl=Xt.Control.extend({options:{position:"topright"},onAdd:function(N){const p=this._container=Xt.DomUtil.create("div","leaflet-bar");this._container.style.background="#ffffff",this._container.style.padding="10px",p.innerHTML=["<form>",'<ul style="list-style:none; padding-left: 0">',"<li>","<label>",'<input type="radio" name="op" value="0" checked />'," Intersection","</label>","</li>","<li>","<label>",'<input type="radio" name="op" value="1" />'," Union","</label>","</li>","<li>","<label>",'<input type="radio" name="op" value="2" />'," Difference A - B","</label>","</li>","<li>","<label>",'<input type="radio" name="op" value="5" />'," Difference B - A","</label>","</li>","<li>","<label>",'<input type="radio" name="op" value="3" />'," Xor","</label>","</li>","</ul>",'<input type="submit" value="Run">','<input name="clear" type="button" value="Clear layers">',"</form>"].join("");const f=p.querySelector("form");return Xt.DomEvent.on(f,"submit",function(g){Xt.DomEvent.stop(g);const P=Array.prototype.slice.call(f.querySelectorAll("input[type=radio]"));for(let b=0,I=P.length;b<I;b++)if(P[b].checked){this.options.callback(parseInt(P[b].value));break}},this).on(f.clear,"click",function(g){Xt.DomEvent.stop(g),this.options.clear()},this),Xt.DomEvent.disableClickPropagation(this._container).disableScrollPropagation(this._container),this._container}});function hu(N,p){return N>p?1:N<p?-1:0}class ma{constructor(p=hu,f=!1){this._compare=p,this._root=null,this._size=0,this._noDuplicates=!!f}rotateLeft(p){var f=p.right;f&&(p.right=f.left,f.left&&(f.left.parent=p),f.parent=p.parent),p.parent?p===p.parent.left?p.parent.left=f:p.parent.right=f:this._root=f,f&&(f.left=p),p.parent=f}rotateRight(p){var f=p.left;f&&(p.left=f.right,f.right&&(f.right.parent=p),f.parent=p.parent),p.parent?p===p.parent.left?p.parent.left=f:p.parent.right=f:this._root=f,f&&(f.right=p),p.parent=f}_splay(p){for(;p.parent;){var f=p.parent;f.parent?f.left===p&&f.parent.left===f?(this.rotateRight(f.parent),this.rotateRight(f)):f.right===p&&f.parent.right===f?(this.rotateLeft(f.parent),this.rotateLeft(f)):f.left===p&&f.parent.right===f?(this.rotateRight(f),this.rotateLeft(f)):(this.rotateLeft(f),this.rotateRight(f)):f.left===p?this.rotateRight(f):this.rotateLeft(f)}}splay(p){for(var f,g,P,b,I;p.parent;)f=p.parent,g=f.parent,g&&g.parent?(P=g.parent,P.left===g?P.left=p:P.right=p,p.parent=P):(p.parent=null,this._root=p),b=p.left,I=p.right,p===f.left?(g&&(g.left===f?(f.right?(g.left=f.right,g.left.parent=g):g.left=null,f.right=g,g.parent=f):(b?(g.right=b,b.parent=g):g.right=null,p.left=g,g.parent=p)),I?(f.left=I,I.parent=f):f.left=null,p.right=f,f.parent=p):(g&&(g.right===f?(f.left?(g.right=f.left,g.right.parent=g):g.right=null,f.left=g,g.parent=f):(I?(g.left=I,I.parent=g):g.left=null,p.right=g,g.parent=p)),b?(f.right=b,b.parent=f):f.right=null,p.left=f,f.parent=p)}replace(p,f){p.parent?p===p.parent.left?p.parent.left=f:p.parent.right=f:this._root=f,f&&(f.parent=p.parent)}minNode(p=this._root){if(p)for(;p.left;)p=p.left;return p}maxNode(p=this._root){if(p)for(;p.right;)p=p.right;return p}insert(p,f){var g=this._root,P=null,b=this._compare,I;if(this._noDuplicates)for(;g;){if(P=g,I=b(g.key,p),I===0)return;b(g.key,p)<0?g=g.right:g=g.left}else for(;g;)P=g,b(g.key,p)<0?g=g.right:g=g.left;return g={key:p,data:f,left:null,right:null,parent:P},P?b(P.key,g.key)<0?P.right=g:P.left=g:this._root=g,this.splay(g),this._size++,g}find(p){for(var f=this._root,g=this._compare;f;){var P=g(f.key,p);if(P<0)f=f.right;else if(P>0)f=f.left;else return f}return null}contains(p){for(var f=this._root,g=this._compare;f;){var P=g(p,f.key);if(P===0)return!0;P<0?f=f.left:f=f.right}return!1}remove(p){var f=this.find(p);if(!f)return!1;if(this.splay(f),!f.left)this.replace(f,f.right);else if(!f.right)this.replace(f,f.left);else{var g=this.minNode(f.right);g.parent!==f&&(this.replace(g,g.right),g.right=f.right,g.right.parent=g),this.replace(f,g),g.left=f.left,g.left.parent=g}return this._size--,!0}removeNode(p){if(!p)return!1;if(this.splay(p),!p.left)this.replace(p,p.right);else if(!p.right)this.replace(p,p.left);else{var f=this.minNode(p.right);f.parent!==p&&(this.replace(f,f.right),f.right=p.right,f.right.parent=f),this.replace(p,f),f.left=p.left,f.left.parent=f}return this._size--,!0}erase(p){var f=this.find(p);if(f){this.splay(f);var g=f.left,P=f.right,b=null;g&&(g.parent=null,b=this.maxNode(g),this.splay(b),this._root=b),P&&(g?b.right=P:this._root=P,P.parent=b),this._size--}}pop(){var p=this._root,f=null;if(p){for(;p.left;)p=p.left;f={key:p.key,data:p.data},this.remove(p.key)}return f}next(p){var f=p;if(f)if(f.right)for(f=f.right;f&&f.left;)f=f.left;else for(f=p.parent;f&&f.right===p;)p=f,f=f.parent;return f}prev(p){var f=p;if(f)if(f.left)for(f=f.left;f&&f.right;)f=f.right;else for(f=p.parent;f&&f.left===p;)p=f,f=f.parent;return f}forEach(p){for(var f=this._root,g=[],P=!1,b=0;!P;)f?(g.push(f),f=f.left):g.length>0?(f=g.pop(),p(f,b++),f=f.right):P=!0;return this}range(p,f,g,P){const b=[],I=this._compare;let k=this._root,z;for(;b.length!==0||k;)if(k)b.push(k),k=k.left;else{if(k=b.pop(),z=I(k.key,f),z>0)break;if(I(k.key,p)>=0&&g.call(P,k))return this;k=k.right}return this}keys(){for(var p=this._root,f=[],g=[],P=!1;!P;)p?(f.push(p),p=p.left):f.length>0?(p=f.pop(),g.push(p.key),p=p.right):P=!0;return g}values(){for(var p=this._root,f=[],g=[],P=!1;!P;)p?(f.push(p),p=p.left):f.length>0?(p=f.pop(),g.push(p.data),p=p.right):P=!0;return g}at(p){for(var f=this._root,g=[],P=!1,b=0;!P;)if(f)g.push(f),f=f.left;else if(g.length>0){if(f=g.pop(),b===p)return f;b++,f=f.right}else P=!0;return null}load(p=[],f=[],g=!1){if(this._size!==0)throw new Error("bulk-load: tree is not empty");const P=p.length;return g&&ca(p,f,0,P-1,this._compare),this._root=ha(null,p,f,0,P),this._size=P,this}min(){var p=this.minNode(this._root);return p?p.key:null}max(){var p=this.maxNode(this._root);return p?p.key:null}isEmpty(){return this._root===null}get size(){return this._size}static createTree(p,f,g,P,b){return new ma(g,b).load(p,f,P)}}function ha(N,p,f,g,P){const b=P-g;if(b>0){const I=g+Math.floor(b/2),k=p[I],z=f[I],Y={key:k,data:z,parent:N};return Y.left=ha(Y,p,f,g,I),Y.right=ha(Y,p,f,I+1,P),Y}return null}function ca(N,p,f,g,P){if(f>=g)return;const b=N[f+g>>1];let I=f-1,k=g+1;for(;;){do I++;while(P(N[I],b)<0);do k--;while(P(N[k],b)>0);if(I>=k)break;let z=N[I];N[I]=N[k],N[k]=z,z=p[I],p[I]=p[k],p[k]=z}ca(N,p,f,k,P),ca(N,p,k+1,g,P)}const Pa=0,Ta=1,Ma=2,Ra=3,Wr=0,bs=1,vr=2,so=3;function io(N,p,f){p===null?(N.inOut=!1,N.otherInOut=!0):(N.isSubject===p.isSubject?(N.inOut=!p.inOut,N.otherInOut=p.otherInOut):(N.inOut=!p.otherInOut,N.otherInOut=p.isVertical()?!p.inOut:p.inOut),p&&(N.prevInResult=!ya(p,f)||p.isVertical()?p.prevInResult:p)),ya(N,f)?N.resultTransition=cu(N,f):N.resultTransition=0}function ya(N,p){switch(N.type){case Pa:switch(p){case Wr:return!N.otherInOut;case bs:return N.otherInOut;case vr:return N.isSubject&&N.otherInOut||!N.isSubject&&!N.otherInOut;case so:return!0}break;case Ma:return p===Wr||p===bs;case Ra:return p===vr;case Ta:return!1}return!1}function cu(N,p){let f=!N.inOut,g=!N.otherInOut,P;switch(p){case Wr:P=f&&g;break;case bs:P=f||g;break;case so:P=f!==g;break;case vr:N.isSubject?P=f&&!g:P=g&&!f;break}return P?1:-1}class Ps{constructor(p,f,g,P,b){this.left=f,this.point=p,this.otherEvent=g,this.isSubject=P??!1,this.type=b||Pa,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}isBelow(p){const f=this.point,g=this.otherEvent.point;return this.left?(f[0]-p[0])*(g[1]-p[1])-(g[0]-p[0])*(f[1]-p[1])>0:(g[0]-p[0])*(f[1]-p[1])-(f[0]-p[0])*(g[1]-p[1])>0}isAbove(p){return!this.isBelow(p)}isVertical(){return this.point[0]===this.otherEvent.point[0]}get inResult(){return this.resultTransition!==0}clone(){const p=new Ps(this.point,this.left,this.otherEvent,this.isSubject,this.type);return p.contourId=this.contourId,p.resultTransition=this.resultTransition,p.prevInResult=this.prevInResult,p.isExteriorRing=this.isExteriorRing,p.inOut=this.inOut,p.otherInOut=this.otherInOut,p}}function Ti(N,p){return N[0]===p[0]?N[1]===p[1]:!1}const qi=11102230246251565e-32,je=134217729,fu=(3+8*qi)*qi;function aa(N,p,f,g,P){let b,I,k,z,Y=p[0],X=g[0],F=0,c=0;X>Y==X>-Y?(b=Y,Y=p[++F]):(b=X,X=g[++c]);let E=0;if(F<N&&c<f)for(X>Y==X>-Y?(I=Y+b,k=b-(I-Y),Y=p[++F]):(I=X+b,k=b-(I-X),X=g[++c]),b=I,k!==0&&(P[E++]=k);F<N&&c<f;)X>Y==X>-Y?(I=b+Y,z=I-b,k=b-(I-z)+(Y-z),Y=p[++F]):(I=b+X,z=I-b,k=b-(I-z)+(X-z),X=g[++c]),b=I,k!==0&&(P[E++]=k);for(;F<N;)I=b+Y,z=I-b,k=b-(I-z)+(Y-z),Y=p[++F],b=I,k!==0&&(P[E++]=k);for(;c<f;)I=b+X,z=I-b,k=b-(I-z)+(X-z),X=g[++c],b=I,k!==0&&(P[E++]=k);return(b!==0||E===0)&&(P[E++]=b),E}function gu(N,p){let f=p[0];for(let g=1;g<N;g++)f+=p[g];return f}function oo(N){return new Float64Array(N)}const du=(3+16*qi)*qi,mu=(2+12*qi)*qi,pu=(9+64*qi)*qi*qi,Ss=oo(4),_a=oo(8),xa=oo(12),Ea=oo(16),en=oo(4);function vu(N,p,f,g,P,b,I){let k,z,Y,X,F,c,E,S,_,H,j,tt,Lt,pt,Wt,ee,M,yt;const Q=N-P,Pe=f-P,Tt=p-b,x=g-b;pt=Q*x,c=je*Q,E=c-(c-Q),S=Q-E,c=je*x,_=c-(c-x),H=x-_,Wt=S*H-(pt-E*_-S*_-E*H),ee=Tt*Pe,c=je*Tt,E=c-(c-Tt),S=Tt-E,c=je*Pe,_=c-(c-Pe),H=Pe-_,M=S*H-(ee-E*_-S*_-E*H),j=Wt-M,F=Wt-j,Ss[0]=Wt-(j+F)+(F-M),tt=pt+j,F=tt-pt,Lt=pt-(tt-F)+(j-F),j=Lt-ee,F=Lt-j,Ss[1]=Lt-(j+F)+(F-ee),yt=tt+j,F=yt-tt,Ss[2]=tt-(yt-F)+(j-F),Ss[3]=yt;let W=gu(4,Ss),qt=mu*I;if(W>=qt||-W>=qt||(F=N-Q,k=N-(Q+F)+(F-P),F=f-Pe,Y=f-(Pe+F)+(F-P),F=p-Tt,z=p-(Tt+F)+(F-b),F=g-x,X=g-(x+F)+(F-b),k===0&&z===0&&Y===0&&X===0)||(qt=pu*I+fu*Math.abs(W),W+=Q*X+x*k-(Tt*Y+Pe*z),W>=qt||-W>=qt))return W;pt=k*x,c=je*k,E=c-(c-k),S=k-E,c=je*x,_=c-(c-x),H=x-_,Wt=S*H-(pt-E*_-S*_-E*H),ee=z*Pe,c=je*z,E=c-(c-z),S=z-E,c=je*Pe,_=c-(c-Pe),H=Pe-_,M=S*H-(ee-E*_-S*_-E*H),j=Wt-M,F=Wt-j,en[0]=Wt-(j+F)+(F-M),tt=pt+j,F=tt-pt,Lt=pt-(tt-F)+(j-F),j=Lt-ee,F=Lt-j,en[1]=Lt-(j+F)+(F-ee),yt=tt+j,F=yt-tt,en[2]=tt-(yt-F)+(j-F),en[3]=yt;const Ge=aa(4,Ss,4,en,_a);pt=Q*X,c=je*Q,E=c-(c-Q),S=Q-E,c=je*X,_=c-(c-X),H=X-_,Wt=S*H-(pt-E*_-S*_-E*H),ee=Tt*Y,c=je*Tt,E=c-(c-Tt),S=Tt-E,c=je*Y,_=c-(c-Y),H=Y-_,M=S*H-(ee-E*_-S*_-E*H),j=Wt-M,F=Wt-j,en[0]=Wt-(j+F)+(F-M),tt=pt+j,F=tt-pt,Lt=pt-(tt-F)+(j-F),j=Lt-ee,F=Lt-j,en[1]=Lt-(j+F)+(F-ee),yt=tt+j,F=yt-tt,en[2]=tt-(yt-F)+(j-F),en[3]=yt;const jt=aa(Ge,_a,4,en,xa);pt=k*X,c=je*k,E=c-(c-k),S=k-E,c=je*X,_=c-(c-X),H=X-_,Wt=S*H-(pt-E*_-S*_-E*H),ee=z*Y,c=je*z,E=c-(c-z),S=z-E,c=je*Y,_=c-(c-Y),H=Y-_,M=S*H-(ee-E*_-S*_-E*H),j=Wt-M,F=Wt-j,en[0]=Wt-(j+F)+(F-M),tt=pt+j,F=tt-pt,Lt=pt-(tt-F)+(j-F),j=Lt-ee,F=Lt-j,en[1]=Lt-(j+F)+(F-ee),yt=tt+j,F=yt-tt,en[2]=tt-(yt-F)+(j-F),en[3]=yt;const vn=aa(jt,xa,4,en,Ea);return Ea[vn-1]}function yu(N,p,f,g,P,b){const I=(p-b)*(f-P),k=(N-P)*(g-b),z=I-k;if(I===0||k===0||I>0!=k>0)return z;const Y=Math.abs(I+k);return Math.abs(z)>=du*Y?z:-vu(N,p,f,g,P,b,Y)}function fa(N,p,f){const g=yu(N[0],N[1],p[0],p[1],f[0],f[1]);return g>0?-1:g<0?1:0}function yr(N,p){const f=N.point,g=p.point;return f[0]>g[0]?1:f[0]<g[0]?-1:f[1]!==g[1]?f[1]>g[1]?1:-1:_u(N,p,f)}function _u(N,p,f,g){return N.left!==p.left?N.left?1:-1:fa(f,N.otherEvent.point,p.otherEvent.point)!==0?N.isBelow(p.otherEvent.point)?-1:1:!N.isSubject&&p.isSubject?1:-1}function pr(N,p,f){const g=new Ps(p,!1,N,N.isSubject),P=new Ps(p,!0,N.otherEvent,N.isSubject);return Ti(N.point,N.otherEvent.point)&&console.warn("what is that, a collapsed segment?",N),g.contourId=P.contourId=N.contourId,yr(P,N.otherEvent)>0&&(N.otherEvent.left=!0,P.left=!1),N.otherEvent.otherEvent=P,N.otherEvent=g,f.push(P),f.push(g),f}function Bo(N,p){return N[0]*p[1]-N[1]*p[0]}function ua(N,p){return N[0]*p[0]+N[1]*p[1]}function xu(N,p,f,g,P){const b=[p[0]-N[0],p[1]-N[1]],I=[g[0]-f[0],g[1]-f[1]];function k(H,j,tt){return[H[0]+j*tt[0],H[1]+j*tt[1]]}const z=[f[0]-N[0],f[1]-N[1]];let Y=Bo(b,I),X=Y*Y;const F=ua(b,b);if(X>0){const H=Bo(z,I)/Y;if(H<0||H>1)return null;const j=Bo(z,b)/Y;return j<0||j>1?null:H===0||H===1?[k(N,H,b)]:j===0||j===1?[k(f,j,I)]:[k(N,H,b)]}if(Y=Bo(z,b),X=Y*Y,X>0)return null;const c=ua(b,z)/F,E=c+ua(b,I)/F,S=Math.min(c,E),_=Math.max(c,E);return S<=1&&_>=0?S===1?[k(N,S>0?S:0,b)]:_===0?[k(N,_<1?_:1,b)]:[k(N,S>0?S:0,b),k(N,_<1?_:1,b)]:null}function la(N,p,f){const g=xu(N.point,N.otherEvent.point,p.point,p.otherEvent.point),P=g?g.length:0;if(P===0||P===1&&(Ti(N.point,p.point)||Ti(N.otherEvent.point,p.otherEvent.point))||P===2&&N.isSubject===p.isSubject)return 0;if(P===1)return!Ti(N.point,g[0])&&!Ti(N.otherEvent.point,g[0])&&pr(N,g[0],f),!Ti(p.point,g[0])&&!Ti(p.otherEvent.point,g[0])&&pr(p,g[0],f),1;const b=[];let I=!1,k=!1;return Ti(N.point,p.point)?I=!0:yr(N,p)===1?b.push(p,N):b.push(N,p),Ti(N.otherEvent.point,p.otherEvent.point)?k=!0:yr(N.otherEvent,p.otherEvent)===1?b.push(p.otherEvent,N.otherEvent):b.push(N.otherEvent,p.otherEvent),I&&k||I?(p.type=Ta,N.type=p.inOut===N.inOut?Ma:Ra,I&&!k&&pr(b[1].otherEvent,b[0].point,f),2):k?(pr(b[0],b[1].point,f),3):b[0]!==b[3].otherEvent?(pr(b[0],b[1].point,f),pr(b[1],b[2].point,f),3):(pr(b[0],b[1].point,f),pr(b[3].otherEvent,b[2].point,f),3)}function Eu(N,p){if(N===p)return 0;if(fa(N.point,N.otherEvent.point,p.point)!==0||fa(N.point,N.otherEvent.point,p.otherEvent.point)!==0)return Ti(N.point,p.point)?N.isBelow(p.otherEvent.point)?-1:1:N.point[0]===p.point[0]?N.point[1]<p.point[1]?-1:1:yr(N,p)===1?p.isAbove(N.point)?-1:1:N.isBelow(p.point)?-1:1;if(N.isSubject===p.isSubject){let f=N.point,g=p.point;if(f[0]===g[0]&&f[1]===g[1])return f=N.otherEvent.point,g=p.otherEvent.point,f[0]===g[0]&&f[1]===g[1]?0:(N.contourId??0)>(p.contourId??0)?1:-1}else return N.isSubject?-1:1;return yr(N,p)===1?1:-1}function wu(N,p,f,g,P,b){const I=new ma(Eu),k=[],z=Math.min(g[2],P[2]);let Y,X,F;for(;N.length!==0;){let c=N.pop();if(k.push(c),b===Wr&&c.point[0]>z||b===vr&&c.point[0]>g[2])break;if(c.left){X=Y=I.insert(c),F=I.minNode(),Y!==F?Y=I.prev(Y):Y=null,X=I.next(X);const E=Y?Y.key:null;let S;if(io(c,E,b),X&&la(c,X.key,N)===2&&(io(c,E,b),io(X.key,c,b)),Y&&la(Y.key,c,N)===2){let _=Y;_!==F?_=I.prev(_):_=null,S=_?_.key:null,io(E,S,b),io(c,E,b)}}else c=c.otherEvent,X=Y=I.find(c),Y&&X&&(Y!==F?Y=I.prev(Y):Y=null,X=I.next(X),I.remove(c),X&&Y&&la(Y.key,X.key,N))}return k}class Iu{constructor(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}isExterior(){return this.holeOf==null}}function Cu(N){let p,f,g,P,b;const I=[];for(f=0,g=N.length;f<g;f++)p=N[f],(p.left&&p.inResult||!p.left&&p.otherEvent.inResult)&&I.push(p);let k=!1;for(;!k;)for(k=!0,f=0,g=I.length;f<g;f++)f+1<g&&yr(I[f],I[f+1])===1&&(P=I[f],I[f]=I[f+1],I[f+1]=P,k=!1);for(f=0,g=I.length;f<g;f++)p=I[f],p.otherPos=f;for(f=0,g=I.length;f<g;f++)p=I[f],p.left||(b=p.otherPos,p.otherPos=p.otherEvent.otherPos,p.otherEvent.otherPos=b);return I}function Nu(N,p,f,g){let P=N+1,b=p[N].point,I;const k=p.length;for(P<k&&(I=p[P].point);P<k&&I[0]===b[0]&&I[1]===b[1];){if(f[P])P++;else return P;P<k&&(I=p[P].point)}for(P=N-1;f[P]&&P>g;)P--;return P}function Lu(N,p,f){const g=new Iu;if(N.prevInResult!=null){const P=N.prevInResult,b=P.outputContourId;if(P.resultTransition>0){const k=p[b];if(k.holeOf!=null){const z=k.holeOf;p[z].holeIds.push(f),g.holeOf=z,g.depth=p[b].depth}else p[b].holeIds.push(f),g.holeOf=b,g.depth=p[b].depth+1}else g.holeOf=null,g.depth=p[b].depth}else g.holeOf=null,g.depth=0;return g}function Su(N){let p,f;const g=Cu(N),P={},b=[];for(p=0,f=g.length;p<f;p++){if(P[p])continue;const I=b.length,k=Lu(g[p],b,I),z=c=>{P[c]=!0,c<g.length&&g[c]&&(g[c].outputContourId=I)};let Y=p,X=p;const F=g[p].point;for(k.points.push(F);z(Y),Y=g[Y].otherPos,z(Y),k.points.push(g[Y].point),Y=Nu(Y,g,P,X),!(Y==X||Y>=g.length||!g[Y]););b.push(k)}return b}class bu{constructor(p=[],f=(g,P)=>g<P?-1:g>P?1:0){if(this.data=p,this.length=this.data.length,this.compare=f,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(p){this.data.push(p),this._up(this.length++)}pop(){if(this.length===0)return;const p=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),p}peek(){return this.data[0]}_up(p){const{data:f,compare:g}=this,P=f[p];for(;p>0;){const b=p-1>>1,I=f[b];if(g(P,I)>=0)break;f[p]=I,p=b}f[p]=P}_down(p){const{data:f,compare:g}=this,P=this.length>>1,b=f[p];for(;p<P;){let I=(p<<1)+1;const k=I+1;if(k<this.length&&g(f[k],f[I])<0&&(I=k),g(f[I],b)>=0)break;f[p]=f[I],p=I}f[p]=b}}const wa=Math.max,Ia=Math.min;let zo=0;function Ca(N,p,f,g,P,b){let I,k,z,Y,X,F;for(I=0,k=N.length-1;I<k;I++){if(z=N[I],Y=N[I+1],X=new Ps(z,!1,void 0,p),F=new Ps(Y,!1,X,p),X.otherEvent=F,z[0]===Y[0]&&z[1]===Y[1])continue;X.contourId=F.contourId=f,b||(X.isExteriorRing=!1,F.isExteriorRing=!1),yr(X,F)>0?F.left=!0:X.left=!0;const c=z[0],E=z[1];P[0]=Ia(P[0],c),P[1]=Ia(P[1],E),P[2]=wa(P[2],c),P[3]=wa(P[3],E),g.push(X),g.push(F)}}function Pu(N,p,f,g,P){const b=new bu(void 0,yr);let I,k,z,Y,X,F;for(z=0,Y=N.length;z<Y;z++)for(I=N[z],X=0,F=I.length;X<F;X++)k=X===0,k&&zo++,Ca(I[X],!0,zo,b,f,k);for(z=0,Y=p.length;z<Y;z++)for(I=p[z],X=0,F=I.length;X<F;X++)k=X===0,P===vr&&(k=!1),k&&zo++,Ca(I[X],!1,zo,b,g,k);return b}const Go=[];function Tu(N,p,f){let g=null;return N.length*p.length===0&&(f===Wr?g=Go:f===vr?g=N:(f===bs||f===so)&&(g=N.length===0?p:N)),g}function Mu(N,p,f,g,P){let b=null;return(f[0]>g[2]||g[0]>f[2]||f[1]>g[3]||g[1]>f[3])&&(P===Wr?b=Go:P===vr?b=N:(P===bs||P===so)&&(b=N.concat(p))),b}function qo(N,p,f){let g=N,P=p;typeof N[0][0][0]=="number"&&(g=[N]),typeof p[0][0][0]=="number"&&(P=[p]);let b=Tu(g,P,f);if(b)return b===Go?null:b;const I=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],z=Pu(g,P,I,k,f);if(b=Mu(g,P,I,k,f),b)return b===Go?null:b;const Y=wu(z,g,P,I,k,f),X=Su(Y),F=[];for(let c=0;c<X.length;c++){let E=X[c];if(E.isExterior()){let S=[E.points];for(let _=0;_<E.holeIds.length;_++){let H=E.holeIds[_];S.push(X[H].points)}F.push(S)}}return F}function Ru(N,p){return qo(N,p,bs)}function Na(N,p){return qo(N,p,vr)}function Ou(N,p){return qo(N,p,so)}function Du(N,p){return qo(N,p,Wr)}var Au={exports:{}};(function(N,p){((f,g)=>{N.exports=f(ba()),typeof g<"u"&&g.L&&f(g.L)})(f=>{f.Editable=f.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:f.Polygon,polylineClass:f.Polyline,markerClass:f.Marker,circleMarkerClass:f.CircleMarker,rectangleClass:f.Rectangle,circleClass:f.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:void 0,featuresLayer:void 0,polylineEditorClass:void 0,polygonEditorClass:void 0,markerEditorClass:void 0,circleMarkerEditorClass:void 0,rectangleEditorClass:void 0,circleEditorClass:void 0,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(c,E){f.setOptions(this,E),this._lastZIndex=this.options.zIndex,this.map=c,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(c,E){E=E||{},E.editTools=this,this.fire(c,E),this.map.fire(c,E)},createLineGuide:function(){const c=f.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return f.polyline([],c)},createVertexIcon:c=>f.Browser.mobile&&f.Browser.touch?new f.Editable.TouchVertexIcon(c):new f.Editable.VertexIcon(c),createEditLayer:function(){return this.options.editLayer||new f.LayerGroup().addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||new f.LayerGroup().addTo(this.map)},moveForwardLineGuide:function(c){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=c,this.forwardLineGuide._bounds.extend(c),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(c){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=c,this.backwardLineGuide._bounds.extend(c),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(c){this.forwardLineGuide._latlngs[0]=c,this.forwardLineGuide._bounds.extend(c),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(c){this.backwardLineGuide._latlngs[0]=c,this.backwardLineGuide._bounds.extend(c),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=f.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(c){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),c.reset(),this._drawingEditor=c,this.map.on("mousemove touchmove",c.onDrawingMouseMove,c),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),f.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(c){this.unblockEvents(),f.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,c=c||this._drawingEditor,c&&(this.map.off("mousemove touchmove",c.onDrawingMouseMove,c),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),c===this._drawingEditor&&(delete this._drawingEditor,c._drawing&&c.cancelDrawing()))},onMousedown:function(c){c.originalEvent.which==1&&(this._mouseDown=c,this._drawingEditor.onDrawingMouseDown(c))},onMouseup:function(c){if(this._mouseDown){const E=this._drawingEditor,S=this._mouseDown;if(this._mouseDown=null,E.onDrawingMouseUp(c),this._drawingEditor!==E)return;const _=f.point(S.originalEvent.clientX,S.originalEvent.clientY),H=f.point(c.originalEvent.clientX,c.originalEvent.clientY).distanceTo(_);Math.abs(H)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(c)}},drawing:function(){var c;return(c=this._drawingEditor)==null?void 0:c.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(c){this._drawingEditor&&this._drawingEditor.commitDrawing(c)},connectCreatedToMap:function(c){return this.featuresLayer.addLayer(c)},startPolyline:function(c,E){const S=this.createPolyline([],E);return S.enableEdit(this.map).newShape(c),S},startPolygon:function(c,E){const S=this.createPolygon([],E);return S.enableEdit(this.map).newShape(c),S},startMarker:function(c,E){c=c||this.map.getCenter().clone();const S=this.createMarker(c,E);return S.enableEdit(this.map).startDrawing(),S},startCircleMarker:function(c,E){c=c||this.map.getCenter().clone();const S=this.createCircleMarker(c,E);return S.enableEdit(this.map).startDrawing(),S},startRectangle:function(c,E){const S=c||f.latLng([0,0]),_=new f.LatLngBounds(S,S),H=this.createRectangle(_,E);return H.enableEdit(this.map).startDrawing(),H},startCircle:function(c,E){c=c||this.map.getCenter().clone();const S=this.createCircle(c,E);return S.enableEdit(this.map).startDrawing(),S},startHole:(c,E)=>{c.newHole(E)},createLayer:function(c,E,S){S=f.Util.extend({editOptions:{editTools:this}},S);const _=new c(E,S);return this.fireAndForward("editable:created",{layer:_}),_},createPolyline:function(c,E){return this.createLayer((E==null?void 0:E.polylineClass)||this.options.polylineClass,c,E)},createPolygon:function(c,E){return this.createLayer((E==null?void 0:E.polygonClass)||this.options.polygonClass,c,E)},createMarker:function(c,E){return this.createLayer((E==null?void 0:E.markerClass)||this.options.markerClass,c,E)},createCircleMarker:function(c,E){return this.createLayer((E==null?void 0:E.circleMarkerClass)||this.options.circleMarkerClass,c,E)},createRectangle:function(c,E){return this.createLayer((E==null?void 0:E.rectangleClass)||this.options.rectangleClass,c,E)},createCircle:function(c,E){return this.createLayer((E==null?void 0:E.circleClass)||this.options.circleClass,c,E)}}),f.extend(f.Editable,{makeCancellable:c=>{c.cancel=()=>{c._cancelled=!0}}}),f.Map.mergeOptions({editToolsClass:f.Editable,editable:!1,editOptions:{}}),f.Map.addInitHook(function(){this.whenReady(function(){this.options.editable&&(this.editTools=new this.options.editToolsClass(this,this.options.editOptions))})}),f.Editable.VertexIcon=f.DivIcon.extend({options:{iconSize:new f.Point(8,8)}}),f.Editable.TouchVertexIcon=f.Editable.VertexIcon.extend({options:{iconSize:new f.Point(20,20)}}),f.Editable.VertexMarker=f.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(c,E,S,_){this.latlng=c,this.latlngs=E,this.editor=S,f.Marker.prototype.initialize.call(this,c,_),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.connect(),this.setZIndexOffset(S.tools._lastZIndex+1)},connect:function(){this.editor.editLayer.addLayer(this)},onAdd:function(c){f.Marker.prototype.onAdd.call(this,c),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut),this.addMiddleMarkers()},onRemove:function(c){this.middleMarker&&this.middleMarker.delete(),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),this.off("mouseover",this.onMouseOver),this.off("mouseout",this.onMouseOut),f.Marker.prototype.onRemove.call(this,c)},onDrag:function(c){c.vertex=this,this.editor.onVertexMarkerDrag(c);const E=f.DomUtil.getPosition(this._icon),S=this._map.layerPointToLatLng(E);this.latlng.update(S),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();const _=this.getNext();_!=null&&_.middleMarker&&_.middleMarker.updateLatLng()},onDragStart:function(c){c.vertex=this,this.editor.onVertexMarkerDragStart(c)},onDragEnd:function(c){c.vertex=this,this.editor.onVertexMarkerDragEnd(c)},onClick:function(c){c.vertex=this,this.editor.onVertexMarkerClick(c)},onMouseup:function(c){f.DomEvent.stop(c),c.vertex=this,this.editor.map.fire("mouseup",c)},onContextMenu:function(c){c.vertex=this,this.editor.onVertexMarkerContextMenu(c)},onMouseDown:function(c){c.vertex=this,this.editor.onVertexMarkerMouseDown(c)},onMouseOver:function(c){c.vertex=this,this.editor.onVertexMarkerMouseOver(c)},onMouseOut:function(c){c.vertex=this,this.editor.onVertexMarkerMouseOut(c)},delete:function(){const c=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),c&&c.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(this.latlngs.length<2)return;const c=this.getIndex();let E=c-1;c===0&&this.editor.CLOSED&&(E=this.getLastIndex());const S=this.latlngs[E];if(S)return S.__vertex},getNext:function(){if(this.latlngs.length<2)return;const c=this.getIndex();let E=c+1;c===this.getLastIndex()&&this.editor.CLOSED&&(E=0);const S=this.latlngs[E];if(S)return S.__vertex},addMiddleMarker:function(c){this.editor.hasMiddleMarkers()&&(c=c||this.getPrevious(),c&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(c,this,this.latlngs,this.editor)))},addMiddleMarkers:function(){if(!this.editor.hasMiddleMarkers())return;const c=this.getPrevious();c&&this.addMiddleMarker(c);const E=this.getNext();E&&E.resetMiddleMarker()},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker.delete(),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},continue:function(){if(!this.editor.continueBackward)return;const c=this.getIndex();c===0?this.editor.continueBackward(this.latlngs):c===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}),f.Editable.mergeOptions({vertexMarkerClass:f.Editable.VertexMarker}),f.Editable.MiddleMarker=f.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(c,E,S,_,H){this.left=c,this.right=E,this.editor=_,this.latlngs=S,f.Marker.prototype.initialize.call(this,this.computeLatLng(),H),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){const c=this._map.latLngToContainerPoint(this.left.latlng),E=this._map.latLngToContainerPoint(this.right.latlng),S=f.point(this.options.icon.options.iconSize);c.distanceTo(E)<S.x*3?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){const c=this.editor.map.latLngToContainerPoint(this.left.latlng),E=this.editor.map.latLngToContainerPoint(this.right.latlng),S=(c.y+E.y)/2,_=(c.x+E.x)/2;return this.editor.map.containerPointToLatLng([_,S])},onAdd:function(c){f.Marker.prototype.onAdd.call(this,c),f.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),c.on("zoomend",this.setVisibility,this)},onRemove:function(c){delete this.right.middleMarker,f.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),c.off("zoomend",this.setVisibility,this),f.Marker.prototype.onRemove.call(this,c)},onMouseDown:function(c){const E=f.DomUtil.getPosition(this._icon),S=this.editor.map.layerPointToLatLng(E);if(c={originalEvent:c,latlng:S},this.options.opacity===0||(f.Editable.makeCancellable(c),this.editor.onMiddleMarkerMouseDown(c),c._cancelled))return;this.latlngs.splice(this.index(),0,c.latlng),this.editor.refresh();const _=this._icon,H=this.editor.addVertexMarker(c.latlng,this.latlngs);this.editor.onNewVertex(H);const j=H._icon.parentNode;j.removeChild(H._icon),H._icon=_,j.appendChild(H._icon),H._initIcon(),H._initInteraction(),H.setOpacity(1),f.Draggable._dragging=!1,H.dragging._draggable._onDown(c.originalEvent),this.delete()},delete:function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),f.Editable.mergeOptions({middleMarkerClass:f.Editable.MiddleMarker}),f.Editable.BaseEditor=f.Handler.extend({initialize:function(c,E,S){f.setOptions(this,S),this.map=c,this.feature=E,this.feature.editor=this,this.editLayer=new f.LayerGroup,this.tools=this.options.editTools||c.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:()=>{},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.options.draggable!=!1&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(c,E){E=E||{},E.layer=this.feature,this.feature.fire(c,E),this.tools.fireAndForward(c,E)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onEdited:function(){this.fireAndForward("editable:edited")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(c){this.fireAndForward("editable:drawing:commit",c),this.onEdited()},onDrawingMouseDown:function(c){this.fireAndForward("editable:drawing:mousedown",c)},onDrawingMouseUp:function(c){this.fireAndForward("editable:drawing:mouseup",c)},startDrawing:function(){this._drawing||(this._drawing=f.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(c){this.onCommitDrawing(c),this.endDrawing()},cancelDrawing:function(){f.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(c){this.drawing()&&(f.Editable.makeCancellable(c),this.fireAndForward("editable:drawing:click",c),!c._cancelled&&(this.isConnected()||this.connect(c),this.processDrawingClick(c)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(c){this.fireAndForward("editable:drawing:move",c)},onDrawingMouseMove:function(c){this.onMove(c)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(c){this.onEditing(),this.fireAndForward("editable:dragstart",c)},onDrag:function(c){this.onMove(c),this.fireAndForward("editable:drag",c)},onDragEnd:function(c){this.fireAndForward("editable:dragend",c),this.onEdited()}}),f.Editable.MarkerEditor=f.Editable.BaseEditor.extend({onDrawingMouseMove:function(c){f.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,c),this._drawing&&this.feature.setLatLng(c.latlng)},processDrawingClick:function(c){this.fireAndForward("editable:drawing:clicked",c),this.commitDrawing(c)},connect:function(c){c&&(this.feature._latlng=c.latlng),f.Editable.BaseEditor.prototype.connect.call(this,c)}}),f.Editable.CircleMarkerEditor=f.Editable.BaseEditor.extend({onDrawingMouseMove:function(c){f.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,c),this._drawing&&this.feature.setLatLng(c.latlng)},processDrawingClick:function(c){this.fireAndForward("editable:drawing:clicked",c),this.commitDrawing(c)},connect:function(c){c&&(this.feature._latlng=c.latlng),f.Editable.BaseEditor.prototype.connect.call(this,c)}}),f.Editable.PathEditor=f.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return f.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&(this.initVertexMarkers(),this.map.on("moveend",this.onMoveEnd,this)),this},removeHooks:function(){f.Editable.BaseEditor.prototype.removeHooks.call(this),this.feature&&this.map.off("moveend",this.onMoveEnd,this)},onMoveEnd:function(){this.initVertexMarkers()},initVertexMarkers:function(c){if(this.enabled())if(c=c||this.getLatLngs(),F(c))this.addVertexMarkers(c);else for(const E of c)this.initVertexMarkers(E)},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(c,E){return c.__vertex?(c.__vertex.connect(),c.__vertex):new this.tools.options.vertexMarkerClass(c,E,this)},onNewVertex:function(c){this.fireAndForward("editable:vertex:new",{latlng:c.latlng,vertex:c})},addVertexMarkers:function(c){const E=this.map.getBounds();for(const S of c)E.contains(S)&&this.addVertexMarker(S,c)},refreshVertexMarkers:function(c){c=c||this.getDefaultLatLngs();for(const E of c)E.__vertex.update()},addMiddleMarker:function(c,E,S){return new this.tools.options.middleMarkerClass(c,E,S,this)},onVertexMarkerClick:function(c){if(f.Editable.makeCancellable(c),this.fireAndForward("editable:vertex:click",c),c._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)return;const E=c.vertex.getIndex();let S;c.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(c):c.originalEvent.altKey?this.onVertexMarkerAltClick(c):c.originalEvent.shiftKey?this.onVertexMarkerShiftClick(c):c.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(c):E===c.vertex.getLastIndex()&&this._drawing===f.Editable.FORWARD?E>=this.MIN_VERTEX-1&&(S=!0):E===0&&this._drawing===f.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX||E===0&&this._drawing===f.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?S=!0:this.onVertexRawMarkerClick(c),this.fireAndForward("editable:vertex:clicked",c),S&&this.commitDrawing(c)},onVertexRawMarkerClick:function(c){this.fireAndForward("editable:vertex:rawclick",c),!c._cancelled&&this.vertexCanBeDeleted(c.vertex)&&c.vertex.delete()},vertexCanBeDeleted:function(c){return c.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(c){this.fireAndForward("editable:vertex:deleted",c),this.onEdited()},onVertexMarkerCtrlClick:function(c){this.fireAndForward("editable:vertex:ctrlclick",c)},onVertexMarkerShiftClick:function(c){this.fireAndForward("editable:vertex:shiftclick",c)},onVertexMarkerMetaKeyClick:function(c){this.fireAndForward("editable:vertex:metakeyclick",c)},onVertexMarkerAltClick:function(c){this.fireAndForward("editable:vertex:altclick",c)},onVertexMarkerContextMenu:function(c){this.fireAndForward("editable:vertex:contextmenu",c)},onVertexMarkerMouseDown:function(c){this.fireAndForward("editable:vertex:mousedown",c)},onVertexMarkerMouseOver:function(c){this.fireAndForward("editable:vertex:mouseover",c)},onVertexMarkerMouseOut:function(c){this.fireAndForward("editable:vertex:mouseout",c)},onMiddleMarkerMouseDown:function(c){this.fireAndForward("editable:middlemarker:mousedown",c)},onVertexMarkerDrag:function(c){this.onMove(c),this.feature._bounds&&this.extendBounds(c),this.fireAndForward("editable:vertex:drag",c)},onVertexMarkerDragStart:function(c){this.fireAndForward("editable:vertex:dragstart",c)},onVertexMarkerDragEnd:function(c){this.fireAndForward("editable:vertex:dragend",c),this.onEdited()},setDrawnLatLngs:function(c){this._drawnLatLngs=c||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),f.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),f.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(c){this._drawing===f.Editable.FORWARD?this._drawnLatLngs.push(c):this._drawnLatLngs.unshift(c),this.feature._bounds.extend(c);const E=this.addVertexMarker(c,this._drawnLatLngs);this.onNewVertex(E),this.refresh()},newPointForward:function(c){this.addLatLng(c),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(c)},newPointBackward:function(c){this.addLatLng(c),this.tools.anchorBackwardLineGuide(c)},push:function(c){if(!c)return console.error("L.Editable.PathEditor.push expect a valid latlng as parameter");this._drawing===f.Editable.FORWARD?this.newPointForward(c):this.newPointBackward(c)},removeLatLng:function(c){c.__vertex.delete(),this.refresh()},pop:function(){if(this._drawnLatLngs.length<=1)return;let c;return this._drawing===f.Editable.FORWARD?c=this._drawnLatLngs[this._drawnLatLngs.length-1]:c=this._drawnLatLngs[0],this.removeLatLng(c),this._drawing===f.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),c},processDrawingClick:function(c){c.vertex&&c.vertex.editor===this||(this._drawing===f.Editable.FORWARD?this.newPointForward(c.latlng):this.newPointBackward(c.latlng),this.fireAndForward("editable:drawing:clicked",c))},onDrawingMouseMove:function(c){f.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,c),this._drawing&&(this.tools.moveForwardLineGuide(c.latlng),this.tools.moveBackwardLineGuide(c.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(c){const E=this.addNewEmptyShape();E&&(this.setDrawnLatLngs(E[0]||E),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:E}),c&&this.newPointForward(c))},deleteShape:function(c,E){const S={shape:c};if(f.Editable.makeCancellable(S),this.fireAndForward("editable:shape:delete",S),!S._cancelled)return c=this._deleteShape(c,E),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:c}),this.onEdited(),c},_deleteShape:function(c,E){if(E=E||this.getLatLngs(),!E.length)return;const S=(H,j)=>H.splice(0,Number.MAX_VALUE),_=(H,j)=>(H.splice(H.indexOf(j),1),H.length||this._deleteShape(H),j);if(E===c)return S(E);for(const H of E){if(H===c)return _(E,c);if(H.indexOf(c)!==-1)return _(H,c)}},deleteShapeAt:function(c){const E=this.feature.shapeAt(c);if(E)return this.deleteShape(E)},appendShape:function(c){this.insertShape(c)},prependShape:function(c){this.insertShape(c,0)},insertShape:function(c,E){this.ensureMulti(),c=this.formatShape(c),E===void 0&&(E=this.feature._latlngs.length),this.feature._latlngs.splice(E,0,c),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(c){this.feature._bounds.extend(c.vertex.latlng)},onDragStart:function(c){this.editLayer.clearLayers(),f.Editable.BaseEditor.prototype.onDragStart.call(this,c)},onDragEnd:function(c){this.initVertexMarkers(),f.Editable.BaseEditor.prototype.onDragEnd.call(this,c)}}),f.Editable.PolylineEditor=f.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=f.Editable.BACKWARD,this.startDrawing()},continueBackward:function(c){this.drawing()||(c=c||this.getDefaultLatLngs(),this.setDrawnLatLngs(c),c.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(c[0])),this.startDrawingBackward())},continueForward:function(c){this.drawing()||(c=c||this.getDefaultLatLngs(),this.setDrawnLatLngs(c),c.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(c[c.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(c){return c=c||this.feature._latlngs,!c.length||c[0]instanceof f.LatLng?c:this.getDefaultLatLngs(c[0])},ensureMulti:function(){this.feature._latlngs.length&&F(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){const c=[];return this.appendShape(c),c}return this.feature._latlngs},formatShape:function(c){if(F(c))return c;if(c[0])return this.formatShape(c[0])},splitShape:function(c,E){if(!E||E>=c.length-1)return;this.ensureMulti();const S=this.feature._latlngs.indexOf(c);if(S===-1)return;const _=c.slice(0,E+1),H=c.slice(E);H[0]=f.latLng(H[0].lat,H[0].lng,H[0].alt),this.feature._latlngs.splice(S,1,_,H),this.refresh(),this.reset(),this.onEdited()}}),f.Editable.PolygonEditor=f.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(c){f.Editable.PathEditor.prototype.newPointForward.call(this,c),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(c),this._drawnLatLngs.length===2&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(c){this.ensureNotFlat();const E=this.feature.shapeAt(c);if(!E)return;const S=[];return E.push(S),S},newHole:function(c){const E=this.addNewEmptyHole(c);E&&(this.setDrawnLatLngs(E),this.startDrawingForward(),c&&this.newPointForward(c))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){const c=[];return this.appendShape(c),c}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&F(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){(!this.feature._latlngs.length||F(this.feature._latlngs))&&(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(c){const E=this.feature.parentShape(c.latlngs);return f.Util.indexOf(E,c.latlngs)>0?!0:f.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,c)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:c=>F(c)&&(!c[0]||c[0].length!==0)?[c]:c}),f.Editable.RectangleEditor=f.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(c){const E=c.vertex.getIndex(),S=c.vertex.getNext(),_=c.vertex.getPrevious(),H=(E+2)%4,j=c.vertex.latlngs[H],tt=new f.LatLngBounds(c.latlng,j);_.latlng.update([c.latlng.lat,j.lng]),S.latlng.update([j.lat,c.latlng.lng]),this.updateBounds(tt),this.refreshVertexMarkers()},onDrawingMouseDown:function(c){f.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,c),this.connect();const E=this.getDefaultLatLngs();E.length===3&&E.push(c.latlng);const S=new f.LatLngBounds(c.latlng,c.latlng);this.updateBounds(S),this.updateLatLngs(S),this.refresh(),this.reset(),c.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(c.originalEvent),E[3].__vertex.dragging._draggable._onDown(c.originalEvent)},onDrawingMouseUp:function(c){this.commitDrawing(c),c.originalEvent._simulated=!1,f.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,c)},onDrawingMouseMove:function(c){c.originalEvent._simulated=!1,f.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,c)},getDefaultLatLngs:function(c){return c||this.feature._latlngs[0]},updateBounds:function(c){this.feature._bounds=c},updateLatLngs:function(c){const E=this.getDefaultLatLngs(),S=this.feature._boundsToLatLngs(c);for(let _=0;_<E.length;_++)E[_].update(S[_])}}),f.Editable.CircleEditor=f.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(c,E,S){f.Editable.PathEditor.prototype.initialize.call(this,c,E,S),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){const c=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),E=this.map.project(this.feature._latlng);return this.map.unproject([E.x+c,E.y-c])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(c){c.vertex.getIndex()===1?this.resize(c):this.updateResizeLatLng(c),f.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,c)},resize:function(c){let E;this.map.options.crs?E=this.map.options.crs.distance(this.feature._latlng,c.latlng):E=this.feature._latlng.distanceTo(c.latlng),this.feature.setRadius(E)},onDrawingMouseDown:function(c){f.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,c),this._resizeLatLng.update(c.latlng),this.feature._latlng.update(c.latlng),this.connect(),c.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(c.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(c.originalEvent)},onDrawingMouseUp:function(c){this.commitDrawing(c),c.originalEvent._simulated=!1,f.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,c)},onDrawingMouseMove:function(c){c.originalEvent._simulated=!1,f.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,c)},onDrag:function(c){f.Editable.PathEditor.prototype.onDrag.call(this,c),this.feature.dragging.updateLatLng(this._resizeLatLng)}});const g={createEditor:function(c){var _;c=c||this._map;const E=((_=this.options.editOptions)==null?void 0:_.editTools)||c.editTools;if(!E)throw Error("Unable to detect Editable instance.");const S=this.options.editorClass||this.getEditorClass(E);return new S(c,this,this.options.editOptions)},enableEdit:function(c){return this.editor||this.createEditor(c),this.editor.enable(),this.editor},editEnabled:function(){var c;return(c=this.editor)==null?void 0:c.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},P={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.polylineEditorClass)||f.Editable.PolylineEditor},shapeAt:function(c,E){let S=null;if(E=E||this._latlngs,!E.length)return S;if(F(E)&&this.isInLatLngs(c,E))S=E;else for(const _ of E)if(this.isInLatLngs(c,_))return _;return S},isInLatLngs:function(c,E){if(!E)return!1;let S,_,H,j=[],tt;const Lt=this._clickTolerance();if(this._projectLatlngs(E,j,this._pxBounds),j=j[0],tt=this._map.latLngToLayerPoint(c),!this._pxBounds.contains(tt))return!1;for(S=1,H=j.length,_=0;S<H;_=S++)if(f.LineUtil.pointToSegmentDistance(tt,j[_],j[S])<=Lt)return!0;return!1}},b={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.polygonEditorClass)||f.Editable.PolygonEditor},shapeAt:function(c,E){let S=null;if(E=E||this._latlngs,!E.length)return S;if(F(E)&&this.isInLatLngs(c,E)&&(S=E),F(E[0])&&this.isInLatLngs(c,E[0]))S=E;else for(const _ of E)if(this.isInLatLngs(c,_[0]))return _;return S},isInLatLngs:(c,E)=>{let S=!1,_,H,j,tt,Lt;for(j=0,Lt=E.length,tt=Lt-1;j<Lt;tt=j++)_=E[j],H=E[tt],_.lat>c.lat!=H.lat>c.lat&&c.lng<(H.lng-_.lng)*(c.lat-_.lat)/(H.lat-_.lat)+_.lng&&(S=!S);return S},parentShape:function(c,E){if(E=E||this._latlngs,!E)return;let S=f.Util.indexOf(E,c);if(S!==-1)return E;for(const _ of E)if(S=f.Util.indexOf(_,c),S!==-1)return _}},I={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.markerEditorClass)||f.Editable.MarkerEditor}},k={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.circleMarkerEditorClass)||f.Editable.CircleMarkerEditor}},z={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.rectangleEditorClass)||f.Editable.RectangleEditor}},Y={getEditorClass:c=>{var E;return((E=c==null?void 0:c.options)==null?void 0:E.circleEditorClass)||f.Editable.CircleEditor}},X=function(){this.on("add",this._onEditableAdd)},F=f.LineUtil.isFlat||f.LineUtil._flat||f.Polyline._flat;f.Polyline&&(f.Polyline.include(g),f.Polyline.include(P),f.Polyline.addInitHook(X)),f.Polygon&&(f.Polygon.include(g),f.Polygon.include(b)),f.Marker&&(f.Marker.include(g),f.Marker.include(I),f.Marker.addInitHook(X)),f.CircleMarker&&(f.CircleMarker.include(g),f.CircleMarker.include(k),f.CircleMarker.addInitHook(X)),f.Rectangle&&(f.Rectangle.include(g),f.Rectangle.include(z)),f.Circle&&(f.Circle.include(g),f.Circle.include(Y)),f.LatLng.prototype.update=function(c){c=f.latLng(c),this.lat=c.lat,this.lng=c.lng}},window)})(Au);var ga={exports:{}};(function(N,p){(function(f,g){g(p)})(Sa,function(f){function g(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function P(){}function b(){}function I(){}function k(){}function z(){}function Y(){}function X(){}function F(t){this.name="RuntimeException",this.message=t,this.stack=new Error().stack,Error.call(this,t)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function E(){if(arguments.length===0)F.call(this);else if(arguments.length===1){var t=arguments[0];F.call(this,t)}}function S(){}function _(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)_.call(this,0,0);else if(arguments.length===1){var t=arguments[0];_.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];_.call(this,e,n,_.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.x=r,this.y=s,this.z=a}}function H(){if(this.dimensionsToTest=2,arguments.length===0)H.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new b;this.dimensionsToTest=t}}function j(){}function tt(){}function Lt(t){this.message=t||""}function pt(){}function Wt(t){this.message=t||""}function ee(t){this.message=t||""}function M(){this.array_=[],arguments[0]instanceof tt&&this.addAll(arguments[0])}function yt(){if(M.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}function Q(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Q){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],l=arguments[2],d=arguments[3];this.init(s,a,l,d)}}function Pe(){}function Tt(){Pe.call(this,"Projective point not representable on the Cartesian plane.")}function x(){}function W(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function qt(){}function Ge(t){this.str=t}function jt(t){this.value=t}function vn(){}function T(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof T){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];T.call(this,T.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}function Te(){}function $(){}function ut(){}function Ut(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof Ut&&arguments[1]instanceof Ut){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof _&&arguments[1]instanceof _){var a=arguments[0],l=arguments[1];this.x=a.y-l.y,this.y=l.x-a.x,this.w=a.x*l.y-l.x*a.y}}else if(arguments.length===3){var d=arguments[0],v=arguments[1],w=arguments[2];this.x=d,this.y=v,this.w=w}else if(arguments.length===4){var O=arguments[0],D=arguments[1],G=arguments[2],K=arguments[3],rt=O.y-D.y,ht=D.x-O.x,Vt=O.x*D.y-D.x*O.y,le=G.y-K.y,Zn=K.x-G.x,Xr=G.x*K.y-K.x*G.y;this.x=ht*Xr-Zn*Vt,this.y=le*Vt-rt*Xr,this.w=rt*Zn-le*ht}}function Me(){}function At(){}function Z(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function _t(){}function zt(){}function yn(){}function xr(){}function Ui(){}function Zi(){}function nt(){}function Er(){}function Ts(){}function ci(){}function Ms(){}function Yi(){}function re(){this.array_=[],arguments[0]instanceof tt&&this.addAll(arguments[0])}function ao(t){return t==null?Si:t.color}function Dt(t){return t==null?null:t.parent}function nn(t,e){t!==null&&(t.color=e)}function jr(t){return t==null?null:t.left}function Rs(t){return t==null?null:t.right}function ae(){this.root_=null,this.size_=0}function Kr(){}function Jr(){}function we(){this.array_=[],arguments[0]instanceof tt&&this.addAll(arguments[0])}function _n(){}function V(){}function xn(){}function fi(){}function vt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(Z.call(this,e),t===null&&(t=[]),Z.hasNullElements(t))throw new b;this.geometries=t}function ke(){var t=arguments[0],e=arguments[1];vt.call(this,t,e)}function En(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];En.call(this,t,zt.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function Qr(){this.count=null}function Uo(){}function wr(){}function Zo(){}function Yo(){}function uo(){}function lo(){}function Ve(){}function ne(){}function dt(){this.points=null;var t=arguments[0],e=arguments[1];Z.call(this,e),this.init(t)}function $r(){}function Zt(){this.coordinates=null;var t=arguments[0],e=arguments[1];Z.call(this,e),this.init(t)}function On(){}function Rt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(Z.call(this,n),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),Z.hasNullElements(e))throw new b;if(t.isEmpty()&&Z.hasNonEmptyElements(e))throw new b;this.shell=t,this.holes=e}function Re(){var t=arguments[0],e=arguments[1];vt.call(this,t,e)}function Qt(){if(arguments[0]instanceof _&&arguments[1]instanceof gt){var t=arguments[0],e=arguments[1];Qt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(W(arguments[0],$)&&arguments[1]instanceof gt){var n=arguments[0],r=arguments[1];dt.call(this,n,r),this.validateConstruction()}}function ce(){var t=arguments[0],e=arguments[1];vt.call(this,t,e)}function Ye(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function ts(){}function rn(){}function it(){}function es(){}function qe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];qe.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new _}else if(W(arguments[0],$)){var r=arguments[0];if(r===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=r.getDimension(),this.coordinates=new Array(r.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=r.getCoordinateCopy(n)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=s,this.dimension=a,s===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var l=arguments[0],d=arguments[1];this.coordinates=new Array(l).fill(null),this.dimension=d;for(var n=0;n<l;n++)this.coordinates[n]=new _}}}function Dn(){}function ho(t,e){return t===e||t!==t&&e!==e}function Os(t,e){function n(r){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(r&&co.call(this,r))):new n(r)}return Da(t,"size",{get:Jo}),t.constructor=n,n.prototype=t,n}function co(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function Xi(t){return this.has(t)&&(this._keys.splice(li,1),this._values.splice(li,1),this._itp.forEach(function(e){li<e[0]&&e[0]--})),li>-1}function fo(t){return this.has(t)?this._values[li]:void 0}function Xo(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(li=t.length;li--&&!ho(t[li],e););else li=t.indexOf(e);return li>-1}function Ho(t){return Xo.call(this,this._keys,t)}function Wo(t,e){return this.has(t)?this._values[li]=e:this._values[this._keys.push(t)-1]=e,this}function jo(){(this._keys||0).length=this._values.length=0}function go(){return Ds(this._itp,this._keys)}function Ko(){return Ds(this._itp,this._values)}function ns(){return Ds(this._itp,this._keys,this._values)}function Ds(t,e,n){var r=[0],s=!1;return t.push(r),{next:function(){var a,l=r[0];return!s&&l<e.length?(a=n?[e[l],n[l]]:e[l],r[0]++):(s=!0,t.splice(t.indexOf(r),1)),{done:s,value:a}}}}function Jo(){return this._values.length}function Qo(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}function An(){this.map_=new Fa}function Mt(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=Mt.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ke){var t=arguments[0];this.modelType=t,t===Mt.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=Mt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Mt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}}function Ke(){this.name=null;var t=arguments[0];this.name=t,Ke.nameToTypeMap.put(t,this)}function gt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)gt.call(this,new Mt,0);else if(arguments.length===1){if(W(arguments[0],Me)){var t=arguments[0];gt.call(this,new Mt,0,t)}else if(arguments[0]instanceof Mt){var e=arguments[0];gt.call(this,e,0,gt.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];gt.call(this,n,r,gt.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];this.precisionModel=s,this.coordinateSequenceFactory=l,this.SRID=a}}function is(t){this.geometryFactory=t||new gt}function de(t){this.parser=new is(t)}function It(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new _,this.intPt[1]=new _,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function lt(){It.apply(this)}function Gt(){}function Fn(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function q(){}function st(){if(this.p0=null,this.p1=null,arguments.length===0)st.call(this,new _,new _);else if(arguments.length===1){var t=arguments[0];st.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];st.call(this,new _(r,s),new _(a,l))}}function St(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(V.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];St.call(this),this.set(t)}else if(arguments[0]instanceof St){var e=arguments[0];St.call(this),this.matrix[x.INTERIOR][x.INTERIOR]=e.matrix[x.INTERIOR][x.INTERIOR],this.matrix[x.INTERIOR][x.BOUNDARY]=e.matrix[x.INTERIOR][x.BOUNDARY],this.matrix[x.INTERIOR][x.EXTERIOR]=e.matrix[x.INTERIOR][x.EXTERIOR],this.matrix[x.BOUNDARY][x.INTERIOR]=e.matrix[x.BOUNDARY][x.INTERIOR],this.matrix[x.BOUNDARY][x.BOUNDARY]=e.matrix[x.BOUNDARY][x.BOUNDARY],this.matrix[x.BOUNDARY][x.EXTERIOR]=e.matrix[x.BOUNDARY][x.EXTERIOR],this.matrix[x.EXTERIOR][x.INTERIOR]=e.matrix[x.EXTERIOR][x.INTERIOR],this.matrix[x.EXTERIOR][x.BOUNDARY]=e.matrix[x.EXTERIOR][x.BOUNDARY],this.matrix[x.EXTERIOR][x.EXTERIOR]=e.matrix[x.EXTERIOR][x.EXTERIOR]}}}function ct(){this.areaBasePt=null,this.triangleCent3=new _,this.areasum2=0,this.cg3=new _,this.lineCentSum=new _,this.totalLength=0,this.ptCount=0,this.ptCentSum=new _;var t=arguments[0];this.areaBasePt=null,this.add(t)}function ie(t){this.message=t||""}function me(){this.array_=[]}function Yn(){this.treeSet=new we,this.list=new M}function he(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];he.call(this,he.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputPts=Yn.filterCoordinates(e),this.geomFactory=n}}function Hi(){this.origin=null;var t=arguments[0];this.origin=t}function pe(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function sn(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new st,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof dt&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];sn.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.srcPts=n,this._isClosed=sn.isClosed(n),this.snapTolerance=r}}function bt(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function wn(){if(pe.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.snapTolerance=n,this.snapPts=r,this.isSelfSnap=s}}function Ie(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Xn(){this.commonCoord=null,this.ccFilter=new Wi}function Wi(){this.commonBitsX=new Ie,this.commonBitsY=new Ie}function Hn(){this.trans=null;var t=arguments[0];this.trans=t}function Wn(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function jn(){if(this.boundaryRule=zt.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new b;this.boundaryRule=t}}}function Kn(){}function Mi(){}function Ir(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Ri(){}function In(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Cr(){this._size=null,this.items=null,this._size=0,this.items=new M,this.items.add(null)}function gi(){}function mt(){}function Kt(){if(this.childBoundables=new M,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function xt(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Jt(){if(this.root=null,this.built=!1,this.itemBoundables=new M,this.nodeCapacity=null,arguments.length===0)Jt.call(this,Jt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];S.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function As(){}function ji(){}function kt(){if(arguments.length===0)kt.call(this,kt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Jt.call(this,t)}}function Cn(){var t=arguments[0];Kt.call(this,t)}function Ce(){}function Oi(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.segString=t,this.coord=new _(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}function ve(){this.nodeMap=new ae,this.edge=null;var t=arguments[0];this.edge=t}function di(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function rs(){}function on(){this.nodeList=new ve(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Nr(){this.tempEnv1=new Q,this.tempEnv2=new Q,this.overlapSeg1=new st,this.overlapSeg2=new st}function ss(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=r}function Et(){}function an(){}function Ki(){}function Ct(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function mi(){if(this.monoChains=new M,this.index=new kt,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];Ct.call(this,t)}}}function Ue(){Nr.apply(this),this.si=null;var t=arguments[0];this.si=t}function ye(){if(this.pt=null,arguments.length===1){var t=arguments[0];F.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];F.call(this,ye.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new _(n)}}function Ji(){}function Jn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new M,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Di(){this.li=new lt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Ai(){this.nv=null;var t=arguments[0];this.nv=new Di(Ai.toSegmentStrings(t))}function Fi(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function U(){}function Ze(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[U.ON]=e}else if(arguments[0]instanceof Ze){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];this.init(3),this.location[U.ON]=s,this.location[U.LEFT]=a,this.location[U.RIGHT]=l}}function Ht(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Ze(t),this.elt[1]=new Ze(t)}else if(arguments[0]instanceof Ht){var e=arguments[0];this.elt[0]=new Ze(e.elt[0]),this.elt[1]=new Ze(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new Ze(x.NONE),this.elt[1]=new Ze(x.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];this.elt[0]=new Ze(s,a,l),this.elt[1]=new Ze(s,a,l)}else if(arguments.length===4){var d=arguments[0],v=arguments[1],w=arguments[2],O=arguments[3];this.elt[0]=new Ze(x.NONE,x.NONE,x.NONE),this.elt[1]=new Ze(x.NONE,x.NONE,x.NONE),this.elt[d].setLocations(v,w,O)}}function Qi(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new M,this.pts=new M,this.label=new Ht(x.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new M,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Je(){var t=arguments[0],e=arguments[1];Qi.call(this,t,e)}function Lr(){var t=arguments[0],e=arguments[1];Qi.call(this,t,e)}function Qn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function Oe(){Qn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Ht(0,x.NONE)}function ki(){this.nodeMap=new ae,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function un(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];un.call(this,e,n,r,null)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],l=arguments[2],d=arguments[3];un.call(this,s),this.init(a,l),this.label=d}}function $n(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(un.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function Bi(){}function ln(){if(this.edges=new M,this.nodes=null,this.edgeEndList=new M,arguments.length===0)this.nodes=new ki(new Bi);else if(arguments.length===1){var t=arguments[0];this.nodes=new ki(t)}}function Sr(){this.geometryFactory=null,this.shellList=new M;var t=arguments[0];this.geometryFactory=t}function Fs(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new M,this.resultLineList=new M;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function ks(){this.op=null,this.geometryFactory=null,this.resultPointList=new M;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function $i(){}function Xe(){this.geom=null;var t=arguments[0];this.geom=t}function pi(){this.edgeMap=new ae,this.edgeList=null,this.ptInAreaLocation=[x.NONE,x.NONE]}function br(){pi.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function ti(){Bi.apply(this)}function ei(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function kn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=kn.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.eventType=kn.INSERT,this.label=n,this.xValue=r,this.obj=s}}function vi(){}function _e(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function Pr(){vi.apply(this),this.events=new M,this.nOverlaps=null}function yi(){this.min=I.POSITIVE_INFINITY,this.max=I.NEGATIVE_INFINITY}function Bs(){}function tr(){yi.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function er(){yi.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function zs(){this.leaves=new M,this.root=null,this.level=0}function Ne(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Tr(){this.items=new M}function Mr(){this.index=null;var t=arguments[0];if(!W(t,On))throw new b;this.index=new ni(t)}function He(){this.counter=null;var t=arguments[0];this.counter=t}function ni(){this.index=new zs;var t=arguments[0];this.init(t)}function Gs(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new _(t),this.segmentIndex=e,this.dist=n}function Nn(){this.nodeMap=new ae,this.edge=null;var t=arguments[0];this.edge=t}function Rr(){}function _i(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Q,this.env2=new Q;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Rr;this.startIndex=e.getChainStartIndices(this.pts)}function hn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=hn.NULL_VALUE}function De(){if(Qn.apply(this),this.pts=null,this.env=null,this.eiList=new Nn(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new hn,this.depthDelta=0,arguments.length===1){var t=arguments[0];De.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Ae(){if(ln.apply(this),this.parentGeom=null,this.lineEdgeMap=new An,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new jn,arguments.length===2){var t=arguments[0],e=arguments[1];Ae.call(this,t,e,zt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.argIndex=n,this.parentGeom=r,this.boundaryNodeRule=s,r!==null&&this.add(r)}}function Ln(){if(this.li=new lt,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Ae(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ln.call(this,e,n,zt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Ae(0,r,a),this.arg[1]=new Ae(1,s,a)}}function xi(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=xi.orientation(t)}function Sn(){this.edges=new M,this.ocaMap=new ae}function et(){this.ptLocator=new jn,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Sn,this.resultPolyList=new M,this.resultLineList=new M,this.resultPointList=new M;var t=arguments[0],e=arguments[1];Ln.call(this,t,e),this.graph=new ln(new ti),this.geomFact=t.getFactory()}function Qe(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function se(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function cn(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function We(){this.poly=null,this.centreY=null,this.hiY=I.MAX_VALUE,this.loY=-I.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=cn.avg(this.loY,this.hiY)}function os(){this.centroid=null,this.minDistance=I.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function ii(){this.centroid=null,this.minDistance=I.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function Ei(){this.tempEnv1=new Q,this.selectedSegment=new st}function xe(){this.items=new M,this.subnode=[null,null]}function $e(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.init(e,n)}}function wi(){}function Vs(t,e){var n,r,s,a,l={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},d={32:8,64:11}[t];if(a||(n=e<0||1/e<0,isFinite(e)||(a=l[t],n&&(a.d+=1<<t/4-1),r=Math.pow(2,d)-1,s=0)),!a){for(r={32:127,64:1023}[t],s=Math.abs(e);s>=2;)r++,s/=2;for(;s<1&&r>0;)r--,s*=2;r<=0&&(s/=2)}return r}function Ii(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function bn(){xe.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Pn(){}function Tn(){xe.apply(this)}function ri(){this.root=null,this.minExtent=1,this.root=new Tn}function Or(){}function nr(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new $e;var t=arguments[0];this.ring=t,this.buildIndex()}function Dr(){Ei.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function ot(){}function Ft(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Bn(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Le(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new st,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];Le.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function si(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Ar(){pe.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Ee(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function Se(){this._isMarked=!1;var t=arguments[0];Ee.call(this,t)}function ir(){this.vertexMap=new An}function zi(){this._isStart=!1;var t=arguments[0];Se.call(this,t)}function as(){ir.apply(this)}function rr(){this.result=null,this.factory=null,this.graph=null,this.lines=new M,this.nodeEdgeStack=new me,this.ringStartEdge=null,this.graph=new as}function Mn(){this.items=new M,this.subnode=new Array(4).fill(null)}function oi(){this.pt=new _,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function ai(){Mn.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function fn(){Mn.apply(this)}function ui(){this.root=null,this.minExtent=1,this.root=new fn}function us(t){this.geometryFactory=t||new gt}function mo(t){this.geometryFactory=t||new gt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new us(this.geometryFactory)}function zn(){this.parser=new us(this.geometryFactory)}function qs(t){this.geometryFactory=t||new gt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new is(this.geometryFactory)}function sr(t){return[t.x,t.y]}function or(t,e){this.geometryFactory=t||new gt,this.ol=e||typeof ol<"u"&&ol}function Fr(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];Fr.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this.noder=n,this.scaleFactor=r,this.isScaled=!this.isIntegerPrecision()}}function Ci(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Ni(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function wt(){if(this.quadrantSegments=wt.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=wt.CAP_ROUND,this.joinStyle=wt.JOIN_ROUND,this.mitreLimit=wt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=wt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(a),this.setMitreLimit(l)}}}function ls(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function hs(){this.array_=[]}function cs(){this.finder=null,this.dirEdgeList=new M,this.nodes=new M,this.rightMostCoord=null,this.env=null,this.finder=new ls}function fe(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=q.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function ar(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new M}function gn(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new st,this.seg1=new st,this.offset0=new st,this.offset1=new st,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new lt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===wt.JOIN_ROUND&&(this.closingSegLengthFactor=gn.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function ur(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function fs(){this.subgraphs=null,this.seg=new st,this.cga=new q;var t=arguments[0];this.subgraphs=t}function kr(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new st(t),this.leftDepth=e}function gs(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new M;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Br(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function i(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Sn;var t=arguments[0];this.bufParams=t}function o(){this.li=new lt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function u(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new b;e!==1&&(this.pt=new _(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new _,this.p1Scaled=new _),this.initCorners(this.pt)}function h(){this.index=null;var t=arguments[0];this.index=t}function m(){Ei.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function y(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new M}function C(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new lt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function R(){if(this.argGeom=null,this.distance=null,this.bufParams=new wt,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function A(){this.comps=null;var t=arguments[0];this.comps=t}function B(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];B.call(this,t,B.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.component=n,this.segIndex=r,this.pt=s}}function J(){this.pts=null;var t=arguments[0];this.pts=t}function at(){this.locations=null;var t=arguments[0];this.locations=t}function ft(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new jn,this.minDistanceLocation=null,this.minDistance=I.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];ft.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=s}}function Fe(){this.factory=null,this.directedEdges=new M,this.coordinates=null;var t=arguments[0];this.factory=t}function Bt(){this._isMarked=!1,this._isVisited=!1,this.data=null}function $t(){Bt.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y;this.quadrant=Et.quadrant(s,a),this.angle=Math.atan2(a,s)}function be(){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];$t.call(this,t,e,n,r)}function Be(){if(Bt.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function Us(){this.outEdges=new M,this.sorted=!1}function Gn(){if(Bt.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];Gn.call(this,t,new Us)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function ds(){Be.apply(this),this.line=null;var t=arguments[0];this.line=t}function ms(){this.nodeMap=new ae}function lr(){this.edges=new re,this.dirEdges=new re,this.nodeMap=new ms}function zr(){lr.apply(this)}function ue(){this.graph=new zr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function Li(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];$t.call(this,t,e,n,r)}function ps(){Be.apply(this),this.line=null;var t=arguments[0];this.line=t}function Gr(){this.geometryFactory=new gt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function vs(){}function Gi(){if(this.edgeEnds=new M,arguments.length===1){var t=arguments[0];Gi.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];un.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Ht(e.getLabel())),this.insert(e)}}function Vr(){pi.apply(this)}function ys(){var t=arguments[0],e=arguments[1];Oe.call(this,t,e)}function Zs(){Bi.apply(this)}function $o(){this.nodes=new ki(new Zs)}function po(){this.li=new lt,this.geomGraph=null,this.nodeGraph=new $o,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function ta(){this.graph=null,this.rings=new M,this.totalEnv=new Q,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Nt(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];Nt.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.errorType=e,n!==null&&(this.pt=n.copy())}}function dn(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Vn(){this.factory=null,this.deList=new M,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function ea(){}function ge(){lr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function tn(){if(this.lineStringAdder=new vo(this),this.graph=null,this.dangles=new M,this.cutEdges=new M,this.invalidRingLines=new M,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)tn.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function vo(){this.p=null;var t=arguments[0];this.p=t}function yo(){this.li=new lt,this.ptLocator=new jn,this.arg=null,this.nodes=new ki(new Zs),this.im=null,this.isolatedEdges=new M,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Ys(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function na(){this.li=new lt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new _(t.getMinX(),t.getMinY()),this.diagUp1=new _(t.getMaxX(),t.getMaxY()),this.diagDown0=new _(t.getMinX(),t.getMaxY()),this.diagDown1=new _(t.getMaxX(),t.getMinY())}function hr(){this._isDone=!1}function _s(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function _o(){hr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function xo(){hr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Eo(){hr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new _,this.p1=new _;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new na(this.rectEnv)}function Pt(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];Ln.call(this,t,e),this._relate=new yo(this.arg)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];Ln.call(this,n,r,s),this._relate=new yo(this.arg)}}function mn(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=mn.extractFactory(t),this.inputGeoms=t}function Xs(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function cr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Rn(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new M)}function fr(){if(this.polygons=new M,this.lines=new M,this.points=new M,this.geomFact=null,arguments.length===1){if(W(arguments[0],tt)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof Z){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.geomFact=r,this.extract(n)}}function wo(){Ye.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function qr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Hs(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new st;var t=arguments[0];this.pts=t}function xs(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Ws(){pe.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function js(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];js.call(this,t,e,null,-1)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];st.call(this,n,r),this.parent=s,this.index=a}}function Vi(){if(this.parentLine=null,this.segs=null,this.resultSegs=new M,this.minimumSize=null,arguments.length===1){var t=arguments[0];Vi.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Es(){this.index=new ui}function ia(){this.querySeg=null,this.items=new M;var t=arguments[0];this.querySeg=t}function Ks(){this.li=new lt,this.inputIndex=new Es,this.outputIndex=new Es,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function ra(){this.inputIndex=new Es,this.outputIndex=new Es,this.distanceTolerance=0}function Ur(){this.inputGeom=null,this.lineSimplifier=new ra,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function Js(){pe.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function Io(){this.tps=null;var t=arguments[0];this.tps=t}function ws(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function sa(){}function Qs(){}function Yt(){}function Ot(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new _(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p=new _(e,n)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.p=new _(r,s,a)}}function gr(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];Ot.call(this,t)}function te(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function $s(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function oa(){}function Co(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Is(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];F.call(this,t)}else if(arguments[0]instanceof st){var e=arguments[0];F.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new st(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];F.call(this,Is.msgWithSpatial(n,r)),this.seg=new st(r)}}function Cs(){}function pn(){this.visitedKey=0,this.quadEdges=new M,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new st,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/pn.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Co(this)}function No(){}function Lo(){this.triList=new M}function So(){this.triList=new M}function bo(){this.coordList=new yt,this.triCoords=new M}function Zr(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new st(t,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.ls=new st(n,r),this.data=s}else if(arguments.length===6){var a=arguments[0],l=arguments[1],d=arguments[2],v=arguments[3],w=arguments[4],O=arguments[5];Zr.call(this,new _(a,l,d),new _(v,w,O))}else if(arguments.length===7){var D=arguments[0],G=arguments[1],K=arguments[2],rt=arguments[3],ht=arguments[4],Vt=arguments[5],le=arguments[6];Zr.call(this,new _(D,G,K),new _(rt,ht,Vt),le)}}function to(){}function Po(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new _(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.p=new _(n,r),this.left=null,this.right=null,this.count=1,this.data=s}}function Yr(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)Yr.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function To(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function dr(){this.initialVertices=null,this.segVertices=null,this.segments=new M,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Qs,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new M(t),this.tolerance=e,this.kdt=new Yr(e)}function ze(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Ns(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new ae}function eo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Mo(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(this===void 0||this===null)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var s=2 in arguments&&arguments[2]!==void 0?parseInt(Number(arguments[2]),10)||0:n;for(s=s<0?Math.max(n+arguments[2],0):Math.min(s,n);r<s;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},g(P.prototype,{interfaces_:function(){return[]},getClass:function(){return P}}),P.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},I.isNaN=function(t){return Number.isNaN(t)},I.doubleToLongBits=function(t){return t},I.longBitsToDouble=function(t){return t},I.isInfinite=function(t){return!Number.isFinite(t)},I.MAX_VALUE=Number.MAX_VALUE,F.prototype=Object.create(Error.prototype),F.prototype.constructor=Error,c(E,F),g(E.prototype,{interfaces_:function(){return[]},getClass:function(){return E}}),g(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.shouldNeverReachHere=function(){if(arguments.length===0)S.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new E("Should never reach here"+(t!==null?": "+t:""))}},S.isTrue=function(){if(arguments.length===1){var t=arguments[0];S.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e)throw n===null?new E:new E(n)}},S.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];S.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new E("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}},g(_.prototype,{setOrdinate:function(t,e){switch(t){case _.X:this.x=e;break;case _.Y:this.y=e;break;case _.Z:this.z=e;break;default:throw new b}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!!P.equalsWithTolerance(this.x,e.x,n)&&!!P.equalsWithTolerance(this.y,e.y,n)}},getOrdinate:function(t){switch(t){case _.X:return this.x;case _.Y:return this.y;case _.Z:return this.z}throw new b},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||I.isNaN(this.z)&&I.isNaN(t.z))},equals:function(t){return t instanceof _&&this.equals2D(t)},equalInZ:function(t,e){return P.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return S.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new _(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+_.hashCode(this.x),t=37*t+_.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[k,z,X]},getClass:function(){return _}}),_.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=I.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},g(H.prototype,{compare:function(t,e){var n=t,r=e,s=H.compare(n.x,r.x);if(s!==0)return s;var a=H.compare(n.y,r.y);if(a!==0)return a;if(this.dimensionsToTest<=2)return 0;var l=H.compare(n.z,r.z);return l},interfaces_:function(){return[Y]},getClass:function(){return H}}),H.compare=function(t,e){return t<e?-1:t>e?1:I.isNaN(t)?I.isNaN(e)?0:-1:I.isNaN(e)?1:0},_.DimensionalComparator=H,_.serialVersionUID=6683108902428367e3,_.NULL_ORDINATE=I.NaN,_.X=0,_.Y=1,_.Z=2,j.prototype.hasNext=function(){},j.prototype.next=function(){},j.prototype.remove=function(){},tt.prototype.add=function(){},tt.prototype.addAll=function(){},tt.prototype.isEmpty=function(){},tt.prototype.iterator=function(){},tt.prototype.size=function(){},tt.prototype.toArray=function(){},tt.prototype.remove=function(){},Lt.prototype=new Error,Lt.prototype.name="IndexOutOfBoundsException",pt.prototype=Object.create(tt.prototype),pt.prototype.constructor=pt,pt.prototype.get=function(){},pt.prototype.set=function(){},pt.prototype.isEmpty=function(){},Wt.prototype=new Error,Wt.prototype.name="NoSuchElementException",ee.prototype=new Error,ee.prototype.name="OperationNotSupported",M.prototype=Object.create(pt.prototype),M.prototype.constructor=M,M.prototype.ensureCapacity=function(){},M.prototype.interfaces_=function(){return[pt,tt]},M.prototype.add=function(t){return arguments.length===1?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},M.prototype.clear=function(){this.array_=[]},M.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},M.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},M.prototype.iterator=function(){return new no(this)},M.prototype.get=function(t){if(t<0||t>=this.size())throw new Lt;return this.array_[t]},M.prototype.isEmpty=function(){return this.array_.length===0},M.prototype.size=function(){return this.array_.length},M.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},M.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var no=function(t){this.arrayList_=t,this.position_=0};no.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Wt;return this.arrayList_.get(this.position_++)},no.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},no.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},no.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},c(yt,M),g(yt.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return M.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=M.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},toCoordinateArray:function(){return this.toArray(yt.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];M.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof _&&typeof arguments[1]=="boolean"){var r=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(r))return null}M.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var l=arguments[0],d=arguments[1];return this.add(l,d),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var v=arguments[0],w=arguments[1],O=arguments[2];if(O)for(var D=0;D<v.length;D++)this.add(v[D],w);else for(var D=v.length-1;D>=0;D--)this.add(v[D],w);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof _){var G=arguments[0],K=arguments[1],rt=arguments[2];if(!rt){var ht=this.size();if(ht>0){if(G>0){var Vt=this.get(G-1);if(Vt.equals2D(K))return null}if(G<ht){var le=this.get(G);if(le.equals2D(K))return null}}}M.prototype.add.call(this,G,K)}}else if(arguments.length===4){var Zn=arguments[0],Xr=arguments[1],Do=arguments[2],Ao=arguments[3],Fo=1;Do>Ao&&(Fo=-1);for(var D=Do;D!==Ao;D+=Fo)this.add(Zn[D],Xr);return!0}},closeRing:function(){this.size()>0&&this.add(new _(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return yt}}),yt.coordArrayType=new Array(0).fill(null),g(Q.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof Q))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Q;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,r=this.maxx<t.maxx?this.maxx:t.maxx,s=this.maxy<t.maxy?this.maxy:t.maxy;return new Q(e,r,n,s)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Q){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&r>=this.miny&&r<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof Q){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof _){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||r>this.maxy||r<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Q){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=r,this.maxy=r):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),r<this.miny&&(this.miny=r),r>this.maxy&&(this.maxy=r))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof Q){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof _){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},centre:function(){return this.isNull()?null:new _((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Q){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],l=arguments[2],d=arguments[3];s<a?(this.minx=s,this.maxx=a):(this.minx=a,this.maxx=s),l<d?(this.miny=l,this.maxy=d):(this.miny=d,this.maxy=l)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+_.hashCode(this.minx),t=37*t+_.hashCode(this.maxx),t=37*t+_.hashCode(this.miny),t=37*t+_.hashCode(this.maxy)},interfaces_:function(){return[k,X]},getClass:function(){return Q}}),Q.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3],d=Math.min(a.x,l.x),v=Math.max(a.x,l.x),w=Math.min(r.x,s.x),O=Math.max(r.x,s.x);return!(w>v)&&!(O<d)&&(d=Math.min(a.y,l.y),v=Math.max(a.y,l.y),w=Math.min(r.y,s.y),O=Math.max(r.y,s.y),!(w>v)&&!(O<d))}},Q.serialVersionUID=5873921885273102e3,c(Tt,Pe),g(Tt.prototype,{interfaces_:function(){return[]},getClass:function(){return Tt}}),g(x.prototype,{interfaces_:function(){return[]},getClass:function(){return x}}),x.toLocationSymbol=function(t){switch(t){case x.EXTERIOR:return"e";case x.BOUNDARY:return"b";case x.INTERIOR:return"i";case x.NONE:return"-"}throw new b},x.INTERIOR=0,x.BOUNDARY=1,x.EXTERIOR=2,x.NONE=-1,g(qt.prototype,{interfaces_:function(){return[]},getClass:function(){return qt}}),qt.log10=function(t){var e=Math.log(t);return I.isInfinite(e)||I.isNaN(e)?e:e/qt.LOG_10},qt.min=function(t,e,n,r){var s=t;return e<s&&(s=e),n<s&&(s=n),r<s&&(s=r),s},qt.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],a=arguments[2];return r<s?s:r>a?a:r}},qt.wrap=function(t,e){return t<0?e- -t%e:t%e},qt.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(arguments.length===4){var s=arguments[0],a=arguments[1],l=arguments[2],d=arguments[3],r=s;return a>r&&(r=a),l>r&&(r=l),d>r&&(r=d),r}},qt.average=function(t,e){return(t+e)/2},qt.LOG_10=Math.log(10),Ge.prototype.append=function(t){this.str+=t},Ge.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Ge.prototype.toString=function(t){return this.str},jt.prototype.intValue=function(){return this.value},jt.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},jt.isNaN=function(t){return Number.isNaN(t)},vn.isWhitespace=function(t){return t<=32&&t>=0||t==127},vn.toUpperCase=function(t){return t.toUpperCase()},g(T.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),r=T.magnitude(n.hi),s=T.TEN.pow(r);n=n.divide(s),n.gt(T.TEN)?(n=n.divide(T.TEN),r+=1):n.lt(T.ONE)&&(n=n.multiply(T.TEN),r-=1);for(var a=r+1,l=new Ge,d=T.MAX_PRINT_DIGITS-1,v=0;v<=d;v++){t&&v===a&&l.append(".");var w=Math.trunc(n.hi);if(w<0)break;var O=!1,D=0;w>9?(O=!0,D="9"):D="0"+w,l.append(D),n=n.subtract(T.valueOf(w)).multiply(T.TEN),O&&n.selfAdd(T.TEN);var G=!0,K=T.magnitude(n.hi);if(K<0&&Math.abs(K)>=d-v&&(G=!1),!G)break}return e[0]=r,l.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,a=null,l=null,d=null,v=null,w=null,O=null,D=null;return v=this.hi/n,w=T.SPLIT*v,s=w-v,D=T.SPLIT*n,s=w-s,a=v-s,l=D-n,O=v*n,l=D-l,d=n-l,D=s*l-O+s*d+a*l+a*d,w=(this.hi-O-D+this.lo-v*r)/n,D=v+w,this.hi=D,this.lo=v-D+w,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof T){var t=arguments[0],e=null,n=null,r=null,s=null,a=null,l=null,d=null,v=null;a=this.hi/t.hi,l=T.SPLIT*a,e=l-a,v=T.SPLIT*t.hi,e=l-e,n=a-e,r=v-t.hi,d=a*t.hi,r=v-r,s=t.hi-r,v=e*r-d+e*s+n*r+n*s,l=(this.hi-d-v+this.lo-a*t.lo)/t.hi,v=a+l;var w=v,O=a-v+l;return new T(w,O)}if(typeof arguments[0]=="number"){var D=arguments[0];return I.isNaN(D)?T.createNaN():T.copy(this).selfDivide(D,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return T.valueOf(1);var e=new T(this),n=T.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return T.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new T(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof T){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return T.valueOf(0);if(this.isNegative())return T.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=T.valueOf(e),r=this.subtract(n.sqr()),s=r.hi*(.5*t);return n.add(s)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],n=null,r=null,s=null,a=null,l=null,d=null;return s=this.hi+e,l=s-this.hi,a=s-l,a=e-l+(this.hi-a),d=a+this.lo,n=s+d,r=d+(s-n),this.hi=n+r,this.lo=r+(n-this.hi),this}}else if(arguments.length===2){var v=arguments[0],w=arguments[1],n=null,r=null,O=null,D=null,s=null,a=null,l=null,d=null;s=this.hi+v,O=this.lo+w,l=s-this.hi,d=O-this.lo,a=s-l,D=O-d,a=v-l+(this.hi-a),D=w-d+(this.lo-D),l=a+O,n=s+l,r=l+(s-n),l=D+r;var G=n+l,K=l+(n-G);return this.hi=G,this.lo=K,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof T){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,a=null,l=null,d=null,v=null,w=null;v=T.SPLIT*this.hi,s=v-this.hi,w=T.SPLIT*n,s=v-s,a=this.hi-s,l=w-n,v=this.hi*n,l=w-l,d=n-l,w=s*l-v+s*d+a*l+a*d+(this.hi*r+this.lo*n);var O=v+w;s=v-O;var D=w+s;return this.hi=O,this.lo=D,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return T.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new T(t,e)},negate:function(){return this.isNaN()?this:new T(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof T){var t=arguments[0];return t.isNaN()?T.createNaN():T.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return I.isNaN(e)?T.createNaN():T.copy(this).selfMultiply(e,0)}},isNaN:function(){return I.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=T.magnitude(this.hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(r<0)s="0."+T.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var a=r-n.length,l=T.stringOfChar("0",a);s=n+l+".0"}return this.isNegative()?"-"+s:s},reciprocal:function(){var t=null,e=null,n=null,r=null,s=null,a=null,l=null,d=null;s=1/this.hi,a=T.SPLIT*s,t=a-s,d=T.SPLIT*this.hi,t=a-t,e=s-t,n=d-this.hi,l=s*this.hi,n=d-n,r=this.hi-n,d=t*n-l+t*r+e*n+e*r,a=(1-l-d-s*this.lo)/this.hi;var v=s+a,w=s-v+a;return new T(v,w)},toSciNotation:function(){if(this.isZero())return T.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=T.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var a=n.charAt(0)+"."+s;return this.isNegative()?"-"+a+r:a+r},abs:function(){return this.isNaN()?T.NaN:this.isNegative()?this.negate():new T(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof T){var t=arguments[0];return T.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return T.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof T){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.hi=n,this.lo=r}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?T.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[X,k,z]},getClass:function(){return T}}),T.sqr=function(t){return T.valueOf(t).selfMultiply(t)},T.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return T.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new T(e)}},T.sqrt=function(t){return T.valueOf(t).sqrt()},T.parse=function(t){for(var e=0,n=t.length;vn.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var s=t.charAt(e);s!=="-"&&s!=="+"||(e++,s==="-"&&(r=!0))}for(var a=new T,l=0,d=0,v=0;!(e>=n);){var w=t.charAt(e);if(e++,vn.isDigit(w)){var O=w-"0";a.selfMultiply(T.TEN),a.selfAdd(O),l++}else{if(w!=="."){if(w==="e"||w==="E"){var D=t.substring(e);try{v=jt.parseInt(D)}catch(ht){throw ht instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+D+" in string "+t):ht}finally{}break}throw new NumberFormatException("Unexpected character '"+w+"' at position "+e+" in string "+t)}d=l}}var G=a,K=l-d-v;if(K===0)G=a;else if(K>0){var rt=T.TEN.pow(K);G=a.divide(rt)}else if(K<0){var rt=T.TEN.pow(-K);G=a.multiply(rt)}return r?G.negate():G},T.createNaN=function(){return new T(I.NaN,I.NaN)},T.copy=function(t){return new T(t)},T.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),s=Math.pow(10,r);return 10*s<=e&&(r+=1),r},T.stringOfChar=function(t,e){for(var n=new Ge,r=0;r<e;r++)n.append(t);return n.toString()},T.PI=new T(3.141592653589793,12246467991473532e-32),T.TWO_PI=new T(6.283185307179586,24492935982947064e-32),T.PI_2=new T(1.5707963267948966,6123233995736766e-32),T.E=new T(2.718281828459045,14456468917292502e-32),T.NaN=new T(I.NaN,I.NaN),T.EPS=123259516440783e-46,T.SPLIT=134217729,T.MAX_PRINT_DIGITS=32,T.TEN=T.valueOf(10),T.ONE=T.valueOf(1),T.SCI_NOT_EXPONENT_CHAR="E",T.SCI_NOT_ZERO="0.0E0",g(Te.prototype,{interfaces_:function(){return[]},getClass:function(){return Te}}),Te.orientationIndex=function(t,e,n){var r=Te.orientationIndexFilter(t,e,n);if(r<=1)return r;var s=T.valueOf(e.x).selfAdd(-t.x),a=T.valueOf(e.y).selfAdd(-t.y),l=T.valueOf(n.x).selfAdd(-e.x),d=T.valueOf(n.y).selfAdd(-e.y);return s.selfMultiply(d).selfSubtract(a.selfMultiply(l)).signum()},Te.signOfDet2x2=function(t,e,n,r){var s=t.multiply(r).selfSubtract(e.multiply(n));return s.signum()},Te.intersection=function(t,e,n,r){var s=T.valueOf(r.y).selfSubtract(n.y).selfMultiply(T.valueOf(e.x).selfSubtract(t.x)),a=T.valueOf(r.x).selfSubtract(n.x).selfMultiply(T.valueOf(e.y).selfSubtract(t.y)),l=s.subtract(a),d=T.valueOf(r.x).selfSubtract(n.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),v=T.valueOf(r.y).selfSubtract(n.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),w=d.subtract(v),O=w.selfDivide(l).doubleValue(),D=T.valueOf(t.x).selfAdd(T.valueOf(e.x).selfSubtract(t.x).selfMultiply(O)).doubleValue(),G=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(t.y).selfSubtract(n.y)),K=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(t.x).selfSubtract(n.x)),rt=G.subtract(K),ht=rt.selfDivide(l).doubleValue(),Vt=T.valueOf(n.y).selfAdd(T.valueOf(r.y).selfSubtract(n.y).selfMultiply(ht)).doubleValue();return new _(D,Vt)},Te.orientationIndexFilter=function(t,e,n){var r=null,s=(t.x-n.x)*(e.y-n.y),a=(t.y-n.y)*(e.x-n.x),l=s-a;if(s>0){if(a<=0)return Te.signum(l);r=s+a}else{if(!(s<0)||a>=0)return Te.signum(l);r=-s-a}var d=Te.DP_SAFE_EPSILON*r;return l>=d||-l>=d?Te.signum(l):2},Te.signum=function(t){return t>0?1:t<0?-1:0},Te.DP_SAFE_EPSILON=1e-15,g($.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[z]},getClass:function(){return $}}),$.X=0,$.Y=1,$.Z=2,$.M=3,ut.arraycopy=function(t,e,n,r,s){for(var a=0,l=e;l<e+s;l++)n[r+a]=t[l],a++},ut.getProperty=function(t){return{"line.separator":`
`}[t]},g(Ut.prototype,{getY:function(){var t=this.y/this.w;if(I.isNaN(t)||I.isInfinite(t))throw new Tt;return t},getX:function(){var t=this.x/this.w;if(I.isNaN(t)||I.isInfinite(t))throw new Tt;return t},getCoordinate:function(){var t=new _;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.intersection=function(t,e,n,r){var s=t.y-e.y,a=e.x-t.x,l=t.x*e.y-e.x*t.y,d=n.y-r.y,v=r.x-n.x,w=n.x*r.y-r.x*n.y,O=a*w-v*l,D=d*l-s*w,G=s*v-d*a,K=O/G,rt=D/G;if(I.isNaN(K)||I.isInfinite(K)||I.isNaN(rt)||I.isInfinite(rt))throw new Tt;return new _(K,rt)},g(Me.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||W(arguments[0],$))},interfaces_:function(){return[]},getClass:function(){return Me}}),g(At.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return At}}),g(Z.prototype,{isGeometryCollection:function(){return this.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof Z){var t=arguments[0];return t!==null&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Z))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(Z.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t!==null&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION)throw new b},equal:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new Q(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),a=r.next(),l=s.compareTo(a);if(l!==0)return l}return n.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Z.SORTINDEX_MULTIPOINT||this.getSortIndex()===Z.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Z.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[z,k,X]},getClass:function(){return Z}}),Z.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Z.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},Z.serialVersionUID=8763622679187377e3,Z.SORTINDEX_POINT=0,Z.SORTINDEX_MULTIPOINT=1,Z.SORTINDEX_LINESTRING=2,Z.SORTINDEX_LINEARRING=3,Z.SORTINDEX_MULTILINESTRING=4,Z.SORTINDEX_POLYGON=5,Z.SORTINDEX_MULTIPOLYGON=6,Z.SORTINDEX_GEOMETRYCOLLECTION=7,Z.geometryChangedFilter={interfaces_:function(){return[At]},filter:function(t){t.geometryChangedAction()}},g(_t.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return _t}}),g(zt.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return zt}}),g(yn.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[zt]},getClass:function(){return yn}}),g(xr.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[zt]},getClass:function(){return xr}}),g(Ui.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[zt]},getClass:function(){return Ui}}),g(Zi.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[zt]},getClass:function(){return Zi}}),zt.Mod2BoundaryNodeRule=yn,zt.EndPointBoundaryNodeRule=xr,zt.MultiValentEndPointBoundaryNodeRule=Ui,zt.MonoValentEndPointBoundaryNodeRule=Zi,zt.MOD2_BOUNDARY_RULE=new yn,zt.ENDPOINT_BOUNDARY_RULE=new xr,zt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Ui,zt.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Zi,zt.OGC_SFS_BOUNDARY_RULE=zt.MOD2_BOUNDARY_RULE,g(nt.prototype,{interfaces_:function(){return[]},getClass:function(){return nt}}),nt.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},nt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(nt.indexOf(r,e)<0)return r}return null},nt.scroll=function(t,e){var n=nt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);ut.arraycopy(t,n,r,0,t.length-n),ut.arraycopy(t,0,r,t.length-n,n),ut.arraycopy(r,0,t,0,t.length)},nt.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var n=0;n<r.length;n++)if(a.compare(r[n],s[n])!==0)return!1;return!0}},nt.intersection=function(t,e){for(var n=new yt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},nt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},nt.removeRepeatedPoints=function(t){if(!nt.hasRepeatedPoints(t))return t;var e=new yt(t,!1);return e.toCoordinateArray()},nt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var s=t[r];t[r]=t[e-r],t[e-r]=s}},nt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var s=0,n=0;n<t.length;n++)t[n]!==null&&(r[s++]=t[n]);return r},nt.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new _(t[n]);return e}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3],d=arguments[4],n=0;n<d;n++)a[l+n]=new _(r[s+n])},nt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[t.length-n-1];if(r.compareTo(s)!==0)return!1}return!0},nt.envelope=function(t){for(var e=new Q,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},nt.toCoordinateArray=function(t){return t.toArray(nt.coordArrayType)},nt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},nt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},nt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1},nt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0},nt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e},nt.extract=function(t,e,n){e=qt.clamp(e,0,t.length),n=qt.clamp(n,-1,t.length);var r=n-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var a=0,l=e;l<=n;l++)s[a++]=t[l];return s},g(Er.prototype,{compare:function(t,e){var n=t,r=e;return nt.compare(n,r)},interfaces_:function(){return[Y]},getClass:function(){return Er}}),g(Ts.prototype,{compare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var s=nt.compare(n,r),a=nt.isEqualReversed(n,r);return a?0:s},OLDcompare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var s=nt.increasingDirection(n),a=nt.increasingDirection(r),l=s>0?0:n.length-1,d=a>0?0:n.length-1,v=0;v<n.length;v++){var w=n[l].compareTo(r[d]);if(w!==0)return w;l+=s,d+=a}return 0},interfaces_:function(){return[Y]},getClass:function(){return Ts}}),nt.ForwardComparator=Er,nt.BidirectionalComparator=Ts,nt.coordArrayType=new Array(0).fill(null),ci.prototype.get=function(){},ci.prototype.put=function(){},ci.prototype.size=function(){},ci.prototype.values=function(){},ci.prototype.entrySet=function(){},Ms.prototype=new ci,Yi.prototype=new tt,Yi.prototype.contains=function(){},re.prototype=new Yi,re.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var r=this.array_[e];if(r===t)return!0}return!1},re.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},re.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},re.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},re.prototype.size=function(){return this.array_.length},re.prototype.isEmpty=function(){return this.array_.length===0},re.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},re.prototype.iterator=function(){return new Ro(this)};var Ro=function(t){this.hashSet_=t,this.position_=0};Ro.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Wt;return this.hashSet_.array_[this.position_++]},Ro.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Ro.prototype.remove=function(){throw new ee};var Si=0,mr=1;ae.prototype=new Ms,ae.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},ae.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Si,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,s=this.root_;do if(n=s,r=t.compareTo(s.key),r<0)s=s.left;else{if(!(r>0)){var a=s.value;return s.value=e,a}s=s.right}while(s!==null);var l={key:t,left:null,right:null,value:e,parent:n,color:Si,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=l:n.right=l,this.fixAfterInsertion(l),this.size_++,null},ae.prototype.fixAfterInsertion=function(t){for(t.color=mr;t!=null&&t!=this.root_&&t.parent.color==mr;)if(Dt(t)==jr(Dt(Dt(t)))){var e=Rs(Dt(Dt(t)));ao(e)==mr?(nn(Dt(t),Si),nn(e,Si),nn(Dt(Dt(t)),mr),t=Dt(Dt(t))):(t==Rs(Dt(t))&&(t=Dt(t),this.rotateLeft(t)),nn(Dt(t),Si),nn(Dt(Dt(t)),mr),this.rotateRight(Dt(Dt(t))))}else{var e=jr(Dt(Dt(t)));ao(e)==mr?(nn(Dt(t),Si),nn(e,Si),nn(Dt(Dt(t)),mr),t=Dt(Dt(t))):(t==jr(Dt(t))&&(t=Dt(t),this.rotateRight(t)),nn(Dt(t),Si),nn(Dt(Dt(t)),mr),this.rotateLeft(Dt(Dt(t))))}this.root_.color=Si},ae.prototype.values=function(){var t=new M,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=ae.successor(e))!==null;)t.add(e.value);return t},ae.prototype.entrySet=function(){var t=new re,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=ae.successor(e))!==null;)t.add(e);return t},ae.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},ae.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},ae.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},ae.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,n=t;e!==null&&n===e.right;)n=e,e=e.parent;return e},ae.prototype.size=function(){return this.size_},g(Kr.prototype,{interfaces_:function(){return[]},getClass:function(){return Kr}}),Jr.prototype=new Yi,we.prototype=new Jr,we.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var r=this.array_[e];if(r.compareTo(t)===0)return!0}return!1},we.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){var r=this.array_[e];if(r.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},we.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},we.prototype.remove=function(t){throw new ee},we.prototype.size=function(){return this.array_.length},we.prototype.isEmpty=function(){return this.array_.length===0},we.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},we.prototype.iterator=function(){return new Oo(this)};var Oo=function(t){this.treeSet_=t,this.position_=0};Oo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Wt;return this.treeSet_.array_[this.position_++]},Oo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Oo.prototype.remove=function(){throw new ee},_n.sort=function(){var t,e,n,r,s=arguments[0];if(arguments.length===1)return r=function(l,d){return l.compareTo(d)},void s.sort(r);if(arguments.length===2)n=arguments[1],r=function(l,d){return n.compare(l,d)},s.sort(r);else{if(arguments.length===3){e=s.slice(arguments[1],arguments[2]),e.sort();var a=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length));for(s.splice(0,s.length),t=0;t<a.length;t++)s.push(a[t]);return}if(arguments.length===4){for(e=s.slice(arguments[1],arguments[2]),n=arguments[3],r=function(l,d){return n.compare(l,d)},e.sort(r),a=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length)),s.splice(0,s.length),t=0;t<a.length;t++)s.push(a[t]);return}}},_n.asList=function(t){for(var e=new M,n=0,r=t.length;n<r;n++)e.add(t[n]);return e},g(V.prototype,{interfaces_:function(){return[]},getClass:function(){return V}}),V.toDimensionSymbol=function(t){switch(t){case V.FALSE:return V.SYM_FALSE;case V.TRUE:return V.SYM_TRUE;case V.DONTCARE:return V.SYM_DONTCARE;case V.P:return V.SYM_P;case V.L:return V.SYM_L;case V.A:return V.SYM_A}throw new b},V.toDimensionValue=function(t){switch(vn.toUpperCase(t)){case V.SYM_FALSE:return V.FALSE;case V.SYM_TRUE:return V.TRUE;case V.SYM_DONTCARE:return V.DONTCARE;case V.SYM_P:return V.P;case V.SYM_L:return V.L;case V.SYM_A:return V.A}throw new b},V.P=0,V.L=1,V.A=2,V.FALSE=-1,V.TRUE=-2,V.DONTCARE=-3,V.SYM_FALSE="F",V.SYM_TRUE="T",V.SYM_DONTCARE="*",V.SYM_P="0",V.SYM_L="1",V.SYM_A="2",g(xn.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return xn}}),g(fi.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return fi}}),c(vt,Z),g(vt.prototype,{computeEnvelopeInternal:function(){for(var t=new Q,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return Z.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var r=0;r<this.geometries.length;r++)if(!this.geometries[r].equalsExact(n.geometries[r],e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();_n.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=V.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=V.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new we(_n.asList(this.geometries)),n=new we(_n.asList(t.geometries));return this.compare(e,n)}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],a=r,l=this.getNumGeometries(),d=a.getNumGeometries(),v=0;v<l&&v<d;){var w=this.getGeometryN(v),O=a.getGeometryN(v),D=w.compareToSameClass(O,s);if(D!==0)return D;v++}return v<l?1:v<d?-1:0}},apply:function(){if(W(arguments[0],_t))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(W(arguments[0],fi)){var n=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(W(arguments[0],xn)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}else if(W(arguments[0],At)){var s=arguments[0];s.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(s)}},getBoundary:function(){return this.checkNotGeometryCollection(this),S.shouldNeverReachHere(),null},clone:function(){var t=Z.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new vt(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return vt}}),vt.serialVersionUID=-5694727726395021e3,c(ke,vt),g(ke.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&vt.prototype.equalsExact.call(this,t,e)}return vt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?V.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new En(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ke(t,this.factory)},interfaces_:function(){return[Kr]},getClass:function(){return ke}}),ke.serialVersionUID=8166665132445434e3,g(En.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof dt?this.boundaryLineString(this.geom):this.geom instanceof ke?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new M;this.endpointMap=new ae;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);r.getNumPoints()!==0&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var s=this.endpointMap.entrySet().iterator();s.hasNext();){var a=s.next(),l=a.getValue(),d=l.count;this.bnRule.isInBoundary(d)&&e.add(a.getKey())}return nt.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new Qr,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return En}}),En.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new En(t);return e.getBoundary()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new En(n,r);return e.getBoundary()}},g(Qr.prototype,{interfaces_:function(){return[]},getClass:function(){return Qr}}),g(Ve.prototype,{interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return new String(n)},Ve.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Yo,n=new Uo;return t.printStackTrace(n),e.toString()}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],a="",l=new wr(Ve.getStackTrace(r)),d=new lo,v=0;v<s;v++)try{a+=d.readLine()+Ve.NEWLINE}catch(w){if(!(w instanceof uo))throw w;S.shouldNeverReachHere()}finally{}return a}},Ve.split=function(t,e){for(var n=e.length,r=new M,s=""+t,a=s.indexOf(e);a>=0;){var l=s.substring(0,a);r.add(l),s=s.substring(a+n),a=s.indexOf(e)}s.length>0&&r.add(s);for(var d=new Array(r.size()).fill(null),v=0;v<d.length;v++)d[v]=r.get(v);return d},Ve.toString=function(){if(arguments.length===1){var t=arguments[0];return Ve.SIMPLE_ORDINATE_FORMAT.format(t)}},Ve.spaces=function(t){return Ve.chars(" ",t)},Ve.NEWLINE=ut.getProperty("line.separator"),Ve.SIMPLE_ORDINATE_FORMAT=new Zo,g(ne.prototype,{interfaces_:function(){return[]},getClass:function(){return ne}}),ne.copyCoord=function(t,e,n,r){for(var s=Math.min(t.getDimension(),n.getDimension()),a=0;a<s;a++)n.setOrdinate(r,a,t.getOrdinate(e,a))},ne.isRing=function(t){var e=t.size();return e===0||!(e<=3)&&t.getOrdinate(0,$.X)===t.getOrdinate(e-1,$.X)&&t.getOrdinate(0,$.Y)===t.getOrdinate(e-1,$.Y)},ne.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),a=0;a<n;a++)for(var l=0;l<s;l++){var d=t.getOrdinate(a,l),v=e.getOrdinate(a,l);if(!(t.getOrdinate(a,l)===e.getOrdinate(a,l)||I.isNaN(d)&&I.isNaN(v)))return!1}return!0},ne.extend=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();if(ne.copy(e,0,r,0,s),s>0)for(var a=s;a<n;a++)ne.copy(e,s-1,r,a,1);return r},ne.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)ne.swap(t,r,e-r)},ne.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var s=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}},ne.copy=function(t,e,n,r,s){for(var a=0;a<s;a++)ne.copyCoord(t,e+a,n,r+a)},ne.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),r=new Ge;r.append("(");for(var s=0;s<e;s++){s>0&&r.append(" ");for(var a=0;a<n;a++)a>0&&r.append(","),r.append(Ve.toString(t.getOrdinate(s,a)))}return r.append(")"),r.toString()}},ne.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(n<=3)return ne.createClosedRing(t,e,4);var r=e.getOrdinate(0,$.X)===e.getOrdinate(n-1,$.X)&&e.getOrdinate(0,$.Y)===e.getOrdinate(n-1,$.Y);return r?e:ne.createClosedRing(t,e,n+1)},ne.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();ne.copy(e,0,r,0,s);for(var a=s;a<n;a++)ne.copy(e,0,r,a,1);return r},c(dt,Z),g(dt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new Q:this.points.expandEnvelope(new Q)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return Z.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var r=0;r<this.points.size();r++)if(!this.equal(this.points.getCoordinate(r),n.points.getCoordinate(r),e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&ne.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?V.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return q.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();ne.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,n=0,r=0;n<this.points.size()&&r<e.points.size();){var s=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this.points.size()?1:r<e.points.size()?-1:0}if(arguments.length===2){var a=arguments[0],l=arguments[1],e=a;return l.compare(this.points,e.points)}},apply:function(){if(W(arguments[0],_t))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(W(arguments[0],fi)){var n=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(W(arguments[0],xn)){var r=arguments[0];r.filter(this)}else if(W(arguments[0],At)){var s=arguments[0];s.filter(this)}},getBoundary:function(){return new En(this).getBoundary()},isEquivalentClass:function(t){return t instanceof dt},clone:function(){var t=Z.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new dt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new b("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[Kr]},getClass:function(){return dt}}),dt.serialVersionUID=0x2b2b51ba435c8e00,g($r.prototype,{interfaces_:function(){return[]},getClass:function(){return $r}}),c(Zt,Z),g(Zt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new Q;var t=new Q;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return Z.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return V.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return r.compare(this.coordinates,e.coordinates)}},apply:function(){if(W(arguments[0],_t)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(W(arguments[0],fi)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(W(arguments[0],xn)){var n=arguments[0];n.filter(this)}else if(W(arguments[0],At)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=Z.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new Zt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),S.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[$r]},getClass:function(){return Zt}}),Zt.serialVersionUID=4902022702746615e3,g(On.prototype,{interfaces_:function(){return[]},getClass:function(){return On}}),c(Rt,Z),g(Rt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return Z.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];for(var s=0;s<this.holes.length;s++)for(var a=this.holes[s].getCoordinates(),l=0;l<a.length;l++)e++,t[e]=a[l];return t},getArea:function(){var t=0;t+=Math.abs(q.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(q.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var s=t.getY(n);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}for(var a=t.getX(0),l=t.getY(0),n=1;n<=4;n++){var r=t.getX(n),s=t.getY(n),d=r!==a,v=s!==l;if(d===v)return!1;a=r,l=s}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this.shell,s=n.shell;if(!r.equalsExact(s,e)||this.holes.length!==n.holes.length)return!1;for(var a=0;a<this.holes.length;a++)if(!this.holes[a].equalsExact(n.holes[a],e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);_n.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);ut.arraycopy(e.getCoordinates(),0,r,0,r.length);var s=nt.minCoordinate(e.getCoordinates());nt.scroll(r,s),ut.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],q.isCCW(e.getCoordinates())===n&&nt.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(arguments.length===2){var r=arguments[0],s=arguments[1],a=r,e=this.shell,n=a.shell,l=e.compareToSameClass(n,s);if(l!==0)return l;for(var d=this.getNumInteriorRing(),v=a.getNumInteriorRing(),w=0;w<d&&w<v;){var O=this.getInteriorRingN(w),D=a.getInteriorRingN(w),G=O.compareToSameClass(D,s);if(G!==0)return G;w++}return w<d?1:w<v?-1:0}},apply:function(){if(W(arguments[0],_t)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(W(arguments[0],fi)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(W(arguments[0],xn)){var r=arguments[0];r.filter(this)}else if(W(arguments[0],At)){var s=arguments[0];s.filter(this),this.shell.apply(s);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(s)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=Z.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Rt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[On]},getClass:function(){return Rt}}),Rt.serialVersionUID=-0x307ffefd8dc97200,c(Re,vt),g(Re.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&vt.prototype.equalsExact.call(this,t,e)}return vt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return vt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return V.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Re(t,this.factory)},interfaces_:function(){return[$r]},getClass:function(){return Re}}),Re.serialVersionUID=-8048474874175356e3,c(Qt,dt),g(Qt.prototype,{getSortIndex:function(){return Z.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return V.FALSE},isClosed:function(){return!!this.isEmpty()||dt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();ne.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!dt.prototype.isClosed.call(this))throw new b;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Qt.MINIMUM_VALID_SIZE)throw new b("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Qt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.MINIMUM_VALID_SIZE=4,Qt.serialVersionUID=-0x3b229e262367a600,c(ce,vt),g(ce.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&vt.prototype.equalsExact.call(this,t,e)}return vt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new M,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],r=n.getBoundary(),s=0;s<r.getNumGeometries();s++)t.add(r.getGeometryN(s));var a=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(a))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ce(t,this.factory)},interfaces_:function(){return[On]},getClass:function(){return ce}}),ce.serialVersionUID=-0x7a5aa1369171980,g(Ye.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof vt?this.editGeometryCollection(t,e):t instanceof Rt?this.editPolygon(t,e):t instanceof Zt?e.edit(t,this.factory):t instanceof dt?e.edit(t,this.factory):(S.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),r=new M,s=0;s<n.getNumGeometries();s++){var a=this.edit(n.getGeometryN(s),e);a===null||a.isEmpty()||r.add(a)}return n.getClass()===Re?this.factory.createMultiPoint(r.toArray([])):n.getClass()===ke?this.factory.createMultiLineString(r.toArray([])):n.getClass()===ce?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(n===null&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(r===null||r.isEmpty())return this.factory.createPolygon();for(var s=new M,a=0;a<n.getNumInteriorRing();a++){var l=this.edit(n.getInteriorRingN(a),e);l===null||l.isEmpty()||s.add(l)}return this.factory.createPolygon(r,s.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.GeometryEditorOperation=ts,g(rn.prototype,{edit:function(t,e){return t},interfaces_:function(){return[ts]},getClass:function(){return rn}}),g(it.prototype,{edit:function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return n===null?t:t instanceof Qt?e.createLinearRing(n):t instanceof dt?e.createLineString(n):t instanceof Zt?n.length>0?e.createPoint(n[0]):e.createPoint():t},interfaces_:function(){return[ts]},getClass:function(){return it}}),g(es.prototype,{edit:function(t,e){return t instanceof Qt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof dt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[ts]},getClass:function(){return es}}),Ye.NoOpGeometryOperation=rn,Ye.CoordinateOperation=it,Ye.CoordinateSequenceOperation=es,g(qe.prototype,{setOrdinate:function(t,e,n){switch(e){case $.X:this.coordinates[t].x=n;break;case $.Y:this.coordinates[t].y=n;break;case $.Z:this.coordinates[t].z=n;break;default:throw new b}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case $.X:return this.coordinates[t].x;case $.Y:return this.coordinates[t].y;case $.Z:return this.coordinates[t].z}return I.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new _(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new qe(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new qe(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new Ge(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[$,X]},getClass:function(){return qe}}),qe.serialVersionUID=-0xcb44a778db18e00,g(Dn.prototype,{readResolve:function(){return Dn.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new qe(t)}if(W(arguments[0],$)){var e=arguments[0];return new qe(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new qe(n):new qe(n,r)}},interfaces_:function(){return[Me,X]},getClass:function(){return Dn}}),Dn.instance=function(){return Dn.instanceObject},Dn.serialVersionUID=-0x38e49fa6cf6f2e00,Dn.instanceObject=new Dn;var li,Da=Object.defineProperty,Aa=Os({delete:Xi,has:Ho,get:fo,set:Wo,keys:go,values:Ko,entries:ns,forEach:Qo,clear:jo}),Fa=typeof Map<"u"&&Map.prototype.values?Map:Aa;An.prototype=new ci,An.prototype.get=function(t){return this.map_.get(t)||null},An.prototype.put=function(t,e){return this.map_.set(t,e),e},An.prototype.values=function(){for(var t=new M,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},An.prototype.entrySet=function(){var t=new re;return this.map_.entries().forEach(function(e){return t.add(e)}),t},An.prototype.size=function(){return this.map_.size()},g(Mt.prototype,{equals:function(t){if(!(t instanceof Mt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new jt(n).compareTo(new jt(r))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Mt.FLOATING||this.modelType===Mt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Mt.FLOATING?t="Floating":this.modelType===Mt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Mt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(I.isNaN(t))return t;if(this.modelType===Mt.FLOATING_SINGLE){var e=t;return e}return this.modelType===Mt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof _){var n=arguments[0];if(this.modelType===Mt.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Mt.FLOATING?t=16:this.modelType===Mt.FLOATING_SINGLE?t=6:this.modelType===Mt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[X,k]},getClass:function(){return Mt}}),Mt.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},g(Ke.prototype,{readResolve:function(){return Ke.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[X]},getClass:function(){return Ke}}),Ke.serialVersionUID=-552860263173159e4,Ke.nameToTypeMap=new An,Mt.Type=Ke,Mt.serialVersionUID=7777263578777804e3,Mt.FIXED=new Ke("FIXED"),Mt.FLOATING=new Ke("FLOATING"),Mt.FLOATING_SINGLE=new Ke("FLOATING SINGLE"),Mt.maximumPreciseValue=9007199254740992,g(gt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new _(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new _(t.getMinX(),t.getMinY()),new _(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new _(t.getMinX(),t.getMinY()),new _(t.getMinX(),t.getMaxY()),new _(t.getMaxX(),t.getMaxY()),new _(t.getMaxX(),t.getMinY()),new _(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(W(arguments[0],$)){var e=arguments[0];return new dt(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new ke(null,this);if(arguments.length===1){var t=arguments[0];return new ke(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,r=!1,s=t.iterator();s.hasNext();){var a=s.next(),l=a.getClass();e===null&&(e=l),l!==e&&(n=!0),a.isGeometryCollectionOrDerived()&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(gt.toGeometryArray(t));var d=t.iterator().next(),v=t.size()>1;if(v){if(d instanceof Rt)return this.createMultiPolygon(gt.toPolygonArray(t));if(d instanceof dt)return this.createMultiLineString(gt.toLineStringArray(t));if(d instanceof Zt)return this.createMultiPoint(gt.toPointArray(t));S.shouldNeverReachHere("Unhandled class: "+d.getClass().getName())}return d},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(W(arguments[0],$)){var e=arguments[0];return new Zt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new Rt(null,null,this);if(arguments.length===1){if(W(arguments[0],$)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Qt){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];return new Rt(r,s,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new vt(null,this);if(arguments.length===1){var t=arguments[0];return new vt(t,this)}},createGeometry:function(t){var e=new Ye(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this.coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(W(arguments[0],$)){var e=arguments[0];return new Qt(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new ce(null,this);if(arguments.length===1){var t=arguments[0];return new ce(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new Re(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Re(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(W(arguments[0],$)){var n=arguments[0];if(n===null)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),s=0;s<n.size();s++){var a=this.getCoordinateSequenceFactory().create(1,n.getDimension());ne.copy(n,s,a,0,1),r[s]=this.createPoint(a)}return this.createMultiPoint(r)}}},interfaces_:function(){return[X]},getClass:function(){return gt}}),gt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.getDefaultCoordinateSequenceFactory=function(){return Dn.instance()},gt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},gt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},gt.serialVersionUID=-6820524753094096e3;var qn={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};g(is.prototype,{read:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var s=qn.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(s=qn.emptyTypeStr.exec(t),s[2]=void 0),s&&(n=s[1].toLowerCase(),r=s[2],Ls[n]&&(e=Ls[n].apply(this,[r]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!bi[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+bi[e].apply(this,[t])+")"}});var bi={coordinate:function(t){return t.x+" "+t.y},point:function(t){return bi.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+bi.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;n<r;++n)e.push(bi.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;n<r;++n)e.push(bi.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+bi.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+bi.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;n<r;++n)e.push("("+bi.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push("("+bi.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;n<r;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Ls={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(qn.spaces);return this.geometryFactory.createPoint(new _(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;s<a;++s)e=n[s].replace(qn.trimParens,"$1"),r.push(Ls.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;s<a;++s)e=n[s].trim().split(qn.spaces),r.push(new _(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;s<a;++s)e=n[s].trim().split(qn.spaces),r.push(new _(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(qn.parenComma),r=[],s=0,a=n.length;s<a;++s)e=n[s].replace(qn.trimParens,"$1"),r.push(Ls.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,n,r,s,a=t.trim().split(qn.parenComma),l=[],d=0,v=a.length;d<v;++d)e=a[d].replace(qn.trimParens,"$1"),n=Ls.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),d===0?s=r:l.push(r);return this.geometryFactory.createPolygon(s,l)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(qn.doubleParenComma),r=[],s=0,a=n.length;s<a;++s)e=n[s].replace(qn.trimParens,"$1"),r.push(Ls.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],r=0,s=e.length;r<s;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};g(de.prototype,{write:function(t){return this.parser.write(t)}}),g(de,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),g(It.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new Ge;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==It.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=It.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===It.COLLINEAR_INTERSECTION},toString:function(){return de.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+de.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return It}}),It.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),a=-1;if(t.equals(e))a=0;else if(t.equals(n))a=r>s?r:s;else{var l=Math.abs(t.x-e.x),d=Math.abs(t.y-e.y);a=r>s?l:d,a!==0||t.equals(e)||(a=Math.max(l,d))}return S.isTrue(!(a===0&&!t.equals(e)),"Bad distance calculation"),a},It.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=Math.sqrt(r*r+s*s);return S.isTrue(!(a===0&&!t.equals(e)),"Invalid distance calculation"),a},It.DONT_INTERSECT=0,It.DO_INTERSECT=1,It.COLLINEAR=2,It.NO_INTERSECTION=0,It.POINT_INTERSECTION=1,It.COLLINEAR_INTERSECTION=2,c(lt,It),g(lt.prototype,{isInSegmentEnvelopes:function(t){var e=new Q(this.inputLines[0][0],this.inputLines[0][1]),n=new Q(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(arguments.length!==3)return It.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,Q.intersects(e,n,t)&&q.orientationIndex(e,n,t)===0&&q.orientationIndex(n,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=It.POINT_INTERSECTION,null):void(this.result=It.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,r,s){s.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),s.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},safeHCoordinateIntersection:function(t,e,n,r){var s=null;try{s=Ut.intersection(t,e,n,r)}catch(a){if(!(a instanceof Tt))throw a;s=lt.nearestEndpoint(t,e,n,r)}finally{}return s},intersection:function(t,e,n,r){var s=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(s)||(s=new _(lt.nearestEndpoint(t,e,n,r))),this.precisionModel!==null&&this.precisionModel.makePrecise(s),s},smallestInAbsValue:function(t,e,n,r){var s=t,a=Math.abs(s);return Math.abs(e)<a&&(s=e,a=Math.abs(e)),Math.abs(n)<a&&(s=n,a=Math.abs(n)),Math.abs(r)<a&&(s=r),s},checkDD:function(t,e,n,r,s){var a=Te.intersection(t,e,n,r),l=this.isInSegmentEnvelopes(a);ut.out.println("DD in env = "+l+"  --------------------- "+a),s.distance(a)>1e-4&&ut.out.println("Distance = "+s.distance(a))},intersectionWithNormalization:function(t,e,n,r){var s=new _(t),a=new _(e),l=new _(n),d=new _(r),v=new _;this.normalizeToEnvCentre(s,a,l,d,v);var w=this.safeHCoordinateIntersection(s,a,l,d);return w.x+=v.x,w.y+=v.y,w},computeCollinearIntersection:function(t,e,n,r){var s=Q.intersects(t,e,n),a=Q.intersects(t,e,r),l=Q.intersects(n,r,t),d=Q.intersects(n,r,e);return s&&a?(this.intPt[0]=n,this.intPt[1]=r,It.COLLINEAR_INTERSECTION):l&&d?(this.intPt[0]=t,this.intPt[1]=e,It.COLLINEAR_INTERSECTION):s&&l?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||a||d?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):s&&d?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||a||l?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):a&&l?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||s||d?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):a&&d?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||s||l?It.COLLINEAR_INTERSECTION:It.POINT_INTERSECTION):It.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,r,s){var a=t.x<e.x?t.x:e.x,l=t.y<e.y?t.y:e.y,d=t.x>e.x?t.x:e.x,v=t.y>e.y?t.y:e.y,w=n.x<r.x?n.x:r.x,O=n.y<r.y?n.y:r.y,D=n.x>r.x?n.x:r.x,G=n.y>r.y?n.y:r.y,K=a>w?a:w,rt=d<D?d:D,ht=l>O?l:O,Vt=v<G?v:G,le=(K+rt)/2,Zn=(ht+Vt)/2;s.x=le,s.y=Zn,t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},computeIntersect:function(t,e,n,r){if(this._isProper=!1,!Q.intersects(t,e,n,r))return It.NO_INTERSECTION;var s=q.orientationIndex(t,e,n),a=q.orientationIndex(t,e,r);if(s>0&&a>0||s<0&&a<0)return It.NO_INTERSECTION;var l=q.orientationIndex(n,r,t),d=q.orientationIndex(n,r,e);if(l>0&&d>0||l<0&&d<0)return It.NO_INTERSECTION;var v=s===0&&a===0&&l===0&&d===0;return v?this.computeCollinearIntersection(t,e,n,r):(s===0||a===0||l===0||d===0?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:s===0?this.intPt[0]=new _(n):a===0?this.intPt[0]=new _(r):l===0?this.intPt[0]=new _(t):d===0&&(this.intPt[0]=new _(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),It.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return lt}}),lt.nearestEndpoint=function(t,e,n,r){var s=t,a=q.distancePointLine(t,n,r),l=q.distancePointLine(e,n,r);return l<a&&(a=l,s=e),l=q.distancePointLine(n,t,e),l<a&&(a=l,s=n),l=q.distancePointLine(r,t,e),l<a&&(a=l,s=r),s},g(Gt.prototype,{interfaces_:function(){return[]},getClass:function(){return Gt}}),Gt.orientationIndex=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=n.x-e.x,l=n.y-e.y;return Gt.signOfDet2x2(r,s,a,l)},Gt.signOfDet2x2=function(t,e,n,r){var s=null,a=null,l=null;if(s=1,t===0||r===0)return e===0||n===0?0:e>0?n>0?-s:s:n>0?s:-s;if(e===0||n===0)return r>0?t>0?s:-s:t>0?-s:s;if(0<e?0<r?e<=r||(s=-s,a=t,t=n,n=a,a=e,e=r,r=a):e<=-r?(s=-s,n=-n,r=-r):(a=t,t=-n,n=a,a=e,e=-r,r=a):0<r?-e<=r?(s=-s,t=-t,e=-e):(a=-t,t=n,n=a,a=-e,e=r,r=a):e>=r?(t=-t,e=-e,n=-n,r=-r):(s=-s,a=-t,t=-n,n=a,a=-e,e=-r,r=a),0<t){if(!(0<n)||!(t<=n))return s}else{if(0<n||!(t>=n))return-s;s=-s,t=-t,n=-n}for(;;){if(l=Math.floor(n/t),n-=l*t,r-=l*e,r<0)return-s;if(r>e)return s;if(t>n+n){if(e<r+r)return s}else{if(e>r+r)return-s;n=t-n,r=e-r,s=-s}if(r===0)return n===0?0:-s;if(n===0||(l=Math.floor(t/n),t-=l*n,e-=l*r,e<0))return s;if(e>r)return-s;if(n>t+t){if(r<e+e)return-s}else{if(r>e+e)return s;t=n-t,e=r-e,s=-s}if(e===0)return t===0?0:s;if(t===0)return-s}},g(Fn.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var s=t.x-this.p.x,a=t.y-this.p.y,l=e.x-this.p.x,d=e.y-this.p.y,v=Gt.signOfDet2x2(s,a,l,d);if(v===0)return this.isPointOnSegment=!0,null;d<a&&(v=-v),v>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==x.EXTERIOR},getLocation:function(){return this.isPointOnSegment?x.BOUNDARY:this.crossingCount%2===1?x.INTERIOR:x.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Fn}}),Fn.locatePointInRing=function(){if(arguments[0]instanceof _&&W(arguments[1],$)){for(var t=arguments[0],e=arguments[1],n=new Fn(t),r=new _,s=new _,a=1;a<e.size();a++)if(e.getCoordinate(a,r),e.getCoordinate(a-1,s),n.countSegment(r,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof _&&arguments[1]instanceof Array){for(var l=arguments[0],d=arguments[1],n=new Fn(l),a=1;a<d.length;a++){var r=d[a],s=d[a-1];if(n.countSegment(r,s),n.isOnSegment())return n.getLocation()}return n.getLocation()}},g(q.prototype,{interfaces_:function(){return[]},getClass:function(){return q}}),q.orientationIndex=function(t,e,n){return Te.orientationIndex(t,e,n)},q.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var s=t[r].x-n,a=t[r+1].y,l=t[r-1].y;e+=s*(l-a)}return e/2}if(W(arguments[0],$)){var d=arguments[0],v=d.size();if(v<3)return 0;var w=new _,O=new _,D=new _;d.getCoordinate(0,O),d.getCoordinate(1,D);var n=O.x;D.x-=n;for(var e=0,r=1;r<v-1;r++)w.y=O.y,O.x=D.x,O.y=D.y,d.getCoordinate(r+1,D),D.x-=n,e+=O.x*(w.y-D.y);return e/2}},q.distanceLineLine=function(t,e,n,r){if(t.equals(e))return q.distancePointLine(t,n,r);if(n.equals(r))return q.distancePointLine(r,t,e);var s=!1;if(Q.intersects(t,e,n,r)){var a=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(a===0)s=!0;else{var l=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),d=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),v=d/a,w=l/a;(w<0||w>1||v<0||v>1)&&(s=!0)}}else s=!0;return s?qt.min(q.distancePointLine(t,n,r),q.distancePointLine(e,n,r),q.distancePointLine(n,t,e),q.distancePointLine(r,t,e)):0},q.isPointInRing=function(t,e){return q.locatePointInRing(t,e)!==x.EXTERIOR},q.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new _;t.getCoordinate(0,r);for(var s=r.x,a=r.y,l=1;l<e;l++){t.getCoordinate(l,r);var d=r.x,v=r.y,w=d-s,O=v-a;n+=Math.sqrt(w*w+O*O),s=d,a=v}return n},q.isCCW=function(t){var e=t.length-1;if(e<3)throw new b;for(var n=t[0],r=0,s=1;s<=e;s++){var a=t[s];a.y>n.y&&(n=a,r=s)}var l=r;do l-=1,l<0&&(l=e);while(t[l].equals2D(n)&&l!==r);var d=r;do d=(d+1)%e;while(t[d].equals2D(n)&&d!==r);var v=t[l],w=t[d];if(v.equals2D(n)||w.equals2D(n)||v.equals2D(w))return!1;var O=q.computeOrientation(v,n,w);return O===0?v.x>w.x:O>0},q.locatePointInRing=function(t,e){return Fn.locatePointInRing(t,e)},q.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)},q.computeOrientation=function(t,e,n){return q.orientationIndex(t,e,n)},q.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new b;for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=q.distancePointLine(t,e[r],e[r+1]);s<n&&(n=s)}return n}if(arguments.length===3){var a=arguments[0],l=arguments[1],d=arguments[2];if(l.x===d.x&&l.y===d.y)return a.distance(l);var v=(d.x-l.x)*(d.x-l.x)+(d.y-l.y)*(d.y-l.y),w=((a.x-l.x)*(d.x-l.x)+(a.y-l.y)*(d.y-l.y))/v;if(w<=0)return a.distance(l);if(w>=1)return a.distance(d);var O=((l.y-a.y)*(d.x-l.x)-(l.x-a.x)*(d.y-l.y))/v;return Math.abs(O)*Math.sqrt(v)}},q.isOnLine=function(t,e){for(var n=new lt,r=1;r<e.length;r++){var s=e[r-1],a=e[r];if(n.computeIntersection(t,s,a),n.hasIntersection())return!0}return!1},q.CLOCKWISE=-1,q.RIGHT=q.CLOCKWISE,q.COUNTERCLOCKWISE=1,q.LEFT=q.COUNTERCLOCKWISE,q.COLLINEAR=0,q.STRAIGHT=q.COLLINEAR,g(st.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof st){var t=arguments[0],e=q.orientationIndex(this.p0,this.p1,t.p0),n=q.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof _){var r=arguments[0];return q.orientationIndex(this.p0,this.p1,r)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof st))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new lt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof _){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new _(t);var e=this.projectionFactor(t),n=new _;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof st){var r=arguments[0],s=this.projectionFactor(r.p0),a=this.projectionFactor(r.p1);if(s>=1&&a>=1||s<=0&&a<=0)return null;var l=this.project(r.p0);s<0&&(l=this.p0),s>1&&(l=this.p1);var d=this.project(r.p1);return a<0&&(d=this.p0),a>1&&(d=this.p1),new st(l,d)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return q.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return st.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(r<=0)return I.NaN;var s=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return s},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=I.MAX_VALUE,s=null,a=this.closestPoint(t.p0);r=a.distance(t.p0),n[0]=a,n[1]=t.p0;var l=this.closestPoint(t.p1);s=l.distance(t.p1),s<r&&(r=s,n[0]=l,n[1]=t.p1);var d=t.closestPoint(this.p0);s=d.distance(this.p0),s<r&&(r=s,n[0]=this.p0,n[1]=d);var v=t.closestPoint(this.p1);return s=v.distance(this.p1),s<r&&(r=s,n[0]=this.p1,n[1]=v),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return n<r?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=Ut.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof Tt))throw n}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,l=Math.sqrt(s*s+a*a),d=0,v=0;if(e!==0){if(l<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");d=e*s/l,v=e*a/l}var w=n-v,O=r+d,D=new _(w,O);return D},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||I.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof st){var t=arguments[0];return q.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof _){var e=arguments[0];return q.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new _;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return e^r},interfaces_:function(){return[k,X]},getClass:function(){return st}}),st.midPoint=function(t,e){return new _((t.x+e.x)/2,(t.y+e.y)/2)},st.serialVersionUID=0x2d2172135f411c00,g(St.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||St.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||St.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||St.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return t&&this.matrix[x.EXTERIOR][x.INTERIOR]===V.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===V.FALSE},isCoveredBy:function(){var t=St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])||St.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||St.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||St.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]);return t&&this.matrix[x.INTERIOR][x.EXTERIOR]===V.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===V.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.matrix[n][r]=V.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];this.matrix[s][a]=l}},isContains:function(){return St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.EXTERIOR][x.INTERIOR]===V.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===V.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,V.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];this.matrix[s][a]<l&&(this.matrix[s][a]=l)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===V.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===V.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===V.A&&e===V.A||t===V.L&&e===V.L||t===V.L&&e===V.A||t===V.P&&e===V.A||t===V.P&&e===V.L)&&this.matrix[x.INTERIOR][x.INTERIOR]===V.FALSE&&(St.isTrue(this.matrix[x.INTERIOR][x.BOUNDARY])||St.isTrue(this.matrix[x.BOUNDARY][x.INTERIOR])||St.isTrue(this.matrix[x.BOUNDARY][x.BOUNDARY]))},isOverlaps:function(t,e){return t===V.P&&e===V.P||t===V.A&&e===V.A?St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&St.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&St.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):t===V.L&&e===V.L&&this.matrix[x.INTERIOR][x.INTERIOR]===1&&St.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR])&&St.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR])},isEquals:function(t,e){return t===e&&St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&this.matrix[x.INTERIOR][x.EXTERIOR]===V.FALSE&&this.matrix[x.BOUNDARY][x.EXTERIOR]===V.FALSE&&this.matrix[x.EXTERIOR][x.INTERIOR]===V.FALSE&&this.matrix[x.EXTERIOR][x.BOUNDARY]===V.FALSE},toString:function(){for(var t=new Ge("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,V.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new b;for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!St.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[x.INTERIOR][x.INTERIOR]===V.FALSE&&this.matrix[x.INTERIOR][x.BOUNDARY]===V.FALSE&&this.matrix[x.BOUNDARY][x.INTERIOR]===V.FALSE&&this.matrix[x.BOUNDARY][x.BOUNDARY]===V.FALSE},isCrosses:function(t,e){return t===V.P&&e===V.L||t===V.P&&e===V.A||t===V.L&&e===V.A?St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&St.isTrue(this.matrix[x.INTERIOR][x.EXTERIOR]):t===V.L&&e===V.P||t===V.A&&e===V.P||t===V.A&&e===V.L?St.isTrue(this.matrix[x.INTERIOR][x.INTERIOR])&&St.isTrue(this.matrix[x.EXTERIOR][x.INTERIOR]):t===V.L&&e===V.L&&this.matrix[x.INTERIOR][x.INTERIOR]===0},interfaces_:function(){return[z]},getClass:function(){return St}}),St.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===V.SYM_DONTCARE||e===V.SYM_TRUE&&(t>=0||t===V.TRUE)||e===V.SYM_FALSE&&t===V.FALSE||e===V.SYM_P&&t===V.P||e===V.SYM_L&&t===V.L||e===V.SYM_A&&t===V.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],r=arguments[1],s=new St(n);return s.matches(r)}},St.isTrue=function(t){return t>=0||t===V.TRUE};var ka=Object.freeze({Coordinate:_,CoordinateList:yt,Envelope:Q,LineSegment:st,GeometryFactory:gt,Geometry:Z,Point:Zt,LineString:dt,LinearRing:Qt,Polygon:Rt,GeometryCollection:vt,MultiPoint:Re,MultiLineString:ke,MultiPolygon:ce,Dimension:V,IntersectionMatrix:St,PrecisionModel:Mt});g(ct.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(r!==0){e+=r;var s=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*s;var a=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*a}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=q.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new _;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!q.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,r){var s=r?1:-1;ct.centroid3(t,e,n,this.triangleCent3);var a=ct.area2(t,e,n);this.cg3.x+=s*a*this.triangleCent3.x,this.cg3.y+=s*a*this.triangleCent3.y,this.areasum2+=s*a},add:function(){if(arguments[0]instanceof Rt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof Z){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof Zt)this.addPoint(n.getCoordinate());else if(n instanceof dt)this.addLineSegments(n.getCoordinates());else if(n instanceof Rt){var r=n;this.add(r)}else if(n instanceof vt)for(var s=n,e=0;e<s.getNumGeometries();e++)this.add(s.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return ct}}),ct.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},ct.centroid3=function(t,e,n,r){return r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y,null},ct.getCentroid=function(t){var e=new ct(t);return e.getCentroid()},ie.prototype=new Error,ie.prototype.name="EmptyStackException",me.prototype=new pt,me.prototype.add=function(t){return this.array_.push(t),!0},me.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},me.prototype.push=function(t){return this.array_.push(t),t},me.prototype.pop=function(t){if(this.array_.length===0)throw new ie;return this.array_.pop()},me.prototype.peek=function(){if(this.array_.length===0)throw new ie;return this.array_[this.array_.length-1]},me.prototype.empty=function(){return this.array_.length===0},me.prototype.isEmpty=function(){return this.empty()},me.prototype.search=function(t){return this.array_.indexOf(t)},me.prototype.size=function(){return this.array_.length},me.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},g(Yn.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[_t]},getClass:function(){return Yn}}),Yn.filterCoordinates=function(t){for(var e=new Yn,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},g(he.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return _n.sort(t,1,t.length,new Hi(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new yt;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){S.equals(t[0],t[t.length-1]);for(var e=new M,n=null,r=0;r<=t.length-2;r++){var s=t[r],a=t[r+1];s.equals(a)||n!==null&&this.isBetween(n,s,a)||(e.add(s),n=s)}e.add(t[t.length-1]);var l=new Array(e.size()).fill(null);return e.toArray(l)},isBetween:function(t,e,n){return q.computeOrientation(t,e,n)!==0?!1:t.x!==n.x&&(t.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=t.x)||t.y!==n.y&&(t.y<=e.y&&e.y<=n.y||n.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var n=new we,r=0;r<e.length;r++)n.add(e[r]);for(var r=0;r<t.length;r++)q.isPointInRing(t[r],e)||n.add(t[r]);var s=nt.toCoordinateArray(n);return s.length<3?this.padArray3(s):s},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=t.get(n);e[n]=r}return e},grahamScan:function(t){var e=null,n=new me;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var r=3;r<t.length;r++){for(e=n.pop();!n.empty()&&q.computeOrientation(n.peek(),e,t[r])>0;)e=n.pop();e=n.push(e),e=n.push(t[r])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return he}}),he.extractCoordinates=function(t){var e=new Yn;return t.apply(e),e.getCoordinates()},g(Hi.prototype,{compare:function(t,e){var n=t,r=e;return Hi.polarCompare(this.origin,n,r)},interfaces_:function(){return[Y]},getClass:function(){return Hi}}),Hi.polarCompare=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=n.x-t.x,l=n.y-t.y,d=q.computeOrientation(t,e,n);if(d===q.COUNTERCLOCKWISE)return 1;if(d===q.CLOCKWISE)return-1;var v=r*r+s*s,w=a*a+l*l;return v<w?-1:v>w?1:0},he.RadialComparator=Hi,g(pe.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);r!==null&&r instanceof Qt&&!r.isEmpty()||(n=!1);for(var s=new M,a=0;a<t.getNumInteriorRing();a++){var l=this.transformLinearRing(t.getInteriorRingN(a),t);l===null||l.isEmpty()||(l instanceof Qt||(n=!1),s.add(l))}if(n)return this.factory.createPolygon(r,s.toArray([]));var d=new M;return r!==null&&d.add(r),d.addAll(s),this.factory.buildGeometry(d)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new M,r=0;r<t.getNumGeometries();r++){var s=this.transformLineString(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new M,r=0;r<t.getNumGeometries();r++){var s=this.transformPoint(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new M,r=0;r<t.getNumGeometries();r++){var s=this.transformPolygon(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new M,r=0;r<t.getNumGeometries();r++){var s=this.transform(t.getGeometryN(r));s!==null&&(this.pruneEmptyGeometry&&s.isEmpty()||n.add(s))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(gt.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof Zt)return this.transformPoint(t,null);if(t instanceof Re)return this.transformMultiPoint(t,null);if(t instanceof Qt)return this.transformLinearRing(t,null);if(t instanceof dt)return this.transformLineString(t,null);if(t instanceof ke)return this.transformMultiLineString(t,null);if(t instanceof Rt)return this.transformPolygon(t,null);if(t instanceof ce)return this.transformMultiPolygon(t,null);if(t instanceof vt)return this.transformGeometryCollection(t,null);throw new b("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this.factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return pe}}),g(sn.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var s=t.get(r),a=this.findSnapForVertex(s,e);a!==null&&(t.set(r,new _(a)),r===0&&this._isClosed&&t.set(t.size()-1,new _(a)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new yt(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(e.length===0)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var s=e[r],a=this.findSegmentIndexToSnap(s,t);a>=0&&t.add(a+1,new _(s),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=I.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var a=this.seg.distance(t);a<this.snapTolerance&&a<n&&(n=a,r=s)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return sn}}),sn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},g(bt.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),r=new wn(e,n);return r.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),r=new wn(t,n,!0),s=r.transform(this.srcGeom),a=s;return e&&W(a,On)&&(a=s.buffer(0)),a},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new we,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=I.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return bt}}),bt.snap=function(t,e,n){var r=new Array(2).fill(null),s=new bt(t);r[0]=s.snapTo(e,n);var a=new bt(e);return r[1]=a.snapTo(r[0],n),r},bt.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=bt.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Mt.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(arguments.length===2){var s=arguments[0],a=arguments[1];return Math.min(bt.computeOverlaySnapTolerance(s),bt.computeOverlaySnapTolerance(a))}},bt.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*bt.SNAP_PRECISION_FACTOR;return r},bt.snapToSelf=function(t,e,n){var r=new bt(t);return r.snapToSelf(e,n)},bt.SNAP_PRECISION_FACTOR=1e-9,c(wn,pe),g(wn.prototype,{snapLine:function(t,e){var n=new sn(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)},interfaces_:function(){return[]},getClass:function(){return wn}}),g(Ie.prototype,{getCommon:function(){return I.longBitsToDouble(this.commonBits)},add:function(t){var e=I.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=Ie.signExpBits(this.commonBits),this.isFirst=!1,null;var n=Ie.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=Ie.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=Ie.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=I.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,s=r.substring(r.length-64),a=s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]";return a}},interfaces_:function(){return[]},getClass:function(){return Ie}}),Ie.getBit=function(t,e){var n=1<<e;return t&n?1:0},Ie.signExpBits=function(t){return t>>52},Ie.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,s=t&r;return s},Ie.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Ie.getBit(t,r)!==Ie.getBit(e,r))return n;n++}return 52},g(Xn.prototype,{addCommonBits:function(t){var e=new Hn(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new _(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Hn(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Xn}}),g(Wi.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new _(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[_t]},getClass:function(){return Wi}}),g(Hn.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[fi]},getClass:function(){return Hn}}),Xn.CommonCoordinateFilter=Wi,Xn.Translater=Hn,g(Wn.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Wn.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new Wt;var t=this.parent.getGeometryN(this.index++);return t instanceof vt?(this.subcollectionIterator=new Wn(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[j]},getClass:function(){return Wn}}),Wn.isAtomic=function(t){return!(t instanceof vt)},g(jn.prototype,{locateInternal:function(){if(arguments[0]instanceof _&&arguments[1]instanceof Rt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return x.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===x.EXTERIOR)return x.EXTERIOR;if(r===x.BOUNDARY)return x.BOUNDARY;for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),l=this.locateInPolygonRing(t,a);if(l===x.INTERIOR)return x.EXTERIOR;if(l===x.BOUNDARY)return x.BOUNDARY}return x.INTERIOR}if(arguments[0]instanceof _&&arguments[1]instanceof dt){var d=arguments[0],v=arguments[1];if(!v.getEnvelopeInternal().intersects(d))return x.EXTERIOR;var w=v.getCoordinates();return v.isClosed()||!d.equals(w[0])&&!d.equals(w[w.length-1])?q.isOnLine(d,w)?x.INTERIOR:x.EXTERIOR:x.BOUNDARY}if(arguments[0]instanceof _&&arguments[1]instanceof Zt){var O=arguments[0],D=arguments[1],G=D.getCoordinate();return G.equals2D(O)?x.INTERIOR:x.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?q.locatePointInRing(t,e.getCoordinates()):x.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==x.EXTERIOR},updateLocationInfo:function(t){t===x.INTERIOR&&(this.isIn=!0),t===x.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof Zt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof dt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Rt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof ke)for(var n=e,r=0;r<n.getNumGeometries();r++){var s=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ce)for(var a=e,r=0;r<a.getNumGeometries();r++){var l=a.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,l))}else if(e instanceof vt)for(var d=new Wn(e);d.hasNext();){var v=d.next();v!==e&&this.computeLocation(t,v)}},locate:function(t,e){return e.isEmpty()?x.EXTERIOR:e instanceof dt?this.locateInternal(t,e):e instanceof Rt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?x.BOUNDARY:this.numBoundaries>0||this.isIn?x.INTERIOR:x.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return jn}}),g(Kn.prototype,{interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new b;var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof _&&arguments[1]instanceof _){var s=arguments[0],a=arguments[1],l=a.x-s.x,d=a.y-s.y;if(l===0&&d===0)throw new b;return Kn.octant(l,d)}},g(Mi.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return Mi}}),g(Ir.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:Kn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return de.toLineString(new qe(this.pts))},interfaces_:function(){return[Mi]},getClass:function(){return Ir}}),g(Ri.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Ri}}),g(In.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Ri,X]},getClass:function(){return In}}),g(Cr.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Cr}}),g(gi.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return gi}}),g(mt.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return mt}}),g(Kt.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){S.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Ri,X]},getClass:function(){return Kt}}),Kt.serialVersionUID=6493722185909574e3;var hi={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return hi.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?_n.sort(n,e):_n.sort(n);for(var r=t.iterator(),s=0,a=n.length;s<a;s++)r.next(),r.set(n[s])},singletonList:function(t){var e=new M;return e.add(t),e}};g(xt.prototype,{expandToQueue:function(t,e){var n=xt.isComposite(this.boundable1),r=xt.isComposite(this.boundable2);if(n&&r)return xt.area(this.boundable1)>xt.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new b},isLeaves:function(){return!(xt.isComposite(this.boundable1)||xt.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,r){for(var s=t.getChildBoundables(),a=s.iterator();a.hasNext();){var l=a.next(),d=new xt(l,e,this.itemDistance);d.getDistance()<r&&n.add(d)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[k]},getClass:function(){return xt}}),xt.area=function(t){return t.getBounds().getArea()},xt.isComposite=function(t){return t instanceof Kt},g(Jt.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof Kt?n+=this.size(s):s instanceof In&&(n+=1)}return n}},removeItem:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof In&&s.getItem()===e&&(n=s)}return n!==null&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new M:t}if(arguments.length===1){for(var e=arguments[0],n=new M,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof Kt){var a=this.itemsTree(s);a!==null&&n.add(a)}else s instanceof In?n.add(s.getItem()):S.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){S.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new In(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new M;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(S.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var a=r.getChildBoundables().iterator();a.hasNext();){var l=a.next();l instanceof Kt?this.boundablesAtLevel(n,l,s):(S.isTrue(l instanceof In),n===-1&&s.add(l))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new M;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,r)}else if(arguments.length===3){if(W(arguments[2],gi)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt)for(var s=arguments[0],a=arguments[1],l=arguments[2],d=a.getChildBoundables(),v=0;v<d.size();v++){var w=d.get(v);this.getIntersectsOp().intersects(w.getBounds(),s)&&(w instanceof Kt?this.query(s,w,l):w instanceof In?l.visitItem(w.getItem()):S.shouldNeverReachHere())}else if(W(arguments[2],pt)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt)for(var O=arguments[0],D=arguments[1],G=arguments[2],d=D.getChildBoundables(),v=0;v<d.size();v++){var w=d.get(v);this.getIntersectsOp().intersects(w.getBounds(),O)&&(w instanceof Kt?this.query(O,w,G):w instanceof In?G.add(w.getItem()):S.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],a=this.removeItem(r,s);if(a)return!0;for(var l=null,d=r.getChildBoundables().iterator();d.hasNext();){var v=d.next();if(this.getIntersectsOp().intersects(v.getBounds(),n)&&v instanceof Kt&&(a=this.remove(n,v,s))){l=v;break}}return l!==null&&l.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(l),a}},createHigherLevels:function(t,e){S.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof Kt){var s=this.depth(r);s>e&&(e=s)}}return e+1}},createParentBoundables:function(t,e){S.isTrue(!t.isEmpty());var n=new M;n.add(this.createNode(e));var r=new M(t);hi.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var a=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(a)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[X]},getClass:function(){return Jt}}),Jt.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Jt.IntersectsOp=As,Jt.serialVersionUID=-3886435814360241e3,Jt.DEFAULT_NODE_CAPACITY=10,g(ji.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return ji}}),c(kt,Jt),g(kt.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){S.isTrue(t.length>0);for(var n=new M,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},createNode:function(t){return new Cn(t)},size:function(){return arguments.length===0?Jt.prototype.size.call(this):Jt.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Jt.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Jt.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return kt.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),s=t.iterator(),a=0;a<e;a++){r[a]=new M;for(var l=0;s.hasNext()&&l<n;){var d=s.next();r[a].add(d),l++}}return r},query:function(){if(arguments.length===1){var t=arguments[0];return Jt.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];Jt.prototype.query.call(this,e,n)}else if(arguments.length===3){if(W(arguments[2],gi)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt){var r=arguments[0],s=arguments[1],a=arguments[2];Jt.prototype.query.call(this,r,s,a)}else if(W(arguments[2],pt)&&arguments[0]instanceof Object&&arguments[1]instanceof Kt){var l=arguments[0],d=arguments[1],v=arguments[2];Jt.prototype.query.call(this,l,d,v)}}},getComparator:function(){return kt.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Jt.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Jt.prototype.remove.call(this,t,e)}return Jt.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Jt.prototype.depth.call(this):Jt.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){S.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new M(t);hi.sort(r,kt.xComparator);var s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)},nearestNeighbour:function(){if(arguments.length===1){if(W(arguments[0],ji)){var t=arguments[0],e=new xt(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof xt){var n=arguments[0];return this.nearestNeighbour(n,I.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof kt&&W(arguments[1],ji)){var r=arguments[0],s=arguments[1],e=new xt(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof xt&&typeof arguments[1]=="number"){var a=arguments[0],l=arguments[1],d=l,v=null,w=new Cr;for(w.add(a);!w.isEmpty()&&d>0;){var O=w.poll(),D=O.getDistance();if(D>=d)break;O.isLeaves()?(d=D,v=O):O.expandToQueue(w,d)}return[v.getBoundable(0).getItem(),v.getBoundable(1).getItem()]}}else if(arguments.length===3){var G=arguments[0],K=arguments[1],rt=arguments[2],ht=new In(G,K),e=new xt(this.getRoot(),ht,rt);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[mt,X]},getClass:function(){return kt}}),kt.centreX=function(t){return kt.avg(t.getMinX(),t.getMaxX())},kt.avg=function(t,e){return(t+e)/2},kt.centreY=function(t){return kt.avg(t.getMinY(),t.getMaxY())},c(Cn,Kt),g(Cn.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();t===null?t=new Q(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Cn}}),kt.STRtreeNode=Cn,kt.serialVersionUID=0x39920f7d5f261e0,kt.xComparator={interfaces_:function(){return[Y]},compare:function(t,e){return Jt.compareDoubles(kt.centreX(t.getBounds()),kt.centreX(e.getBounds()))}},kt.yComparator={interfaces_:function(){return[Y]},compare:function(t,e){return Jt.compareDoubles(kt.centreY(t.getBounds()),kt.centreY(e.getBounds()))}},kt.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},kt.DEFAULT_NODE_CAPACITY=10,g(Ce.prototype,{interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Ce.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Ce.relativeSign(e.x,n.x),s=Ce.relativeSign(e.y,n.y);switch(t){case 0:return Ce.compareValue(r,s);case 1:return Ce.compareValue(s,r);case 2:return Ce.compareValue(s,-r);case 3:return Ce.compareValue(-r,s);case 4:return Ce.compareValue(-r,-s);case 5:return Ce.compareValue(-s,-r);case 6:return Ce.compareValue(-s,r);case 7:return Ce.compareValue(r,-s)}return S.shouldNeverReachHere("invalid octant value"),0},Ce.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0},g(Oi.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Ce.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[k]},getClass:function(){return Oi}}),g(ve.prototype,{getSplitCoordinates:function(){var t=new yt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new M;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.add(new jt(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex-t.segmentIndex+2;var r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);n.add(new _(t.coord),!1);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)n.add(this.edge.getCoordinate(a));s&&n.add(new _(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,r===1&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var s=n.next(),a=this.findCollapseIndex(r,s,e);a&&t.add(new jt(e[0])),r=s}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);s||n--;var a=new Array(n).fill(null),l=0;a[l++]=new _(t.coord);for(var d=t.segmentIndex+1;d<=e.segmentIndex;d++)a[l++]=this.edge.getCoordinate(d);return s&&(a[l]=new _(e.coord)),new on(a,this.edge.getData())},add:function(t,e){var n=new Oi(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return r!==null?(S.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new F("bad split edge start point at "+r);var s=t.get(t.size()-1),a=s.getCoordinates(),l=a[a.length-1];if(!l.equals2D(e[e.length-1]))throw new F("bad split edge end point at "+l)},interfaces_:function(){return[]},getClass:function(){return ve}}),g(di.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[j]},getClass:function(){return di}}),g(rs.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[Mi]},getClass:function(){return rs}}),g(on.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:Kn.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[3],a=new _(n.getIntersection(s));this.addIntersection(a,r)}},toString:function(){return de.toLineString(new qe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,r=n+1;if(r<this.pts.length){var s=this.pts[r];t.equals2D(s)&&(n=r)}var a=this.nodeList.add(t,n);return a},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[rs]},getClass:function(){return on}}),on.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new M;return on.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[0],r=arguments[1],s=n.iterator();s.hasNext();){var a=s.next();a.getNodeList().addSplitEdges(r)}},g(Nr.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(r,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return Nr}}),g(ss.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,r){var s=this.pts[e],a=this.pts[n];if(r.tempEnv1.init(s,a),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var l=Math.trunc((e+n)/2);e<l&&this.computeSelect(t,e,l,r),l<n&&this.computeSelect(t,l,n,r)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new Q(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,r,s,a){var l=this.pts[t],d=this.pts[e],v=n.pts[r],w=n.pts[s];if(e-t===1&&s-r===1)return a.overlap(this,t,n,r),null;if(a.tempEnv1.init(l,d),a.tempEnv2.init(v,w),!a.tempEnv1.intersects(a.tempEnv2))return null;var O=Math.trunc((t+e)/2),D=Math.trunc((r+s)/2);t<O&&(r<D&&this.computeOverlapsInternal(t,O,n,r,D,a),D<s&&this.computeOverlapsInternal(t,O,n,D,s,a)),O<e&&(r<D&&this.computeOverlapsInternal(O,e,n,r,D,a),D<s&&this.computeOverlapsInternal(O,e,n,D,s,a))},interfaces_:function(){return[]},getClass:function(){return ss}}),g(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),Et.isNorthern=function(t){return t===Et.NE||t===Et.NW},Et.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2},Et.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var r=t<e?t:e,s=t>e?t:e;return r===0&&s===3?3:r},Et.isInHalfPlane=function(t,e){return e===Et.SE?t===Et.SE||t===Et.SW:t===e||t===e+1},Et.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new b;return t>=0?e>=0?Et.NE:Et.SE:e>=0?Et.NW:Et.SW}if(arguments[0]instanceof _&&arguments[1]instanceof _){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new b;return r.x>=n.x?r.y>=n.y?Et.NE:Et.SE:r.y>=n.y?Et.NW:Et.SW}},Et.NE=0,Et.NW=1,Et.SW=2,Et.SE=3,g(an.prototype,{interfaces_:function(){return[]},getClass:function(){return an}}),an.getChainStartIndices=function(t){var e=0,n=new M;n.add(new jt(e));do{var r=an.findChainEnd(t,e);n.add(new jt(r)),e=r}while(e<t.length-1);var s=an.toIntArray(n);return s},an.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Et.quadrant(t[n],t[n+1]),s=e+1;s<t.length;){if(!t[s-1].equals2D(t[s])){var a=Et.quadrant(t[s-1],t[s]);if(a!==r)break}s++}return s-1},an.getChains=function(){if(arguments.length===1){var t=arguments[0];return an.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new M,s=an.getChainStartIndices(e),a=0;a<s.length-1;a++){var l=new ss(e,s[a],s[a+1],n);r.add(l)}return r}},an.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},g(Ki.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Ki}}),g(Ct.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Ki]},getClass:function(){return Ct}}),c(mi,Ct),g(mi.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return on.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=an.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Ue(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this.index.query(n.getEnvelope()),s=r.iterator();s.hasNext();){var a=s.next();if(a.getId()>n.getId()&&(n.computeOverlaps(a,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return mi}}),c(Ue,Nr),g(Ue.prototype,{overlap:function(){if(arguments.length!==4)return Nr.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],s=t.getContext(),a=n.getContext();this.si.processIntersections(s,e,a,r)},interfaces_:function(){return[]},getClass:function(){return Ue}}),mi.SegmentOverlapAction=Ue,c(ye,F),g(ye.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ye}}),ye.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},g(Ji.prototype,{processIntersections:function(t,e,n,r){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ji}}),g(Jn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,r){if(!this.findAllIntersections&&this.hasIntersection()||t===n&&e===r)return null;if(this.isCheckEndSegmentsOnly){var s=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!s)return null}var a=t.getCoordinates()[e],l=t.getCoordinates()[e+1],d=n.getCoordinates()[r],v=n.getCoordinates()[r+1];this.li.computeIntersection(a,l,d,v),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=a,this.intSegments[1]=l,this.intSegments[2]=d,this.intSegments[3]=v,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0||e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return!this.findAllIntersections&&this.interiorIntersection!==null},interfaces_:function(){return[Ji]},getClass:function(){return Jn}}),Jn.createAllIntersectionsFinder=function(t){var e=new Jn(t);return e.setFindAllIntersections(!0),e},Jn.createAnyIntersectionFinder=function(t){return new Jn(t)},Jn.createIntersectionCounter=function(t){var e=new Jn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},g(Di.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Jn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new mi;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new ye(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+de.toLineString(t[0],t[1])+" and "+de.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.computeIntersections=function(t){var e=new Di(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},g(Ai.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Ai}}),Ai.toSegmentStrings=function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ir(r.getCoordinates(),r))}return e},Ai.checkValid=function(t){var e=new Ai(t);e.checkValid()},g(Fi.prototype,{map:function(t){for(var e=new M,n=0;n<t.getNumGeometries();n++){var r=this.mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(gt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.map=function(t,e){var n=new Fi(e);return n.map(t)},g(U.prototype,{interfaces_:function(){return[]},getClass:function(){return U}}),U.opposite=function(t){return t===U.LEFT?U.RIGHT:t===U.RIGHT?U.LEFT:t},U.ON=0,U.LEFT=1,U.RIGHT=2,g(Ze.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==x.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===x.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[U.ON]=this.location[U.ON],e[U.LEFT]=x.NONE,e[U.RIGHT]=x.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===x.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[U.LEFT];this.location[U.LEFT]=this.location[U.RIGHT],this.location[U.RIGHT]=t},toString:function(){var t=new Ge;return this.location.length>1&&t.append(x.toLocationSymbol(this.location[U.LEFT])),t.append(x.toLocationSymbol(this.location[U.ON])),this.location.length>1&&t.append(x.toLocationSymbol(this.location[U.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[U.ON]=t,this.location[U.LEFT]=e,this.location[U.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:x.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===x.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(U.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(x.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Ze}}),g(Ht.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new Ze(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(U.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new Ge;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(U.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Ze(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.toLineLabel=function(t){for(var e=new Ht(x.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},g(Qi.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=q.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(e===null)throw new ye("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ye("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var r=e.getLabel();S.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var r=t.getCoordinates();if(e){var s=1;n&&(s=0);for(var a=s;a<r.length;a++)this.pts.add(r[a])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this.pts.add(r[a])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!q.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var s=r.next();if(s.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=e.getLocation(n,U.RIGHT);if(r===x.NONE)return null;if(this.label.getLocation(n)===x.NONE)return this.label.setLocation(n,r),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var r=t.createPolygon(this.getLinearRing(),e);return r},interfaces_:function(){return[]},getClass:function(){return Qi}}),c(Je,Qi),g(Je.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Je}}),c(Lr,Qi),g(Lr.prototype,{buildMinimalRings:function(){var t=new M,e=this.startDe;do{if(e.getMinEdgeRing()===null){var n=new Je(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Lr}}),g(Qn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){S.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Qn}}),c(Oe,Qn),g(Oe.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=x.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==x.BOUNDARY&&(n=r)}return n},setLabel:function(){if(arguments.length!==2)return Qn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new Ht(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof Oe){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Ht)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n),s=this.label.getLocation(n);s===x.NONE&&this.label.setLocation(n,r)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=x.NONE;this.label!==null&&(e=this.label.getLocation(t));var n=null;switch(e){case x.BOUNDARY:n=x.INTERIOR;break;case x.INTERIOR:n=x.BOUNDARY;break;default:n=x.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return Oe}}),g(ki.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof _){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Oe){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return e===null?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new M,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===x.BOUNDARY&&e.add(r)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return ki}}),g(un.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:q.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Et.quadrant(this.dx,this.dy),S.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[k]},getClass:function(){return un}}),c($n,un),g($n.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Ht(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new ye("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,n=0;n<2;n++)this.label.isArea(n)&&this.label.getLocation(n,U.LEFT)===x.INTERIOR&&this.label.getLocation(n,U.RIGHT)===x.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){un.prototype.print.call(this,t),t.print(" "+this.depth[U.LEFT]+"/"+this.depth[U.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,x.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,x.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===U.LEFT&&(r=-1);var s=U.opposite(t),a=n*r,l=e+a;this.setDepth(t,e),this.setDepth(s,l)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.depthFactor=function(t,e){return t===x.EXTERIOR&&e===x.INTERIOR?1:t===x.INTERIOR&&e===x.EXTERIOR?-1:0},g(Bi.prototype,{createNode:function(t){return new Oe(t,null)},interfaces_:function(){return[]},getClass:function(){return Bi}}),g(ln.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof Oe){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof _){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){ut.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(t)===x.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,r){return!!t.equals(n)&&q.computeOrientation(t,e,r)===q.COLLINEAR&&Et.quadrant(t,e)===Et.quadrant(n,r)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){ut.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1])||this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return r}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new $n(n,!0),s=new $n(n,!1);r.setSym(s),s.setSym(r),this.add(r),this.add(s)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return r}return null},interfaces_:function(){return[]},getClass:function(){return ln}}),ln.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},g(Sr.prototype,{sortShellsAndHoles:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):e.add(s)}},computePolygons:function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next(),s=r.toPolygon(this.geometryFactory);e.add(s)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=this.findEdgeRingContaining(r,t);if(s===null)throw new ye("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}},buildMinimalEdgeRings:function(t,e,n){for(var r=new M,s=t.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var l=a.buildMinimalRings(),d=this.findShell(l);d!==null?(this.placePolygonHoles(d,l),e.add(d)):n.addAll(l)}else r.add(a)}return r},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new Lr(r,this.geometryFactory);e.add(s),s.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,l=null,d=e.iterator();d.hasNext();){var v=d.next(),w=v.getLinearRing(),O=w.getEnvelopeInternal();a!==null&&(l=a.getLinearRing().getEnvelopeInternal());var D=!1;O.contains(r)&&q.isPointInRing(s,w.getCoordinates())&&(D=!0),D&&(a===null||l.contains(O))&&(a=v)}return a},findShell:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,e++)}return S.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];ln.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),s=new M,a=this.buildMinimalEdgeRings(r,this.shellList,s);this.sortShellsAndHoles(a,this.shellList,s),this.placeFreeHoles(this.shellList,s)}},interfaces_:function(){return[]},getClass:function(){return Sr}}),g(Fs.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var r=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!et.isResultOfOp(r,e)||s.isCovered()||(n.add(s),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),s=r.getEdge();if(r.isLineEdge()&&!s.isCoveredSet()){var a=this.op.isCoveredByA(r.getCoordinate());s.setCovered(a)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(S.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(et.isResultOfOp(r,e)&&e===et.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return Fs}}),g(ks.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||n.getEdges().getDegree()!==0&&t!==et.INTERSECTION)){var r=n.getLabel();et.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return ks}}),g($i.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return $i}}),g(Xe.prototype,{locate:function(t){return Xe.locate(t,this.geom)},interfaces_:function(){return[$i]},getClass:function(){return Xe}}),Xe.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&q.isPointInRing(t,e.getCoordinates())},Xe.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Xe.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r);if(Xe.isPointInRing(t,s))return!1}return!0},Xe.containsPoint=function(t,e){if(e instanceof Rt)return Xe.containsPointInPolygon(t,e);if(e instanceof vt)for(var n=new Wn(e);n.hasNext();){var r=n.next();if(r!==e&&Xe.containsPoint(t,r))return!0}return!1},Xe.locate=function(t,e){return e.isEmpty()?x.EXTERIOR:Xe.containsPoint(t,e)?x.INTERIOR:x.EXTERIOR},g(pi.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return e===0&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=x.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();s.isArea(t)&&s.getLocation(t,U.LEFT)!==x.NONE&&(e=s.getLocation(t,U.LEFT))}if(e===x.NONE)return null;for(var a=e,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();if(s.getLocation(t,U.ON)===x.NONE&&s.setLocation(t,U.ON,a),s.isArea(t)){var l=s.getLocation(t,U.LEFT),d=s.getLocation(t,U.RIGHT);if(d!==x.NONE){if(d!==a)throw new ye("side location conflict",r.getCoordinate());l===x.NONE&&S.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),a=l}else S.isTrue(s.getLocation(t,U.LEFT)===x.NONE,"found single null side"),s.setLocation(t,U.RIGHT,a),s.setLocation(t,U.LEFT,a)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){ut.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),s=r.getLocation(t,U.LEFT);S.isTrue(s!==x.NONE,"Found unlabelled area edge");for(var a=s,l=this.iterator();l.hasNext();){var d=l.next(),v=d.getLabel();S.isTrue(v.isArea(t),"Found non-area edge");var w=v.getLocation(t,U.LEFT),O=v.getLocation(t,U.RIGHT);if(w===O||O!==a)return!1;a=w}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new M(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===x.NONE&&(this.ptInAreaLocation[t]=Xe.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new Ge;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),a=0;a<2;a++)s.isLine(a)&&s.getLocation(a)===x.BOUNDARY&&(e[a]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),a=0;a<2;a++)if(s.isAnyNull(a)){var l=x.NONE;if(e[a])l=x.EXTERIOR;else{var d=r.getCoordinate();l=this.getLocation(a,d,t)}s.setAllLocationsIfNull(a,l)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return pi}}),c(br,pi),g(br.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var s=this.resultAreaEdgeList.get(r),a=s.getSym();if(s.getLabel().isArea())switch(t===null&&s.isInResult()&&(t=s),n){case this.SCANNING_FOR_INCOMING:if(!a.isInResult())continue;e=a,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(t===null)throw new ye("no outgoing dirEdge found",this.getCoordinate());S.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(e===1)return n;var r=t.get(e-1),s=n.getQuadrant(),a=r.getQuadrant();return Et.isNorthern(s)&&Et.isNorthern(a)?n:!Et.isNorthern(s)&&!Et.isNorthern(a)?r:n.getDy()!==0?n:r.getDy()!==0?r:(S.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){ut.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new M;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),s=r.getSym();e===null&&(e=s),t!==null&&s.setNext(t),t=r}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(U.LEFT)),r=t.getDepth(U.RIGHT),s=this.computeDepths(e+1,this.edgeList.size(),n),a=this.computeDepths(0,e,s);if(a!==r)throw new ye("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var l=arguments[0],d=arguments[1],v=arguments[2],w=v,O=l;O<d;O++){var D=this.edgeList.get(O);D.getLabel(),D.setEdgeDepths(U.RIGHT,w),w=D.getDepth(U.LEFT)}return w}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,r=this.SCANNING_FOR_INCOMING,s=this.resultAreaEdgeList.size()-1;s>=0;s--){var a=this.resultAreaEdgeList.get(s),l=a.getSym();switch(e===null&&a.getEdgeRing()===t&&(e=a),r){case this.SCANNING_FOR_INCOMING:if(l.getEdgeRing()!==t)continue;n=l,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;n.setNextMin(a),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(S.isTrue(e!==null,"found null for first outgoing dirEdge"),S.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(arguments.length===1){for(var r=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===r&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=x.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=x.INTERIOR;break}if(r.isInResult()){t=x.EXTERIOR;break}}}if(t===x.NONE)return null;for(var s=t,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(s===x.INTERIOR):(n.isInResult()&&(s=x.EXTERIOR),r.isInResult()&&(s=x.INTERIOR))}},computeLabelling:function(t){pi.prototype.computeLabelling.call(this,t),this.label=new Ht(x.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge(),s=r.getLabel(),a=0;a<2;a++){var l=s.getLocation(a);l!==x.INTERIOR&&l!==x.BOUNDARY||this.label.setLocation(a,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return br}}),c(ti,Bi),g(ti.prototype,{createNode:function(t){return new Oe(t,new br)},interfaces_:function(){return[]},getClass:function(){return ti}}),g(ei.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return ei}}),g(kn.prototype,{isDelete:function(){return this.eventType===kn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===kn.INSERT},isSameLabel:function(t){return this.label!==null&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[k]},getClass:function(){return kn}}),kn.INSERT=1,kn.DELETE=2,g(vi.prototype,{interfaces_:function(){return[]},getClass:function(){return vi}}),g(_e.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(_e.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinate();if(t.isIntersection(s))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e!==null&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],l=n.getCoordinates()[r],d=n.getCoordinates()[r+1];this.li.computeIntersection(s,a,l,d),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},c(Pr,vi),g(Pr.prototype,{prepareEvents:function(){hi.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof _e&&W(arguments[0],pt)&&W(arguments[1],pt)){var r=arguments[0],s=arguments[1],a=arguments[2];this.addEdges(r,r),this.addEdges(s,s),this.computeIntersections(a)}else if(typeof arguments[2]=="boolean"&&W(arguments[0],pt)&&arguments[1]instanceof _e){var l=arguments[0],d=arguments[1],v=arguments[2];v?this.addEdges(l,null):this.addEdges(l),this.computeIntersections(d)}}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),s=0;s<r.length-1;s++){var a=new ei(n,s),l=new kn(e,n.getMinX(s),a);this.events.add(l),this.events.add(new kn(n.getMaxX(s),l))}},processOverlaps:function(t,e,n,r){for(var s=n.getObject(),a=t;a<e;a++){var l=this.events.get(a);if(l.isInsert()){var d=l.getObject();n.isSameLabel(l)||(s.computeIntersections(d,r),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(arguments.length===2)for(var r=arguments[0],s=arguments[1],e=r.iterator();e.hasNext();){var n=e.next();this.addEdge(n,s)}},interfaces_:function(){return[]},getClass:function(){return Pr}}),g(yi.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return de.toLineString(new _(this.min,0),new _(this.max,0))},interfaces_:function(){return[]},getClass:function(){return yi}}),g(Bs.prototype,{compare:function(t,e){var n=t,r=e,s=(n.min+n.max)/2,a=(r.min+r.max)/2;return s<a?-1:s>a?1:0},interfaces_:function(){return[Y]},getClass:function(){return Bs}}),yi.NodeComparator=Bs,c(tr,yi),g(tr.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return tr}}),c(er,yi),g(er.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,n),void(this.node2!==null&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return er}}),g(zs.prototype,{buildTree:function(){hi.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new M;;){if(this.buildLevel(t,n),n.size()===1)return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new tr(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){ut.out.println(de.toLineString(new _(t.min,this.level),new _(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),s=n+1<t.size()?t.get(n):null;if(s===null)e.add(r);else{var a=new er(t.get(n),t.get(n+1));e.add(a)}}},interfaces_:function(){return[]},getClass:function(){return zs}}),g(Ne.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Qt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof dt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[At]},getClass:function(){return Ne}}),Ne.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(Ne.getLines(t))}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Ne.getLines(e,n))}},Ne.getLines=function(){if(arguments.length===1){var t=arguments[0];return Ne.getLines(t,!1)}if(arguments.length===2){if(W(arguments[0],tt)&&W(arguments[1],tt)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var s=r.next();Ne.getLines(s,n)}return n}if(arguments[0]instanceof Z&&typeof arguments[1]=="boolean"){var a=arguments[0],l=arguments[1],d=new M;return a.apply(new Ne(d,l)),d}if(arguments[0]instanceof Z&&W(arguments[1],tt)){var v=arguments[0],w=arguments[1];return v instanceof dt?w.add(v):v.apply(new Ne(w)),w}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&W(arguments[0],tt)&&W(arguments[1],tt)){for(var O=arguments[0],D=arguments[1],G=arguments[2],r=O.iterator();r.hasNext();){var s=r.next();Ne.getLines(s,D,G)}return D}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Z&&W(arguments[1],tt)){var K=arguments[0],rt=arguments[1],ht=arguments[2];return K.apply(new Ne(rt,ht)),rt}}},g(Tr.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[gi]},getClass:function(){return Tr}}),g(Mr.prototype,{locate:function(t){var e=new Fn(t),n=new He(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[$i]},getClass:function(){return Mr}}),g(He.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[gi]},getClass:function(){return He}}),g(ni.prototype,{init:function(t){for(var e=Ne.getLines(t),n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinates();this.addLine(s)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new st(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),s=Math.max(n.p0.y,n.p1.y);this.index.insert(r,s,n)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Tr;return this.index.query(t,e,n),n.getItems()}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.index.query(r,s,a)}},interfaces_:function(){return[]},getClass:function(){return ni}}),Mr.SegmentVisitor=He,Mr.IntervalIndexedGeometry=ni,g(Gs.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[k]},getClass:function(){return Gs}}),g(Nn.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(r);s||n--;var a=new Array(n).fill(null),l=0;a[l++]=new _(t.coord);for(var d=t.segmentIndex+1;d<=e.segmentIndex;d++)a[l++]=this.edge.pts[d];return s&&(a[l]=e.coord),new De(a,new Ht(this.edge.label))},add:function(t,e,n){var r=new Gs(t,e,n),s=this.nodeMap.get(r);return s!==null?s:(this.nodeMap.put(r,r),r)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Nn}}),g(Rr.prototype,{getChainStartIndices:function(t){var e=0,n=new M;n.add(new jt(e));do{var r=this.findChainEnd(t,e);n.add(new jt(r)),e=r}while(e<t.length-1);var s=Rr.toIntArray(n);return s},findChainEnd:function(t,e){for(var n=Et.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var s=Et.quadrant(t[r-1],t[r]);if(s!==n)break;r++}return r-1},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},g(_i.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(arguments.length===6){var s=arguments[0],a=arguments[1],l=arguments[2],d=arguments[3],v=arguments[4],w=arguments[5],O=this.pts[s],D=this.pts[a],G=l.pts[d],K=l.pts[v];if(a-s===1&&v-d===1)return w.addIntersections(this.e,s,l.e,d),null;if(this.env1.init(O,D),this.env2.init(G,K),!this.env1.intersects(this.env2))return null;var rt=Math.trunc((s+a)/2),ht=Math.trunc((d+v)/2);s<rt&&(d<ht&&this.computeIntersectsForChain(s,rt,l,d,ht,w),ht<v&&this.computeIntersectsForChain(s,rt,l,ht,v,w)),rt<a&&(d<ht&&this.computeIntersectsForChain(rt,a,l,d,ht,w),ht<v&&this.computeIntersectsForChain(rt,a,l,ht,v,w))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},interfaces_:function(){return[]},getClass:function(){return _i}}),g(hn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(arguments.length===0){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==hn.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this.depth[n][1]===hn.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this.depth[r][s]===hn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},getDelta:function(t){return this.depth[t][U.RIGHT]-this.depth[t][U.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?x.EXTERIOR:x.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var r=t.getLocation(e,n);r!==x.EXTERIOR&&r!==x.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=hn.depthAtLocation(r):this.depth[e][n]+=hn.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];l===x.INTERIOR&&this.depth[s][a]++}},interfaces_:function(){return[]},getClass:function(){return hn}}),hn.depthAtLocation=function(t){return t===x.EXTERIOR?0:t===x.INTERIOR?1:hn.NULL_VALUE},hn.NULL_VALUE=-1,c(De,Qn),g(De.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new De(t,Ht.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof De))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(e.pts[a])||(n=!1),this.pts[a].equals2D(e.pts[--s])||(r=!1),!n&&!r)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){De.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new _i(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new Q;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,r){var s=new _(t.getIntersection(r)),a=e,l=t.getEdgeDistance(n,r),d=a+1;if(d<this.pts.length){var v=this.pts[d];s.equals2D(v)&&(a=d,l=0)}this.eiList.add(s,a,l)},toString:function(){var t=new Ge;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[]},getClass:function(){return De}}),De.updateIM=function(){if(arguments.length!==2)return Qn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,U.ON),t.getLocation(1,U.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,U.LEFT),t.getLocation(1,U.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,U.RIGHT),t.getLocation(1,U.RIGHT),2))},c(Ae,ln),g(Ae.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),r=n.getLabel(),s=1,a=x.NONE;a=r.getLocation(t,U.ON),a===x.BOUNDARY&&s++;var l=Ae.determineBoundary(this.boundaryNodeRule,s);r.setLocation(t,l)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],a=new _e(n,!0,!1);a.setIsDoneIfProperInt(s);var l=this.createEdgeSetIntersector(),d=this.parentGeom instanceof Qt||this.parentGeom instanceof Rt||this.parentGeom instanceof ce,v=r||!d;return l.computeIntersections(this.edges,a,v),this.addSelfIntersectionNodes(this.argIndex),a}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var r=new _e(e,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this.edges,t.edges,r),r},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof Zt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,x.INTERIOR)}else if(arguments[0]instanceof _){var n=arguments[0];this.insertPoint(this.argIndex,n,x.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),x.EXTERIOR,x.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,x.INTERIOR,x.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],x.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],x.BOUNDARY)},addLineString:function(t){var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new De(e,new Ht(this.argIndex,x.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),S.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var s=r.next();e[n++]=s.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===x.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var r=nt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var s=e,a=n;q.isCCW(r)&&(s=n,a=e);var l=new De(r,new Ht(this.argIndex,x.BOUNDARY,s,a));this.lineEdgeMap.put(t,l),this.insertEdge(l),this.insertPoint(this.argIndex,r[0],x.BOUNDARY)},insertPoint:function(t,e,n){var r=this.nodes.addNode(e),s=r.getLabel();s===null?r.label=new Ht(t,n):s.setLocation(t,n)},createEdgeSetIntersector:function(){return new Pr},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.eiList.iterator();s.hasNext();){var a=s.next();this.addSelfIntersectionNode(t,a.coord,r)}},add:function(){if(arguments.length!==1)return ln.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof ce&&(this.useBoundaryDeterminationRule=!1),t instanceof Rt)this.addPolygon(t);else if(t instanceof dt)this.addLineString(t);else if(t instanceof Zt)this.addPoint(t);else if(t instanceof Re)this.addCollection(t);else if(t instanceof ke)this.addCollection(t);else if(t instanceof ce)this.addCollection(t);else{if(!(t instanceof vt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return W(this.parentGeom,On)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new Mr(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return ln.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.determineBoundary=function(t,e){return t.isInBoundary(e)?x.BOUNDARY:x.INTERIOR},g(Ln.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Ln}}),g(xi.prototype,{compareTo:function(t){var e=t,n=xi.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[k]},getClass:function(){return xi}}),xi.orientation=function(t){return nt.increasingDirection(t)===1},xi.compareOriented=function(t,e,n,r){for(var s=e?1:-1,a=r?1:-1,l=e?t.length:-1,d=r?n.length:-1,v=e?0:t.length-1,w=r?0:n.length-1;;){var O=t[v].compareTo(n[w]);if(O!==0)return O;v+=s,w+=a;var D=v===l,G=w===d;if(D&&!G)return-1;if(!D&&G)return 1;if(D&&G)return 0}},g(Sn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),s=0;s<r.length;s++)s>0&&t.print(","),t.print(r[s].x+" "+r[s].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new xi(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new xi(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Sn}}),c(et,Ln),g(et.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ht(t.getLabel()),r.flip());var s=e.getDepth();s.isNull()&&s.add(n),s.add(r),n.merge(r)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,r){var s=new M;return s.addAll(t),s.addAll(e),s.addAll(n),s.isEmpty()?et.createEmptyResult(r,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(s)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=this.ptLocator.locate(t,r);if(s!==x.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new M,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new M;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ai.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Sr(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new Fs(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var s=new ks(this,this.geomFact,this.ptLocator);this.resultPointList=s.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&et.isResultOfOp(r.getLocation(0,U.RIGHT),r.getLocation(1,U.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var s=0;s<2;s++)n.isNull(s)||!n.isArea()||r.isNull(s)||(r.getDelta(s)===0?n.toLine(s):(S.isTrue(!r.isNull(s,U.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(s,U.LEFT,r.getLocation(s,U.LEFT)),S.isTrue(!r.isNull(s,U.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(s,U.RIGHT,r.getLocation(s,U.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(t++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return et}}),et.overlayOp=function(t,e,n){var r=new et(t,e),s=r.getResultGeometry(n);return s},et.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return et.createEmptyResult(et.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Fi.map(t,{interfaces_:function(){return[MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),se.overlayOp(t,e,et.INTERSECTION)},et.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return et.createEmptyResult(et.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),se.overlayOp(t,e,et.SYMDIFFERENCE)},et.resultDimension=function(t,e,n){var r=e.getDimension(),s=n.getDimension(),a=-1;switch(t){case et.INTERSECTION:a=Math.min(r,s);break;case et.UNION:a=Math.max(r,s);break;case et.DIFFERENCE:a=r;break;case et.SYMDIFFERENCE:a=Math.max(r,s)}return a},et.createEmptyResult=function(t,e,n,r){var s=null;switch(et.resultDimension(t,e,n)){case-1:s=r.createGeometryCollection(new Array(0).fill(null));break;case 0:s=r.createPoint();break;case 1:s=r.createLineString();break;case 2:s=r.createPolygon()}return s},et.difference=function(t,e){return t.isEmpty()?et.createEmptyResult(et.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),se.overlayOp(t,e,et.DIFFERENCE))},et.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return et.isResultOfOp(n,r,e)}if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2];switch(s===x.BOUNDARY&&(s=x.INTERIOR),a===x.BOUNDARY&&(a=x.INTERIOR),l){case et.INTERSECTION:return s===x.INTERIOR&&a===x.INTERIOR;case et.UNION:return s===x.INTERIOR||a===x.INTERIOR;case et.DIFFERENCE:return s===x.INTERIOR&&a!==x.INTERIOR;case et.SYMDIFFERENCE:return s===x.INTERIOR&&a!==x.INTERIOR||s!==x.INTERIOR&&a===x.INTERIOR}return!1}},et.INTERSECTION=1,et.UNION=2,et.DIFFERENCE=3,et.SYMDIFFERENCE=4,g(Qe.prototype,{selfSnap:function(t){var e=new bt(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Xn,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=et.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||ut.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=bt.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=bt.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.overlayOp=function(t,e,n){var r=new Qe(t,e);return r.getResultGeometry(n)},Qe.union=function(t,e){return Qe.overlayOp(t,e,et.UNION)},Qe.intersection=function(t,e){return Qe.overlayOp(t,e,et.INTERSECTION)},Qe.symDifference=function(t,e){return Qe.overlayOp(t,e,et.SYMDIFFERENCE)},Qe.difference=function(t,e){return Qe.overlayOp(t,e,et.DIFFERENCE)},g(se.prototype,{getResultGeometry:function(t){var e=null,n=!1,r=null;try{e=et.overlayOp(this.geom[0],this.geom[1],t);var s=!0;s&&(n=!0)}catch(a){if(!(a instanceof F))throw a;r=a}finally{}if(!n)try{e=Qe.overlayOp(this.geom[0],this.geom[1],t)}catch(a){throw a instanceof F?r:a}finally{}return e},interfaces_:function(){return[]},getClass:function(){return se}}),se.overlayOp=function(t,e,n){var r=new se(t,e);return r.getResultGeometry(n)},se.union=function(t,e){return se.overlayOp(t,e,et.UNION)},se.intersection=function(t,e){return se.overlayOp(t,e,et.INTERSECTION)},se.symDifference=function(t,e){return se.overlayOp(t,e,et.SYMDIFFERENCE)},se.difference=function(t,e){return se.overlayOp(t,e,et.DIFFERENCE)},g(cn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,r=this.horizontalBisector(t);if(r.getLength()===0)n=0,e=r.getCoordinate();else{var s=se.overlayOp(r,t,et.INTERSECTION),a=this.widestGeometry(s);n=a.getEnvelopeInternal().getWidth(),e=cn.centre(a.getEnvelopeInternal())}(this.interiorPoint===null||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof vt){var e=arguments[0];if(e.isEmpty())return e;for(var n=e.getGeometryN(0),r=1;r<e.getNumGeometries();r++)e.getGeometryN(r).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(r));return n}if(arguments[0]instanceof Z){var s=arguments[0];return s instanceof vt?this.widestGeometry(s):s}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=We.getBisectorY(t);return this.factory.createLineString([new _(e.getMinX(),n),new _(e.getMaxX(),n)])},add:function(t){if(t instanceof Rt)this.addPolygon(t);else if(t instanceof vt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.centre=function(t){return new _(cn.avg(t.getMinX(),t.getMaxX()),cn.avg(t.getMinY(),t.getMaxY()))},cn.avg=function(t,e){return(t+e)/2},g(We.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=cn.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var r=e.getY(n);this.updateInterval(r)}},interfaces_:function(){return[]},getClass:function(){return We}}),We.getBisectorY=function(t){var e=new We(t);return e.getBisectorY()},cn.SafeBisectorFinder=We,g(os.prototype,{addEndpoints:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof dt)this.addEndpoints(t.getCoordinates());else if(t instanceof vt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]),this.add(r[r.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof dt)this.addInterior(t.getCoordinates());else if(t instanceof vt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var r=arguments[0],n=1;n<r.length-1;n++)this.add(r[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new _(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return os}}),g(ii.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof Zt)this.add(t.getCoordinate());else if(t instanceof vt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof _){var r=arguments[0],s=r.distance(this.centroid);s<this.minDistance&&(this.interiorPoint=new _(r),this.minDistance=s)}},interfaces_:function(){return[]},getClass:function(){return ii}}),g(Ei.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return Ei}}),g(xe.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;r<2;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},g($e.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof $e){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n>=this.min&&r<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return $e}}),wi.exponent=function(t){return Vs(64,t)-1023},wi.powerOf2=function(t){return Math.pow(2,t)},g(Ii.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Ii.computeLevel(t),this.interval=new $e,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=wi.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.computeLevel=function(t){var e=t.getWidth(),n=wi.exponent(e)+1;return n},c(bn,xe),g(bn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=xe.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){S.isTrue(this.interval===null||this.interval.contains(t.interval));var e=xe.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=xe.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var r=new $e(e,n),s=new bn(r,this.level-1);return s},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.createNode=function(t){var e=new Ii(t),n=new bn(e.getInterval(),e.getLevel());return n},bn.createExpanded=function(t,e){var n=new $e(e);t!==null&&n.expandToInclude(t.interval);var r=bn.createNode(n);return t!==null&&r.insert(t),r},g(Pn.prototype,{interfaces_:function(){return[]},getClass:function(){return Pn}}),Pn.isZeroWidth=function(t,e){var n=e-t;if(n===0)return!0;var r=Math.max(Math.abs(t),Math.abs(e)),s=n/r,a=wi.exponent(s);return a<=Pn.MIN_BINARY_EXPONENT},Pn.MIN_BINARY_EXPONENT=-50,c(Tn,xe),g(Tn.prototype,{insert:function(t,e){var n=xe.getSubnodeIndex(t,Tn.origin);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getInterval().contains(t)){var s=bn.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){S.isTrue(t.getInterval().contains(e));var r=Pn.isZeroWidth(e.getMin(),e.getMax()),s=null;s=r?t.find(e):t.getNode(e),s.add(n)},interfaces_:function(){return[]},getClass:function(){return Tn}}),Tn.origin=0,g(ri.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=ri.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new $e(t,t))}if(arguments[0]instanceof $e){var e=arguments[0],n=new M;return this.query(e,n),n}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.root.addAllItemsFromOverlapping(r,s)}},iterator:function(){var t=new M;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=ri.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.ensureExtent=function(t,e){var n=t.getMin(),r=t.getMax();return n!==r?t:(n===r&&(n-=e/2,r=n+e/2),new $e(n,r))},g(Or.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return Or}}),g(nr.prototype,{testLineSegment:function(t,e){var n=null,r=null,s=null,a=null,l=null,d=e.p0,v=e.p1;r=d.x-t.x,s=d.y-t.y,a=v.x-t.x,l=v.y-t.y,(s>0&&l<=0||l>0&&s<=0)&&(n=Gt.signOfDet2x2(r,s,a,l)/(l-s),0<n&&this.crossings++)},buildIndex:function(){this.tree=new ri;for(var t=nt.removeRepeatedPoints(this.ring.getCoordinates()),e=an.getChains(t),n=0;n<e.size();n++){var r=e.get(n),s=r.getEnvelope();this.interval.min=s.getMinY(),this.interval.max=s.getMaxY(),this.tree.insert(this.interval,r)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new Q(I.NEGATIVE_INFINITY,I.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new Dr(this,t),s=n.iterator();s.hasNext();){var a=s.next();this.testMonotoneChain(e,r,a)}return this.crossings%2===1},interfaces_:function(){return[Or]},getClass:function(){return nr}}),c(Dr,Ei),g(Dr.prototype,{select:function(){if(arguments.length!==1)return Ei.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Dr}}),nr.MCSelecter=Dr,g(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),ot.toDegrees=function(t){return 180*t/Math.PI},ot.normalize=function(t){for(;t>Math.PI;)t-=ot.PI_TIMES_2;for(;t<=-Math.PI;)t+=ot.PI_TIMES_2;return t},ot.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,s=n.y-e.y;return Math.atan2(s,r)}},ot.isAcute=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=n.x-e.x,l=n.y-e.y,d=r*a+s*l;return d>0},ot.isObtuse=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=n.x-e.x,l=n.y-e.y,d=r*a+s*l;return d<0},ot.interiorAngle=function(t,e,n){var r=ot.angle(e,t),s=ot.angle(e,n);return Math.abs(s-r)},ot.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ot.PI_TIMES_2;t>=ot.PI_TIMES_2&&(t=0)}else{for(;t>=ot.PI_TIMES_2;)t-=ot.PI_TIMES_2;t<0&&(t=0)}return t},ot.angleBetween=function(t,e,n){var r=ot.angle(e,t),s=ot.angle(e,n);return ot.diff(r,s)},ot.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},ot.toRadians=function(t){return t*Math.PI/180},ot.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ot.COUNTERCLOCKWISE:n<0?ot.CLOCKWISE:ot.NONE},ot.angleBetweenOriented=function(t,e,n){var r=ot.angle(e,t),s=ot.angle(e,n),a=s-r;return a<=-Math.PI?a+ot.PI_TIMES_2:a>Math.PI?a-ot.PI_TIMES_2:a},ot.PI_TIMES_2=2*Math.PI,ot.PI_OVER_2=Math.PI/2,ot.PI_OVER_4=Math.PI/4,ot.COUNTERCLOCKWISE=q.COUNTERCLOCKWISE,ot.CLOCKWISE=q.CLOCKWISE,ot.NONE=q.COLLINEAR,g(Ft.prototype,{area:function(){return Ft.area(this.p0,this.p1,this.p2)},signedArea:function(){return Ft.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new b;return Ft.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Ft.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Ft.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Ft.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Ft.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Ft.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Ft.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Ft}}),Ft.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ft.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ft.det=function(t,e,n,r){return t*r-e*n},Ft.interpolateZ=function(t,e,n,r){var s=e.x,a=e.y,l=n.x-s,d=r.x-s,v=n.y-a,w=r.y-a,O=l*w-d*v,D=t.x-s,G=t.y-a,K=(w*D-d*G)/O,rt=(-v*D+l*G)/O,ht=e.z+K*(n.z-e.z)+rt*(r.z-e.z);return ht},Ft.longestSideLength=function(t,e,n){var r=t.distance(e),s=e.distance(n),a=n.distance(t),l=r;return s>l&&(l=s),a>l&&(l=a),l},Ft.isAcute=function(t,e,n){return!!ot.isAcute(t,e,n)&&!!ot.isAcute(e,n,t)&&!!ot.isAcute(n,t,e)},Ft.circumcentre=function(t,e,n){var r=n.x,s=n.y,a=t.x-r,l=t.y-s,d=e.x-r,v=e.y-s,w=2*Ft.det(a,l,d,v),O=Ft.det(l,a*a+l*l,v,d*d+v*v),D=Ft.det(a,a*a+l*l,d,d*d+v*v),G=r-O/w,K=s+D/w;return new _(G,K)},Ft.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,s=new Ut(t.x+n/2,t.y+r/2,1),a=new Ut(t.x-r+n/2,t.y+n+r/2,1);return new Ut(s,a)},Ft.angleBisector=function(t,e,n){var r=e.distance(t),s=e.distance(n),a=r/(r+s),l=n.x-t.x,d=n.y-t.y,v=new _(t.x+a*l,t.y+a*d);return v},Ft.area3D=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=e.z-t.z,l=n.x-t.x,d=n.y-t.y,v=n.z-t.z,w=s*v-a*d,O=a*l-r*v,D=r*d-s*l,G=w*w+O*O+D*D,K=Math.sqrt(G)/2;return K},Ft.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,s=(t.y+e.y+n.y)/3;return new _(r,s)},Ft.inCentre=function(t,e,n){var r=e.distance(n),s=t.distance(n),a=t.distance(e),l=r+s+a,d=(r*t.x+s*e.x+a*n.x)/l,v=(r*t.y+s*e.y+a*n.y)/l;return new _(d,v)},g(Bn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var n=this.input.getCoordinates();return this.extremalPts=[new _(n[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),n=e;if(e[0].equals2D(e[e.length-1])&&(n=new Array(e.length-1).fill(null),nt.copyDeep(e,0,n,0,e.length-1)),n.length<=2)return this.extremalPts=nt.copyDeep(n),null;for(var r=Bn.lowestPoint(n),s=Bn.pointWitMinAngleWithX(n,r),a=0;a<n.length;a++){var l=Bn.pointWithMinAngleWithSegment(n,r,s);if(ot.isObtuse(r,l,s))return this.extremalPts=[new _(r),new _(s)],null;if(ot.isObtuse(l,r,s))r=l;else{if(!ot.isObtuse(l,s,r))return this.extremalPts=[new _(r),new _(s),new _(l)],null;s=l}}S.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new _((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Ft.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.pointWitMinAngleWithX=function(t,e){for(var n=I.MAX_VALUE,r=null,s=0;s<t.length;s++){var a=t[s];if(a!==e){var l=a.x-e.x,d=a.y-e.y;d<0&&(d=-d);var v=Math.sqrt(l*l+d*d),w=d/v;w<n&&(n=w,r=a)}}return r},Bn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Bn.pointWithMinAngleWithSegment=function(t,e,n){for(var r=I.MAX_VALUE,s=null,a=0;a<t.length;a++){var l=t[a];if(l!==e&&l!==n){var d=ot.angleBetween(e,l,n);d<r&&(r=d,s=l)}}return s},g(Le.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof Rt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=I.MAX_VALUE;for(var e=1,n=new st,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new he(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var r=e.distancePerpendicular(t[n]),s=r,a=n,l=a;s>=r;)r=s,a=l,l=Le.nextIndex(t,a),s=e.distancePerpendicular(t[l]);return r<this.minWidth&&(this.minPtIndex=a,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new st(e)),a},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=I.MAX_VALUE,r=-I.MAX_VALUE,s=I.MAX_VALUE,a=-I.MAX_VALUE,l=0;l<this.convexHullPts.length;l++){var d=Le.computeC(t,e,this.convexHullPts[l]);d>r&&(r=d),d<n&&(n=d);var v=Le.computeC(-e,t,this.convexHullPts[l]);v>a&&(a=v),v<s&&(s=v)}var w=Le.computeSegmentForLine(-t,-e,a),O=Le.computeSegmentForLine(-t,-e,s),D=Le.computeSegmentForLine(-e,t,r),G=Le.computeSegmentForLine(-e,t,n),K=D.lineIntersection(w),rt=G.lineIntersection(w),ht=G.lineIntersection(O),Vt=D.lineIntersection(O),le=this.inputGeom.getFactory().createLinearRing([K,rt,ht,Vt,K]);return this.inputGeom.getFactory().createPolygon(le,null)},interfaces_:function(){return[]},getClass:function(){return Le}}),Le.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Le.computeC=function(t,e,n){return t*n.y-e*n.x},Le.getMinimumDiameter=function(t){return new Le(t).getDiameter()},Le.getMinimumRectangle=function(t){return new Le(t).getMinimumRectangle()},Le.computeSegmentForLine=function(t,e,n){var r=null,s=null;return Math.abs(e)>Math.abs(t)?(r=new _(0,n/e),s=new _(1,n/e-t/e)):(r=new _(n/t,0),s=new _(n/t-e/t,1)),new st(r,s)};var Ba=Object.freeze({Centroid:ct,CGAlgorithms:q,ConvexHull:he,InteriorPointArea:cn,InteriorPointLine:os,InteriorPointPoint:ii,RobustLineIntersector:lt,MCPointInRing:nr,MinimumBoundingCircle:Bn,MinimumDiameter:Le});g(si.prototype,{getResultGeometry:function(){return new Ar(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new b;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return si}}),si.densifyPoints=function(t,e,n){for(var r=new st,s=new yt,a=0;a<t.length-1;a++){r.p0=t[a],r.p1=t[a+1],s.add(r.p0,!1);var l=r.getLength(),d=Math.trunc(l/e)+1;if(d>1)for(var v=l/d,w=1;w<d;w++){var O=w*v/l,D=r.pointAlong(O);n.makePrecise(D),s.add(D,!1)}}return s.add(t[t.length-1],!1),s.toCoordinateArray()},si.densify=function(t,e){var n=new si(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Ar,pe),g(Ar.prototype,{transformMultiPolygon:function(t,e){var n=pe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=pe.prototype.transformPolygon.call(this,t,e);return e instanceof ce?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=si.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof dt&&r.length===1&&(r=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(r)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Ar}}),si.DensifyTransformer=Ar;var za=Object.freeze({Densifier:si});g(Ee.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var r=n.oNext(),s=r.compareTo(t);if(s!==e||r===this)return n.insertAfter(t),null;n=r}while(n!==this);S.shouldNeverReachHere()},insertAfter:function(t){S.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,n=this;do e++,n=n.oNext();while(n!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),r=t.deltaX(),s=t.deltaY();if(e===r&&n===s)return 0;var a=Et.quadrant(e,n),l=Et.quadrant(r,s);return a>l?1:a<l?-1:q.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Ee.create=function(t,e){var n=new Ee(t),r=new Ee(e);return n.init(r),n},c(Se,Ee),g(Se.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return Se}}),Se.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},Se.isMarked=function(t){return t.isMarked()},Se.setMark=function(t,e){t.setMark(e)},Se.markBoth=function(t){t.mark(),t.sym().mark()},Se.mark=function(t){t.mark()},g(ir.prototype,{insert:function(t,e,n){var r=this.create(t,e);n!==null?n.insert(r):this.vertexMap.put(t,r);var s=this.vertexMap.get(e);return s!==null?s.insert(r.sym()):this.vertexMap.put(e,r.sym()),r},create:function(t,e){var n=this.createEdge(t),r=this.createEdge(e);return Ee.init(n,r),n},createEdge:function(t){return new Ee(t)},addEdge:function(t,e){if(!ir.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),r=null;if(n!==null&&(r=n.find(e)),r!==null)return r;var s=this.insert(t,e,n);return s},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return n===null?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.isValidEdge=function(t,e){var n=e.compareTo(t);return n!==0},c(zi,Se),g(zi.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return zi}}),c(as,ir),g(as.prototype,{createEdge:function(t){return new zi(t)},interfaces_:function(){return[]},getClass:function(){return as}}),g(rr.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new yt,n=t;for(e.add(n.orig().copy(),!1);n.sym().degree()===2;){var r=n.next();if(r===t)break;e.add(r.orig().copy(),!1),n=r}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new yt,n=t;for(this.ringStartEdge=null,Se.markBoth(n),e.add(n.orig().copy(),!1);n.sym().degree()===2;){this.updateRingStartEdge(n);var r=n.next();if(r===t)return this.buildRing(this.ringStartEdge),null;e.add(r.orig().copy(),!1),n=r,Se.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do Se.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();Se.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();Se.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];t.apply({interfaces_:function(){return[At]},filter:function(v){v instanceof dt&&this.add(v)}})}else if(W(arguments[0],tt))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}else if(arguments[0]instanceof dt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory());for(var a=s.getCoordinateSequence(),l=!1,n=1;n<a.size();n++){var d=this.graph.addEdge(a.getCoordinate(n-1),a.getCoordinate(n));d!==null&&(l||(d.setStart(),l=!0))}}},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.dissolve=function(t){var e=new rr;return e.add(t),e.getResult()};var Ga=Object.freeze({LineDissolver:rr}),Va=Object.freeze({GeometryGraph:Ae});g(Mn.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)this.subnode[n]!==null&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;r<4;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)this.subnode[n]!==null&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var n=0;n<4;n++)this.subnode[n]!==null&&(this.subnode[n].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[X]},getClass:function(){return Mn}}),Mn.getSubnodeIndex=function(t,e,n){var r=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r},g(oi.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=oi.computeQuadLevel(t),this.env=new Q,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=wi.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/r)*r,this.pt.y=Math.floor(n.getMinY()/r)*r,this.env.init(this.pt.x,this.pt.x+r,this.pt.y,this.pt.y+r)}},getEnvelope:function(){return this.env},getCentre:function(){return new _((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),r=e>n?e:n,s=wi.exponent(r)+1;return s},c(ai,Mn),g(ai.prototype,{find:function(t){var e=Mn.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=Mn.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,r=0,s=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,r=this.env.getMinY(),s=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),r=this.env.getMinY(),s=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,r=this.centrey,s=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),r=this.centrey,s=this.env.getMaxY()}var a=new Q(e,n,r,s),l=new ai(a,this.level-1);return l},insertNode:function(t){S.isTrue(this.env===null||this.env.contains(t.env));var e=Mn.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.createNode=function(t){var e=new oi(t),n=new ai(e.getEnvelope(),e.getLevel());return n},ai.createExpanded=function(t,e){var n=new Q(e);t!==null&&n.expandToInclude(t.env);var r=ai.createNode(n);return t!==null&&r.insertNode(t),r},c(fn,Mn),g(fn.prototype,{insert:function(t,e){var n=Mn.getSubnodeIndex(t,fn.origin.x,fn.origin.y);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getEnvelope().contains(t)){var s=ai.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){S.isTrue(t.getEnvelope().contains(e));var r=Pn.isZeroWidth(e.getMinX(),e.getMaxX()),s=Pn.isZeroWidth(e.getMinY(),e.getMaxY()),a=null;a=r||s?t.find(e):t.getNode(e),a.add(n)},interfaces_:function(){return[]},getClass:function(){return fn}}),fn.origin=new _(0,0),g(ui.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=ui.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new Tr;return this.query(t,e),e.getItems()}if(arguments.length===2){var n=arguments[0],r=arguments[1];this.root.visit(n,r)}},queryAll:function(){var t=new M;return this.root.addAllItems(t),t},remove:function(t,e){var n=ui.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[mt,X]},getClass:function(){return ui}}),ui.ensureExtent=function(t,e){var n=t.getMinX(),r=t.getMaxX(),s=t.getMinY(),a=t.getMaxY();return n!==r&&s!==a?t:(n===r&&(n-=e/2,r=n+e/2),s===a&&(s-=e/2,a=s+e/2),new Q(n,r,s,a))},ui.serialVersionUID=-7461163625812743e3;var qa=Object.freeze({Quadtree:ui}),Ua=Object.freeze({STRtree:kt}),Za=Object.freeze({quadtree:qa,strtree:Ua}),Ya=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];g(us.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var n=e.type;if(!Un[n])throw new Error("Unknown GeoJSON type: "+e.type);return Ya.indexOf(n)!==-1?Un[n].apply(this,[e.coordinates]):n==="GeometryCollection"?Un[n].apply(this,[e.geometries]):Un[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!Pi[e])throw new Error("Geometry is not supported");return Pi[e].apply(this,[t])}});var Un={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Un[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Un.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var n=[],r=0;r<e.length;++r){var s=e[r];n.push(new _(s[0],s[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new _(t[0],t[1]),new _(t[2],t[1]),new _(t[2],t[3]),new _(t[0],t[3]),new _(t[0],t[1])])},Point:function(t){var e=new _(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Un.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Un.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Un.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Un.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],s=1;s<t.length;++s){var a=t[s],l=Un.coordinates.apply(this,[a]),d=this.geometryFactory.createLinearRing(l);r.push(d)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Un.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Pi={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=Pi.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=Pi.Point.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var s=n[r];e.push(Pi.coordinate.apply(this,[s]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=Pi.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Pi.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var s=t.holes[r],a=Pi.LineString.apply(this,[s]);e.push(a.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=Pi.Polygon.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=r.getGeometryType();e.push(Pi[s].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};g(mo.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Mt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),g(zn.prototype,{write:function(t){return this.parser.write(t)}}),g(qs.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Mt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var r=0,s=t.geometries.length;r<s;r++)this.reducePrecision(t.geometries[r])}}),g(or.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new _(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new _(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new _(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,r=[],s=0;s<e.length;s++){var a=this.convertFromLinearRing(e[s]);s===0?n=a:r.push(a)}return this.geometryFactory.createPolygon(n,r)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(sr);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(sr);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(sr)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(sr));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(sr))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var r=t.geometries[n];e.push(this.write(r))}return new this.ol.geom.GeometryCollection(e)}});var Xa=Object.freeze({GeoJSONReader:mo,GeoJSONWriter:zn,OL3Parser:or,WKTReader:qs,WKTWriter:de});g(Fr.prototype,{rescale:function(){if(W(arguments[0],tt))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var r=arguments[0];r.length===2&&(new _(r[0]),new _(r[1]));for(var e=0;e<r.length;e++)r[e].x=r[e].x/this.scaleFactor+this.offsetX,r[e].y=r[e].y/this.scaleFactor+this.offsetY;r.length===2&&r[0].equals2D(r[1])&&ut.out.println(r)}},scale:function(){if(W(arguments[0],tt)){for(var t=arguments[0],e=new M,n=t.iterator();n.hasNext();){var r=n.next();e.add(new on(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),n=0;n<s.length;n++)a[n]=new _(Math.round((s[n].x-this.offsetX)*this.scaleFactor),Math.round((s[n].y-this.offsetY)*this.scaleFactor),s[n].z);var l=nt.removeRepeatedPoints(a);return l}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Ki]},getClass:function(){return Fr}});var Ha=Object.freeze({MCIndexNoder:mi,ScaledNoder:Fr,SegmentString:Mi});g(Ci.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new we,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n),s=r.getCoordinate();if(e.contains(s))return this.nonSimpleLocation=s,!1;e.add(s)}return!0},isSimplePolygonal:function(t){for(var e=Ne.getLines(t),n=e.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new ae,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),s=(r.getMaximumSegmentIndex(),r.isClosed()),a=r.getCoordinate(0);this.addEndpoint(e,a,s);var l=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,l,s)}for(var n=e.values().iterator();n.hasNext();){var d=n.next();if(d.isClosed&&d.degree!==2)return this.nonSimpleLocation=d.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Ae(0,t),n=new lt,r=e.computeSelfNodes(n,!0);return!r.hasIntersection()||(r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):!this.hasNonEndpointIntersection(e)&&(!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next();if(!a.isEndPoint(r))return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var r=t.get(e);r===null&&(r=new Ni(e),t.put(e,r)),r.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof dt?this.isSimpleLinearGeometry(t):t instanceof ke?this.isSimpleLinearGeometry(t):t instanceof Re?this.isSimpleMultiPoint(t):W(t,On)?this.isSimplePolygonal(t):!(t instanceof vt)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Ci}}),g(Ni.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ci.EndpointInfo=Ni,g(wt.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=wt.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=wt.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==wt.JOIN_ROUND&&(this.quadrantSegments=wt.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return wt}}),wt.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},wt.CAP_ROUND=1,wt.CAP_FLAT=2,wt.CAP_SQUARE=3,wt.JOIN_ROUND=1,wt.JOIN_MITRE=2,wt.JOIN_BEVEL=3,wt.DEFAULT_QUADRANT_SEGMENTS=8,wt.DEFAULT_MITRE_LIMIT=5,wt.DEFAULT_SIMPLIFY_FACTOR=.01,g(ls.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();S.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=q.computeOrientation(this.minCoord,n,e),s=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===q.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===q.CLOCKWISE)&&(s=!0),s&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(e<0||e+1>=r.length||r[e].y===r[e+1].y)return-1;var s=U.LEFT;return r[e].y<r[e+1].y&&(s=U.RIGHT),s},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(this.minCoord===null||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}S.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===U.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return ls}}),hs.prototype.addLast=function(t){this.array_.push(t)},hs.prototype.removeFirst=function(){return this.array_.shift()},hs.prototype.isEmpty=function(){return this.array_.length===0},g(cs.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(e===null)throw new ye("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(U.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(U.RIGHT)>=1&&e.getDepth(U.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new re,n=new hs,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var s=n.removeFirst();e.add(s),this.computeNodeDepth(s);for(var a=s.getEdges().iterator();a.hasNext();){var l=a.next(),d=l.getSym();if(!d.isVisited()){var v=d.getNode();e.contains(v)||(n.addLast(v),e.add(v))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new Q,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),s=0;s<r.length-1;s++)t.expandToInclude(r[s]);this.env=t}return this.env},addReachable:function(t){var e=new me;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(U.LEFT,t.getDepth(U.RIGHT)),e.setDepth(U.RIGHT,t.getDepth(U.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var s=r.getSym(),a=s.getNode();a.isVisited()||e.push(a)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[k]},getClass:function(){return cs}}),g(fe.prototype,{isDeletable:function(t,e,n,r){var s=this.inputLine[t],a=this.inputLine[e],l=this.inputLine[n];return!!this.isConcave(s,a,l)&&!!this.isShallow(s,a,l,r)&&this.isShallowSampled(s,a,t,n,r)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var s=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=fe.DELETE,s=!0,r=!0),t=s?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},isShallowConcavity:function(t,e,n,r){var s=q.computeOrientation(t,e,n),a=s===this.angleOrientation;if(!a)return!1;var l=q.distancePointLine(e,t,n);return l<r},isShallowSampled:function(t,e,n,r,s){var a=Math.trunc((r-n)/fe.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var l=n;l<r;l+=a)if(!this.isShallow(t,e,this.inputLine[l],s))return!1;return!0},isConcave:function(e,n,r){var s=q.computeOrientation(e,n,r),a=s===this.angleOrientation;return a},simplify:function(t){this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=q.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===fe.DELETE;)e++;return e},isShallow:function(t,e,n,r){var s=q.distancePointLine(e,t,n);return s<r},collapseLine:function(){for(var t=new yt,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==fe.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return fe}}),fe.simplify=function(t,e){var n=new fe(t);return n.simplify(e)},fe.INIT=0,fe.DELETE=1,fe.KEEP=1,fe.NUM_PTS_TO_CHECK=10,g(ar.prototype,{getCoordinates:function(){var t=this.ptList.toArray(ar.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new _(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new gt,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new _(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return ar}}),ar.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),g(gn.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=q.computeOrientation(this.s0,this.s1,this.s2),r=n===q.CLOCKWISE&&this.side===U.LEFT||n===q.COUNTERCLOCKWISE&&this.side===U.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new st(t,e),r=new st;this.computeOffsetSegment(n,U.LEFT,this.distance,r);var s=new st;this.computeOffsetSegment(n,U.RIGHT,this.distance,s);var a=e.x-t.x,l=e.y-t.y,d=Math.atan2(l,a);switch(this.bufParams.getEndCapStyle()){case wt.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(e,d+Math.PI/2,d-Math.PI/2,q.CLOCKWISE,this.distance),this.segList.addPt(s.p1);break;case wt.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(s.p1);break;case wt.CAP_SQUARE:var v=new _;v.x=Math.abs(this.distance)*Math.cos(d),v.y=Math.abs(this.distance)*Math.sin(d);var w=new _(r.p1.x+v.x,r.p1.y+v.y),O=new _(s.p1.x+v.x,s.p1.y+v.y);this.segList.addPt(w),this.segList.addPt(O)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,r){var s=!0,a=null;try{a=Ut.intersection(e.p0,e.p1,n.p0,n.p1);var l=r<=0?1:a.distance(t)/Math.abs(r);l>this.bufParams.getMitreLimit()&&(s=!1)}catch(d){if(!(d instanceof Tt))throw d;a=new _(0,0),s=!1}finally{}s?this.segList.addPt(a):this.addLimitedMitreJoin(e,n,r,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,r,s){var a=e.x-t.x,l=e.y-t.y,d=Math.atan2(l,a),v=n.x-t.x,w=n.y-t.y,O=Math.atan2(w,v);r===q.CLOCKWISE?d<=O&&(d+=2*Math.PI):d>=O&&(d-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,d,O,r,s),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*gn.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===wt.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===wt.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new _(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new _(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new _(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new _(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,r){var s=this.seg0.p1,a=ot.angle(s,this.seg0.p0),l=(ot.angle(s,this.seg1.p1),ot.angleBetweenOriented(this.seg0.p0,s,this.seg1.p1)),d=l/2,v=ot.normalize(a+d),w=ot.normalize(v+Math.PI),O=r*n,D=O*Math.abs(Math.sin(d)),G=n-D,K=s.x+O*Math.cos(w),rt=s.y+O*Math.sin(w),ht=new _(K,rt),Vt=new st(s,ht),le=Vt.pointAlongOffset(1,G),Zn=Vt.pointAlongOffset(1,-G);this.side===U.LEFT?(this.segList.addPt(le),this.segList.addPt(Zn)):(this.segList.addPt(Zn),this.segList.addPt(le))},computeOffsetSegment:function(t,e,n,r){var s=e===U.LEFT?1:-1,a=t.p1.x-t.p0.x,l=t.p1.y-t.p0.y,d=Math.sqrt(a*a+l*l),v=s*n*a/d,w=s*n*l/d;r.p0.x=t.p0.x-w,r.p0.y=t.p0.y+v,r.p1.x=t.p1.x-w,r.p1.y=t.p1.y+v},addFilletArc:function(t,e,n,r,s){var a=r===q.CLOCKWISE?-1:1,l=Math.abs(e-n),d=Math.trunc(l/this.filletAngleQuantum+.5);if(d<1)return null;var v=null,w=null;v=0,w=l/d;for(var O=v,D=new _;O<l;){var G=e+a*O;D.x=t.x+s*Math.cos(G),D.y=t.y+s*Math.sin(G),this.segList.addPt(D),O+=w}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*gn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new _((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new _((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new _(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new ar,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*gn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===wt.JOIN_BEVEL||this.bufParams.getJoinStyle()===wt.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,q.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,gn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,gn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,gn.MAX_CLOSING_SEG_LEN_FACTOR=80,g(ur.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var n=e<0,r=Math.abs(e),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);var a=s.getCoordinates();return n&&nt.reverse(a),a},computeSingleSidedBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var s=fe.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],U.LEFT),n.addFirstSegment();for(var l=a-2;l>=0;l--)n.addNextSegment(s[l],!0)}else{n.addSegments(t,!1);var d=fe.simplify(t,r),v=d.length-1;n.initSideSegments(d[0],d[1],U.LEFT),n.addFirstSegment();for(var l=2;l<=v;l++)n.addNextSegment(d[l],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);e===U.RIGHT&&(r=-r);var s=fe.simplify(t,r),a=s.length-1;n.initSideSegments(s[a-1],s[0],e);for(var l=1;l<=a;l++){var d=l!==1;n.addNextSegment(s[l],d)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),r=fe.simplify(t,n),s=r.length-1;e.initSideSegments(r[0],r[1],U.LEFT);for(var a=2;a<=s;a++)e.addNextSegment(r[a],!0);e.addLastSegment(),e.addLineEndCap(r[s-1],r[s]);var l=fe.simplify(t,-n),d=l.length-1;e.initSideSegments(l[d],l[d-1],U.LEFT);for(var a=d-2;a>=0;a--)e.addNextSegment(l[a],!0);e.addLastSegment(),e.addLineEndCap(l[1],l[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case wt.CAP_ROUND:e.createCircle(t);break;case wt.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,e<0&&!this.bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var s=e<0;this.computeSingleSidedBufferCurve(t,s,r)}else this.computeLineBufferCurve(t,r);var a=r.getCoordinates();return a},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return ur.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},computeOffsetCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){var s=fe.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],U.LEFT),n.addFirstSegment();for(var l=a-2;l>=0;l--)n.addNextSegment(s[l],!0)}else{var d=fe.simplify(t,r),v=d.length-1;n.initSideSegments(d[0],d[1],U.LEFT),n.addFirstSegment();for(var l=2;l<=v;l++)n.addNextSegment(d[l],!0)}n.addLastSegment()},getSegGen:function(t){return new gn(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new _(t[n]);return e},g(fs.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new M,n=this.subgraphs.iterator();n.hasNext();){var r=n.next(),s=r.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(arguments.length===3){if(W(arguments[2],pt)&&arguments[0]instanceof _&&arguments[1]instanceof $n)for(var a=arguments[0],l=arguments[1],d=arguments[2],v=l.getEdge().getCoordinates(),n=0;n<v.length-1;n++){this.seg.p0=v[n],this.seg.p1=v[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var w=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(w<a.x||this.seg.isHorizontal()||a.y<this.seg.p0.y||a.y>this.seg.p1.y||q.computeOrientation(this.seg.p0,this.seg.p1,a)===q.RIGHT)){var O=l.getDepth(U.LEFT);this.seg.p0.equals(v[n])||(O=l.getDepth(U.RIGHT));var D=new kr(this.seg,O);d.add(D)}}else if(W(arguments[2],pt)&&arguments[0]instanceof _&&W(arguments[1],pt))for(var G=arguments[0],K=arguments[1],rt=arguments[2],n=K.iterator();n.hasNext();){var ht=n.next();ht.isForward()&&this.findStabbedSegments(G,ht,rt)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=hi.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return fs}}),g(kr.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return n!==0?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),n!==0?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[k]},getClass:function(){return kr}}),fs.DepthSegment=kr,g(gs.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,x.EXTERIOR,x.INTERIOR)},addPolygon:function(t){var e=this.distance,n=U.LEFT;this.distance<0&&(e=-this.distance,n=U.RIGHT);var r=t.getExteriorRing(),s=nt.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance)||this.distance<=0&&s.length<3)return null;this.addPolygonRing(s,e,n,x.EXTERIOR,x.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var l=t.getInteriorRingN(a),d=nt.removeRepeatedPoints(l.getCoordinates());this.distance>0&&this.isErodedCompletely(l,-this.distance)||this.addPolygonRing(d,e,U.opposite(n),x.INTERIOR,x.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Ft(t[0],t[1],t[2]),r=n.inCentre(),s=q.distancePointLine(r,n.p0,n.p1);return s<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=nt.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,x.EXTERIOR,x.INTERIOR)},addCurve:function(t,e,n){if(t===null||t.length<2)return null;var r=new on(t,new Ht(0,x.BOUNDARY,e,n));this.curveList.add(r)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,r,s){if(e===0&&t.length<Qt.MINIMUM_VALID_SIZE)return null;var a=r,l=s;t.length>=Qt.MINIMUM_VALID_SIZE&&q.isCCW(t)&&(a=s,l=r,n=U.opposite(n));var d=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(d,a,l)},add:function(t){if(t.isEmpty())return null;if(t instanceof Rt)this.addPolygon(t);else if(t instanceof dt)this.addLineString(t);else if(t instanceof Zt)this.addPoint(t);else if(t instanceof Re)this.addCollection(t);else if(t instanceof ke)this.addCollection(t);else if(t instanceof ce)this.addCollection(t);else{if(!(t instanceof vt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),s=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>s},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return gs}}),g(Br.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(Br.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.size()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],l=n.getCoordinates()[r],d=n.getCoordinates()[r+1];this.li.computeIntersection(s,a,l,d),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ji]},getClass:function(){return Br}}),Br.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},g(i.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Ht(t.getLabel()),r.flip()),n.merge(r);var s=i.depthDelta(r),a=e.getDepthDelta(),l=a+s;e.setDepthDelta(l)}else this.edgeList.add(t),t.setDepthDelta(i.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new M,r=t.iterator();r.hasNext();){var s=r.next(),a=s.getRightmostCoordinate(),l=new fs(n),d=l.getDepth(a);s.computeDepth(d),s.findResultEdges(),n.add(s),e.add(s.getDirectedEdges(),s.getNodes())}},createSubgraphs:function(t){for(var e=new M,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new cs;s.create(r),e.add(s)}}return hi.sort(e,hi.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new mi,n=new lt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Br(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new ur(n,this.bufParams),s=new gs(t,e,r),a=s.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this.graph=new ln(new ti),this.graph.addEdges(this.edgeList.getEdges());var l=this.createSubgraphs(this.graph),d=new Sr(this.geomFact);this.buildSubgraphs(l,d);var v=d.getPolygons();if(v.size()<=0)return this.createEmptyResultGeometry();var w=this.geomFact.buildGeometry(v);return w},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings(),s=r.iterator();s.hasNext();){var a=s.next(),l=a.getCoordinates();if(l.length!==2||!l[0].equals2D(l[1])){var d=a.getData(),v=new De(a.getCoordinates(),new Ht(d));this.insertUniqueEdge(v)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return i}}),i.depthDelta=function(t){var e=t.getLocation(0,U.LEFT),n=t.getLocation(0,U.RIGHT);return e===x.INTERIOR&&n===x.EXTERIOR?1:e===x.EXTERIOR&&n===x.INTERIOR?-1:0},i.convertSegStrings=function(t){for(var e=new gt,n=new M;t.hasNext();){var r=t.next(),s=e.createLineString(r.getCoordinates());n.add(s)}return e.buildGeometry(n)},g(o.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(arguments.length===2){for(var r=arguments[0],s=arguments[1],t=s.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),a=1;a<n.length-1;a++)if(n[a].equals(r))throw new F("found endpt/interior pt intersection at index "+a+" :pt "+r)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],l=s.getCoordinates(),d=a.getCoordinates(),v=0;v<l.length-1;v++)for(var w=0;w<d.length-1;w++)this.checkInteriorIntersections(s,v,a,w);else if(arguments.length===4){var O=arguments[0],D=arguments[1],G=arguments[2],K=arguments[3];if(O===G&&D===K)return null;var rt=O.getCoordinates()[D],ht=O.getCoordinates()[D+1],Vt=G.getCoordinates()[K],le=G.getCoordinates()[K+1];if(this.li.computeIntersection(rt,ht,Vt,le),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,rt,ht)||this.hasInteriorIntersection(this.li,Vt,le)))throw new F("found non-noded intersection at "+rt+"-"+ht+" and "+Vt+"-"+le)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0],r=n.getCoordinates(),t=0;t<r.length-2;t++)this.checkCollapse(r[t],r[t+1],r[t+2])},hasInteriorIntersection:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var s=t.getIntersection(r);if(!s.equals(e)&&!s.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new F("found non-noded collapse at "+o.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return o}}),o.fact=new gt,g(u.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=this.maxx<n||this.minx>r||this.maxy<s||this.miny>a;if(l)return!1;var d=this.intersectsToleranceSquare(t,e);return S.isTrue(!(l&&d),"Found bad envelope test"),d},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new _(this.maxx,this.maxy),this.corner[1]=new _(this.minx,this.maxy),this.corner[2]=new _(this.minx,this.miny),this.corner[3]=new _(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=u.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new Q(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),!!this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),!!this.li.isProper()||(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.isProper()||!(!n||!r)||!!t.equals(this.pt)||!!e.equals(this.pt))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return u}}),u.SAFE_ENV_EXPANSION_FACTOR=.75,g(h.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],s=e.getSafeEnvelope(),a=new m(e,n,r);return this.index.query(s,{interfaces_:function(){return[gi]},visitItem:function(l){var d=l;d.select(s,a)}}),a.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return h}}),c(m,Ei),g(m.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return Ei.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return this.parentEdge!==null&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return m}}),h.HotPixelSnapAction=m,g(y.prototype,{processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],l=n.getCoordinates()[r],d=n.getCoordinates()[r+1];if(this.li.computeIntersection(s,a,l,d),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var v=0;v<this.li.getIntersectionNum();v++)this.interiorIntersections.add(this.li.getIntersection(v));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ji]},getClass:function(){return y}}),g(C.prototype,{checkCorrectness:function(t){var e=on.getNodedSubstrings(t),n=new o(e);try{n.checkValid()}catch(r){if(!(r instanceof Pe))throw r;r.printStackTrace()}finally{}},getNodedSubstrings:function(){return on.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new y(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(W(arguments[0],tt))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof on)for(var r=arguments[0],s=r.getCoordinates(),a=0;a<s.length;a++){var l=new u(s[a],this.scaleFactor,this.li),d=this.pointSnapper.snap(l,r,a);d&&r.addIntersection(s[a],a)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new mi,this.pointSnapper=new h(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new u(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},interfaces_:function(){return[Ki]},getClass:function(){return C}}),g(R.prototype,{bufferFixedPrecision:function(t){var e=new Fr(new C(new Mt(1)),t.getScale()),n=new i(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=R.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(s){if(!(s instanceof ye))throw s;this.saveException=s}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],n=R.precisionScaleFactor(this.argGeom,this.distance,e),r=new Mt(n);this.bufferFixedPrecision(r)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Mt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new i(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof F))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return R}}),R.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new R(t),r=n.getResultGeometry(e);return r}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var s=arguments[0],a=arguments[1],l=arguments[2],d=new R(s);d.setQuadrantSegments(l);var r=d.getResultGeometry(a);return r}if(arguments[2]instanceof wt&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var v=arguments[0],w=arguments[1],O=arguments[2],d=new R(v,O),r=d.getResultGeometry(w);return r}}else if(arguments.length===4){var D=arguments[0],G=arguments[1],K=arguments[2],rt=arguments[3],d=new R(D);d.setQuadrantSegments(K),d.setEndCapStyle(rt);var r=d.getResultGeometry(G);return r}},R.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),s=qt.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),a=e>0?e:0,l=s+2*a,d=Math.trunc(Math.log(l)/Math.log(10)+1),v=n-d,w=Math.pow(10,v);return w},R.CAP_ROUND=wt.CAP_ROUND,R.CAP_BUTT=wt.CAP_FLAT,R.CAP_FLAT=wt.CAP_FLAT,R.CAP_SQUARE=wt.CAP_SQUARE,R.MAX_PRECISION_DIGITS=12;var Wa=Object.freeze({BufferOp:R,BufferParameters:wt});g(A.prototype,{filter:function(t){t instanceof Rt&&this.comps.add(t)},interfaces_:function(){return[xn]},getClass:function(){return A}}),A.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return A.getPolygons(t,new M)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Rt?n.add(e):e instanceof vt&&e.apply(new A(n)),n}},g(B.prototype,{isInsideArea:function(){return this.segIndex===B.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return B}}),B.INSIDE_AREA=-1,g(J.prototype,{filter:function(t){t instanceof Zt&&this.pts.add(t)},interfaces_:function(){return[xn]},getClass:function(){return J}}),J.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof Zt?hi.singletonList(t):J.getPoints(t,new M)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Zt?n.add(e):e instanceof vt&&e.apply(new J(n)),n}},g(at.prototype,{filter:function(t){(t instanceof Zt||t instanceof dt||t instanceof Rt)&&this.locations.add(new B(t,0,t.getCoordinate()))},interfaces_:function(){return[xn]},getClass:function(){return at}}),at.getLocations=function(t){var e=new M;return t.apply(new at(e)),e},g(ft.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=1-e,s=A.getPolygons(this.geom[e]);if(s.size()>0){var a=at.getLocations(this.geom[r]);if(this.computeContainmentDistance(a,s,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[r]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&W(arguments[0],pt)&&W(arguments[1],pt)){for(var l=arguments[0],d=arguments[1],v=arguments[2],w=0;w<l.size();w++)for(var O=l.get(w),D=0;D<d.size();D++)if(this.computeContainmentDistance(O,d.get(D),v),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof B&&arguments[1]instanceof Rt){var G=arguments[0],K=arguments[1],rt=arguments[2],ht=G.getCoordinate();if(x.EXTERIOR!==this.ptLocator.locate(ht,K))return this.minDistance=0,rt[0]=G,rt[1]=new B(K,ht),null}}},computeMinDistanceLinesPoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var l=e.get(a);if(this.computeMinDistance(s,l,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=Ne.getLines(this.geom[0]),n=Ne.getLines(this.geom[1]),r=J.getPoints(this.geom[0]),s=J.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,s,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,s,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof dt&&arguments[1]instanceof Zt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var r=t.getCoordinates(),s=e.getCoordinate(),a=0;a<r.length-1;a++){var l=q.distancePointLine(s,r[a],r[a+1]);if(l<this.minDistance){this.minDistance=l;var d=new st(r[a],r[a+1]),v=d.closestPoint(s);n[0]=new B(t,a,v),n[1]=new B(e,0,s)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof dt&&arguments[1]instanceof dt){var w=arguments[0],O=arguments[1],D=arguments[2];if(w.getEnvelopeInternal().distance(O.getEnvelopeInternal())>this.minDistance)return null;for(var r=w.getCoordinates(),G=O.getCoordinates(),a=0;a<r.length-1;a++)for(var K=0;K<G.length-1;K++){var l=q.distanceLineLine(r[a],r[a+1],G[K],G[K+1]);if(l<this.minDistance){this.minDistance=l;var rt=new st(r[a],r[a+1]),ht=new st(G[K],G[K+1]),Vt=rt.closestPoints(ht);D[0]=new B(w,a,Vt[0]),D[1]=new B(O,K,Vt[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var l=e.get(a),d=s.getCoordinate().distance(l.getCoordinate());if(d<this.minDistance&&(this.minDistance=d,n[0]=new B(s,0,s.getCoordinate()),n[1]=new B(l,0,l.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new b;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var l=e.get(a);if(this.computeMinDistance(s,l,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.distance=function(t,e){var n=new ft(t,e);return n.distance()},ft.isWithinDistance=function(t,e,n){var r=new ft(t,e,n);return r.distance()<=n},ft.nearestPoints=function(t,e){var n=new ft(t,e);return n.nearestPoints()};var ja=Object.freeze({DistanceOp:ft});g(Fe.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,n=new yt,r=this.directedEdges.iterator();r.hasNext();){var s=r.next();s.getEdgeDirection()?t++:e++,n.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&nt.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return Fe}}),g(Bt.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Bt}}),Bt.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Bt.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},Bt.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},c($t,Bt),g($t.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:q.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[k]},getClass:function(){return $t}}),$t.toEdges=function(t){for(var e=new M,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},c(be,$t),g(be.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(S.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return be}}),c(Be,Bt),g(Be.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Gn){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Be}}),g(Us.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(hi.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Be){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof $t){var r=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===r)return e}return-1}if(Number.isInteger(arguments[0])){var s=arguments[0],a=s%this.outEdges.size();return a<0&&(a+=this.outEdges.size()),a}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Us}}),c(Gn,Bt),g(Gn.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.getEdgesBetween=function(t,e){var n=$t.toEdges(t.getOutEdges().getEdges()),r=new re(n),s=$t.toEdges(e.getOutEdges().getEdges());return r.retainAll(s),r},c(ds,Be),g(ds.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ds}}),g(ms.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return ms}}),g(lr.prototype,{findNodesOfDegree:function(t){for(var e=new M,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===t&&e.add(r)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Be){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof $t){var e=arguments[0],n=e.getSym();n!==null&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Gn){for(var r=arguments[0],s=r.getOutEdges().getEdges(),a=s.iterator();a.hasNext();){var l=a.next(),n=l.getSym();n!==null&&this.remove(n),this.dirEdges.remove(l);var d=l.getEdge();d!==null&&this.edges.remove(d)}this.nodeMap.remove(r.getCoordinate()),r.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Be){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof $t){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Gn){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Be){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof $t){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return lr}}),c(zr,lr),g(zr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),a=this.getNode(r),l=new be(s,a,e[1],!0),d=new be(a,s,e[e.length-2],!1),v=new ds(t);v.setDirectedEdges(l,d),this.add(v)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new Gn(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return zr}}),g(ue.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(S.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(this.mergedLineStrings!==null)return null;Bt.setMarked(this.graph.nodeIterator(),!1),Bt.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new M,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new M;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new Fe(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(n!==null&&n!==t);return e},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];t.apply({interfaces_:function(){return[At]},filter:function(a){a instanceof dt&&this.add(a)}})}else if(W(arguments[0],tt)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}}else if(arguments[0]instanceof dt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory()),this.graph.addEdge(s)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return ue}});var Ka=Object.freeze({LineMerger:ue}),Ja=Object.freeze({OverlayOp:et});c(Li,$t),g(Li.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return Li}}),c(ps,Be),g(ps.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ps}}),g(Gr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),r=n[0],s=Gr.findDifferentPoint(n,r),a=e.findEdgeInSameDirection(r,s),l=e.findEdgeEnd(a),d=null;l.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR?d=l:l.getSym().getLabel().getLocation(0,U.RIGHT)===x.INTERIOR&&(d=l.getSym()),S.isTrue(d!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(d)},visitShellInteriors:function(t,e){if(t instanceof Rt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof ce)for(var r=t,s=0;s<r.getNumGeometries();s++){var n=r.getGeometryN(s);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do S.isTrue(n!==null,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getEdgeRing()===null){var s=new Lr(r,this.geometryFactory);s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings();e.addAll(a)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),s=r.get(0);if(s.getLabel().getLocation(0,U.RIGHT)===x.INTERIOR){for(var a=0;a<r.size();a++)if(s=r.get(a),!s.isVisited())return this.disconnectedRingcoord=s.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new M;this.geomGraph.computeSplitEdges(t);var e=new ln(new ti);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Gr}}),Gr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},g(vs.prototype,{createEdgeEndForNext:function(t,e,n,r){var s=n.segmentIndex+1;if(s>=t.getNumPoints()&&r===null)return null;var a=t.getCoordinate(s);r!==null&&r.segmentIndex===n.segmentIndex&&(a=r.coord);var l=new un(t,n.coord,a,new Ht(t.getLabel()));e.add(l)},createEdgeEndForPrev:function(t,e,n,r){var s=n.segmentIndex;if(n.dist===0){if(s===0)return null;s--}var a=t.getCoordinate(s);r!==null&&r.segmentIndex>=s&&(a=r.coord);var l=new Ht(t.getLabel());l.flip();var d=new un(t,n.coord,a,l);e.add(d)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new M,n=t;n.hasNext();){var r=n.next();this.computeEdgeEnds(r,e)}return e}if(arguments.length===2){var s=arguments[0],a=arguments[1],l=s.getEdgeIntersectionList();l.addEndpoints();var d=l.iterator(),v=null,w=null;if(!d.hasNext())return null;var O=d.next();do v=w,w=O,O=null,d.hasNext()&&(O=d.next()),w!==null&&(this.createEdgeEndForPrev(s,a,w,v),this.createEdgeEndForNext(s,a,w,O));while(w!==null)}},interfaces_:function(){return[]},getClass:function(){return vs}}),c(Gi,un),g(Gi.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,r=!1,s=this.iterator();s.hasNext();){var a=s.next(),l=a.getLabel().getLocation(t);l===x.BOUNDARY&&n++,l===x.INTERIOR&&(r=!0)}var l=x.NONE;r&&(l=x.INTERIOR),n>0&&(l=Ae.determineBoundary(e,n)),this.label.setLocation(t,l)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var s=r.getLabel().getLocation(t,e);if(s===x.INTERIOR)return this.label.setLocation(t,e,x.INTERIOR),null;s===x.EXTERIOR&&this.label.setLocation(t,e,x.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,U.LEFT),this.computeLabelSide(t,U.RIGHT)},updateIM:function(t){De.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(e=!0)}e?this.label=new Ht(x.NONE,x.NONE,x.NONE):this.label=new Ht(x.NONE);for(var s=0;s<2;s++)this.computeLabelOn(s,t),e&&this.computeLabelSides(s)},interfaces_:function(){return[]},getClass:function(){return Gi}}),c(Vr,pi),g(Vr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new Gi(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Vr}}),c(ys,Oe),g(ys.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return ys}}),c(Zs,Bi),g(Zs.prototype,{createNode:function(t){return new ys(t,new Vr)},interfaces_:function(){return[]},getClass:function(){return Zs}}),g($o.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next(),s=this.nodes.addNode(r.getCoordinate());s.setLabel(e,r.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new vs,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var r=n.next(),s=r.getLabel().getLocation(e),a=r.getEdgeIntersectionList().iterator();a.hasNext();){var l=a.next(),d=this.nodes.addNode(l.coord);s===x.BOUNDARY?d.setLabelBoundary(e):d.getLabel().isNull(e)&&d.setLabel(e,x.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return $o}}),g(po.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return po}}),g(ta.prototype,{buildIndex:function(){this.index=new kt;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),s=0;s<r.size();s++){var a=r.get(s),l=a.getCoordinates();if(e!==a&&e.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){var d=dn.findPtNotNode(n,a,this.graph);if(d!==null){var v=q.isPointInRing(d,l);if(v)return this.nestedPt=d,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return ta}}),g(Nt.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Nt.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.ERROR=0,Nt.REPEATED_POINT=1,Nt.HOLE_OUTSIDE_SHELL=2,Nt.NESTED_HOLES=3,Nt.DISCONNECTED_INTERIOR=4,Nt.SELF_INTERSECTION=5,Nt.RING_SELF_INTERSECTION=6,Nt.NESTED_SHELLS=7,Nt.DUPLICATE_RINGS=8,Nt.TOO_FEW_POINTS=9,Nt.INVALID_COORDINATE=10,Nt.RING_NOT_CLOSED=11,Nt.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],g(dn.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!dn.isValid(t[e]))return this.validErr=new Nt(Nt.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Rt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var n=new ta(e),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r);n.add(s)}var a=n.isNonNested();a||(this.validErr=new Nt(Nt.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new po(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new Nt(Nt.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Nt(Nt.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,n){var r=t.getCoordinates(),s=e.getCoordinates(),a=dn.findPtNotNode(r,e,n);if(a!==null){var l=q.isPointInRing(a,s);if(!l)return a}var d=dn.findPtNotNode(s,t,n);if(d!==null){var v=q.isPointInRing(d,r);return v?d:null}return S.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new Gr(t);e.isInteriorsConnected()||(this.validErr=new Nt(Nt.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new we,n=!0,r=t.iterator();r.hasNext();){var s=r.next();if(n)n=!1;else{if(e.contains(s.coord))return this.validErr=new Nt(Nt.RING_SELF_INTERSECTION,s.coord),null;e.add(s.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),r=new nr(n),s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),l=dn.findPtNotNode(a.getCoordinates(),n,e);if(l===null)return null;var d=!r.isInside(l);if(d)return this.validErr=new Nt(Nt.HOLE_OUTSIDE_SHELL,l),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Nt(Nt.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof Zt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof Re){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Qt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),this.validErr!==null||(this.checkClosedRing(n),this.validErr!==null))return null;var r=new Ae(0,n);if(this.checkTooFewPoints(r),this.validErr!==null)return null;var s=new lt;r.computeSelfNodes(s,!0,!0),this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof dt){var a=arguments[0];if(this.checkInvalidCoordinates(a.getCoordinates()),this.validErr!==null)return null;var r=new Ae(0,a);this.checkTooFewPoints(r)}else if(arguments[0]instanceof Rt){var l=arguments[0];if(this.checkInvalidCoordinates(l),this.validErr!==null||(this.checkClosedRings(l),this.validErr!==null))return null;var r=new Ae(0,l);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null)||(this.checkHolesInShell(l,r),this.validErr!==null)||(this.checkHolesNotNested(l,r),this.validErr!==null))return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof ce){for(var d=arguments[0],v=0;v<d.getNumGeometries();v++){var w=d.getGeometryN(v);if(this.checkInvalidCoordinates(w),this.validErr!==null||(this.checkClosedRings(w),this.validErr!==null))return null}var r=new Ae(0,d);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null))return null;for(var v=0;v<d.getNumGeometries();v++){var w=d.getGeometryN(v);if(this.checkHolesInShell(w,r),this.validErr!==null)return null}for(var v=0;v<d.getNumGeometries();v++){var w=d.getGeometryN(v);if(this.checkHolesNotNested(w,r),this.validErr!==null)return null}if(this.checkShellsNotNested(d,r),this.validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof vt)for(var O=arguments[0],v=0;v<O.getNumGeometries();v++){var D=O.getGeometryN(v);if(this.checkValid(D),this.validErr!==null)return null}else if(arguments[0]instanceof Z){var G=arguments[0];if(this.validErr=null,G.isEmpty())return null;if(G instanceof Zt)this.checkValid(G);else if(G instanceof Re)this.checkValid(G);else if(G instanceof Qt)this.checkValid(G);else if(G instanceof dt)this.checkValid(G);else if(G instanceof Rt)this.checkValid(G);else if(G instanceof ce)this.checkValid(G);else{if(!(G instanceof vt))throw new UnsupportedOperationException(G.getClass().getName());this.checkValid(G)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var r=t.getCoordinates(),s=e.getExteriorRing(),a=s.getCoordinates(),l=dn.findPtNotNode(r,s,n);if(l===null)return null;var d=q.isPointInRing(l,a);if(!d)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Nt(Nt.NESTED_SHELLS,l),null;for(var v=null,w=0;w<e.getNumInteriorRing();w++){var O=e.getInteriorRingN(w);if(v=this.checkShellInsideHole(t,O,n),v===null)return null}this.validErr=new Nt(Nt.NESTED_SHELLS,v)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new Nt(Nt.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n),s=r.getExteriorRing(),a=0;a<t.getNumGeometries();a++)if(n!==a){var l=t.getGeometryN(a);if(this.checkShellNotNested(s,l,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return dn}}),dn.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e),s=r.getEdgeIntersectionList(),a=0;a<t.length;a++){var l=t[a];if(!s.isIntersection(l))return l}return null},dn.isValid=function(){if(arguments[0]instanceof Z){var t=arguments[0],e=new dn(t);return e.isValid()}if(arguments[0]instanceof _){var n=arguments[0];return!I.isNaN(n.x)&&!I.isInfinite(n.x)&&!I.isNaN(n.y)&&!I.isInfinite(n.y)}},g(Vn.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new yt,e=this.deList.iterator();e.hasNext();){var n=e.next(),r=n.getEdge();Vn.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),dn.isValid(this.ring))},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),S.isTrue(e!==null,"found null DE in ring"),S.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Qt){var t=arguments[0];this.holes===null&&(this.holes=new M),this.holes.add(t)}else if(arguments[0]instanceof Vn){var e=arguments[0];e.setShell(this);var n=e.getRing();this.holes===null&&(this.holes=new M),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=q.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return de.toLineString(new qe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&ut.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof Pe))throw t;ut.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(n!==null&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Vn}}),Vn.findDirEdgesInRing=function(t){var e=t,n=new M;do n.add(e),e=e.getNext(),S.isTrue(e!==null,"found null DE in ring"),S.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},Vn.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)},Vn.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,l=null,d=e.iterator();d.hasNext();){var v=d.next(),w=v.getRing(),O=w.getEnvelopeInternal();if(!O.equals(r)&&O.contains(r)){s=nt.ptNotInList(n.getCoordinates(),w.getCoordinates());var D=!1;q.isPointInRing(s,w.getCoordinates())&&(D=!0),D&&(a===null||l.contains(O))&&(a=v,l=a.getRing().getEnvelopeInternal())}}return a},g(ea.prototype,{compare:function(t,e){var n=t,r=e;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())},interfaces_:function(){return[Y]},getClass:function(){return ea}}),Vn.EnvelopeComparator=ea,c(ge,lr),g(ge.prototype,{findEdgeRing:function(t){var e=new Vn(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();ge.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=nt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),a=this.getNode(r),l=new Li(s,a,e[1],!0),d=new Li(a,s,e[e.length-2],!1),v=new ps(t);v.setDirectedEdges(l,d),this.add(v)},deleteCutEdges:function(){this.computeNextCWEdges(),ge.findLabeledEdgeRings(this.dirEdges);for(var t=new M,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);var s=n.getEdge();t.add(s.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),ge.label(this.dirEdges,-1);var t=ge.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new M,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var s=this.findEdgeRing(r);e.add(s)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new Gn(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),s=ge.findIntersectionNodes(n,r);if(s!==null)for(var a=s.iterator();a.hasNext();){var l=a.next();ge.computeNextCCWEdges(l,r)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new re,n=new me,r=t.iterator();r.hasNext();)n.push(r.next());for(;!n.isEmpty();){var s=n.pop();ge.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),r=a.iterator();r.hasNext();){var l=r.next();l.setMarked(!0);var d=l.getSym();d!==null&&d.setMarked(!0);var v=l.getEdge();e.add(v.getLine());var w=l.getToNode();ge.getDegreeNonDeleted(w)===1&&n.push(w)}}return e},interfaces_:function(){return[]},getClass:function(){return ge}}),ge.findLabeledEdgeRings=function(t){for(var e=new M,n=1,r=t.iterator();r.hasNext();){var s=r.next();if(!(s.isMarked()||s.getLabel()>=0)){e.add(s);var a=Vn.findDirEdgesInRing(s);ge.label(a,n),n++}}return e},ge.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,r=e.iterator();r.hasNext();){var s=r.next();s.isMarked()||n++}return n},ge.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var s=r.getSym();s!==null&&s.setMarked(!0)}},ge.label=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.setLabel(e)}},ge.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,r=null,s=e.getEdges().iterator();s.hasNext();){var a=s.next();if(!a.isMarked()){if(n===null&&(n=a),r!==null){var l=r.getSym();l.setNext(a)}r=a}}if(r!==null){var l=r.getSym();l.setNext(n)}},ge.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),r=null,s=null,a=n.getEdges(),l=a.size()-1;l>=0;l--){var d=a.get(l),v=d.getSym(),w=null;d.getLabel()===e&&(w=d);var O=null;v.getLabel()===e&&(O=v),w===null&&O===null||(O!==null&&(s=O),w!==null&&(s!==null&&(s.setNext(w),s=null),r===null&&(r=w)))}s!==null&&(S.isTrue(r!==null),s.setNext(r))},ge.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),r=0,s=n.iterator();s.hasNext();){var a=s.next();a.getLabel()===e&&r++}return r},ge.findIntersectionNodes=function(t,e){var n=t,r=null;do{var s=n.getFromNode();ge.getDegree(s,e)>1&&(r===null&&(r=new M),r.add(s)),n=n.getNext(),S.isTrue(n!==null,"found null DE in ring"),S.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return r},g(tn.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new gt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(gt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isValid()?e.add(s):n.add(s.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new M,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new M;this.invalidRingLines=new M,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),tn.assignHolesToShells(this.holeList,this.shellList),hi.sort(this.shellList,new Vn.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(tn.findDisjointShells(this.shellList),n=!1),this.polyList=tn.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(W(arguments[0],tt))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof dt){var r=arguments[0];this.geomFactory=r.getFactory(),this.graph===null&&(this.graph=new ge(this.geomFactory)),this.graph.addEdge(r)}else if(arguments[0]instanceof Z){var s=arguments[0];s.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new M,this.shellList=new M;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getOuterHole();r===null||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}},tn.extractPolygons=function(t,e){for(var n=new M,r=t.iterator();r.hasNext();){var s=r.next();(e||s.isIncluded())&&n.add(s.getPolygon())}return n},tn.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();tn.assignHoleToShell(r,e)}},tn.assignHoleToShell=function(t,e){var n=Vn.findEdgeRingContaining(t,e);n!==null&&n.addHole(t)},tn.findDisjointShells=function(t){tn.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(e=!0))}}while(e)},g(vo.prototype,{filter:function(t){t instanceof dt&&this.p.add(t)},interfaces_:function(){return[At]},getClass:function(){return vo}}),tn.LineStringAdder=vo;var Qa=Object.freeze({Polygonizer:tn});g(yo.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),a=t.hasProperInteriorIntersection();n===2&&r===2?s&&e.setAtLeast("212101212"):n===2&&r===1?(s&&e.setAtLeast("FFF0FFFF2"),a&&e.setAtLeast("1FFFFF1FF")):n===1&&r===2?(s&&e.setAtLeast("F0FFFFFF2"),a&&e.setAtLeast("1F1FFFFFF")):n===1&&r===1&&a&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var r=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,x.EXTERIOR)},computeIM:function(){var t=new St;if(t.set(x.EXTERIOR,x.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new vs,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var s=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),l=this.nodes.find(a.coord);l.getLabel().isNull(t)&&(r===x.BOUNDARY?l.setLabelBoundary(t):l.setLabel(t,x.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),l=this.nodes.addNode(a.coord);r===x.BOUNDARY?l.setLabelBoundary(t):l.getLabel().isNull(t)&&l.setLabel(t,x.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();S.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var r=this.nodes.iterator();r.hasNext();){var s=r.next();s.updateIM(t),s.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(x.INTERIOR,x.EXTERIOR,e.getDimension()),t.set(x.BOUNDARY,x.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(x.EXTERIOR,x.INTERIOR,n.getDimension()),t.set(x.EXTERIOR,x.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return yo}}),g(Ys.prototype,{isContainedInBoundary:function(t){if(t instanceof Rt)return!1;if(t instanceof Zt)return this.isPointContainedInBoundary(t);if(t instanceof dt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new _,r=new _,s=0;s<e.size()-1;s++)if(e.getCoordinate(s,n),e.getCoordinate(s+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof Zt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof _){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Ys}}),Ys.contains=function(t,e){var n=new Ys(t);return n.contains(e)},g(na.prototype,{intersects:function(t,e){var n=new Q(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var r=t;t=e,e=r}var s=!1;return e.y>t.y&&(s=!0),s?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return na}}),g(hr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof vt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return hr}}),g(_s.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new _o(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new xo(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new Eo(this.rectangle);return r.applyTo(t),!!r.intersects()},interfaces_:function(){return[]},getClass:function(){return _s}}),_s.intersects=function(t,e){var n=new _s(t);return n.intersects(e)},c(_o,hr),g(_o.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return _o}}),c(xo,hr),g(xo.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof Rt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new _,r=0;r<4;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&Xe.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return xo}}),c(Eo,hr),g(Eo.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=Ne.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Eo}}),c(Pt,Ln),g(Pt.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||Pt.relate(t,e).isCovers())},Pt.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?_s.intersects(t,e):e.isRectangle()?_s.intersects(e,t):Pt.relate(t,e).isIntersects())},Pt.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Pt.relate(t,e).isTouches(t.getDimension(),e.getDimension())},Pt.within=function(t,e){return e.contains(t)},Pt.coveredBy=function(t,e){return Pt.covers(e,t)},Pt.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Pt(t,e),r=n.getIntersectionMatrix();return r}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof Z&&arguments[1]instanceof Z){var s=arguments[0],a=arguments[1],l=arguments[2];return Pt.relateWithCheck(s,a).matches(l)}if(W(arguments[2],zt)&&arguments[0]instanceof Z&&arguments[1]instanceof Z){var d=arguments[0],v=arguments[1],w=arguments[2],n=new Pt(d,v,w),r=n.getIntersectionMatrix();return r}}},Pt.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Pt.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},Pt.disjoint=function(t,e){return!t.intersects(e)},Pt.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Pt.relate(t,e)},Pt.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&Pt.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},Pt.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Ys.contains(t,e):Pt.relate(t,e).isContains())};var $a=Object.freeze({RelateOp:Pt});g(mn.prototype,{extractElements:function(t,e){if(t===null)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},combine:function(){for(var t=new M,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return mn}}),mn.combine=function(){if(arguments.length===1){var t=arguments[0],e=new mn(t);return e.combine()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new mn(mn.createList(n,r));return e.combine()}if(arguments.length===3){var s=arguments[0],a=arguments[1],l=arguments[2],e=new mn(mn.createList(s,a,l));return e.combine()}},mn.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},mn.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new M;return n.add(t),n.add(e),n}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2],n=new M;return n.add(r),n.add(s),n.add(a),n}},g(Xs.prototype,{union:function(){for(var t=new jn,e=new we,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),s=r.getCoordinate(),a=t.locate(s,this.otherGeom);a===x.EXTERIOR&&e.add(s)}if(e.size()===0)return this.otherGeom;var l=null,d=nt.toCoordinateArray(e);return l=d.length===1?this.geomFact.createPoint(d[0]):this.geomFact.createMultiPointFromCoords(d),mn.combine(l,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Xs}}),Xs.union=function(t,e){var n=new Xs(t,e);return n.union()},g(cr.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[xn]},getClass:function(){return cr}}),cr.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return cr.extract(t,e,new M)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];return n.getSortIndex()===r?s.add(n):n instanceof vt&&n.apply(new cr(r,s)),s}},g(Rn.prototype,{reduceToGeometries:function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next(),s=null;W(r,pt)?s=this.unionTree(r):r instanceof Z&&(s=r),e.add(s)}return e},extractByEnvelope:function(t,e,n){for(var r=new M,s=0;s<e.getNumGeometries();s++){var a=e.getGeometryN(s);a.getEnvelopeInternal().intersects(t)?r.add(a):n.add(a)}return this.geomFactory.buildGeometry(r)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var s=mn.combine(t,e);return s}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var a=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,a)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new kt(Rn.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var r=t.itemsTree(),s=this.unionTree(r);return s},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var a=Rn.getGeometry(e,n);return this.unionSafe(a,null)}if(r-n===2)return this.unionSafe(Rn.getGeometry(e,n),Rn.getGeometry(e,n+1));var s=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,s),l=this.binaryUnion(e,s,r);return this.unionSafe(a,l)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=e===null?r.copy():e.union(r)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Rn.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var r=new M,s=this.extractByEnvelope(n,t,r),a=this.extractByEnvelope(n,e,r),l=this.unionActual(s,a);r.add(l);var d=mn.combine(r);return d},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(arguments.length===2){var s=arguments[0],a=arguments[1],e=s.getFactory(),n=e.createGeometryCollection([s,a]),r=n.buffer(0);return r}},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.restrictToPolygons=function(t){if(W(t,On))return t;var e=A.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(gt.toPolygonArray(e))},Rn.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Rn.union=function(t){var e=new Rn(t);return e.union()},Rn.STRTREE_NODE_CAPACITY=4,g(fr.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return se.overlayOp(t,e,et.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(W(arguments[0],tt))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof Z){var r=arguments[0];this.geomFact===null&&(this.geomFact=r.getFactory()),cr.extract(r,Z.SORTINDEX_POLYGON,this.polygons),cr.extract(r,Z.SORTINDEX_LINESTRING,this.lines),cr.extract(r,Z.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var s=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(s)}var a=null;this.polygons.size()>0&&(a=Rn.union(this.polygons));var l=this.unionWithNull(r,a),d=null;return d=e===null?l:l===null?e:Xs.union(e,l),d===null?this.geomFact.createGeometryCollection():d},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.union=function(){if(arguments.length===1){if(W(arguments[0],tt)){var t=arguments[0],e=new fr(t);return e.union()}if(arguments[0]instanceof Z){var n=arguments[0],e=new fr(n);return e.union()}}else if(arguments.length===2){var r=arguments[0],s=arguments[1],e=new fr(r,s);return e.union()}};var tu=Object.freeze({UnaryUnionOp:fr}),eu=Object.freeze({IsValidOp:dn,ConsistentAreaTester:po}),nu=Object.freeze({BoundaryOp:En,IsSimpleOp:Ci,buffer:Wa,distance:ja,linemerge:Ka,overlay:Ja,polygonize:Qa,relate:$a,union:tu,valid:eu});c(wo,Ye.CoordinateOperation),g(wo.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var n=new Array(t.length).fill(null),r=0;r<t.length;r++){var s=new _(t[r]);this.targetPM.makePrecise(s),n[r]=s}var a=new yt(n,!1),l=a.toCoordinateArray(),d=0;e instanceof dt&&(d=2),e instanceof Qt&&(d=4);var v=n;return this.removeCollapsed&&(v=null),l.length<d?v:l},interfaces_:function(){return[]},getClass:function(){return wo}}),g(qr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),r=n;return this.changePrecisionModel||(r=this.changePM(n,t.getPrecisionModel())),r},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new Ye(n)}else e=new Ye;var r=this.removeCollapsed;t.getDimension()>=2&&(r=!0);var s=e.edit(t,new wo(this.targetPM,r));return s},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new Ye.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new gt(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:W(e,On)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new Ye;var n=this.createFactory(t,e),r=new Ye(n);return r},interfaces_:function(){return[]},getClass:function(){return qr}}),qr.reduce=function(t,e){var n=new qr(e);return n.reduce(t)},qr.reducePointwise=function(t,e){var n=new qr(e);return n.setPointwise(!0),n.reduce(t)};var iu=Object.freeze({GeometryPrecisionReducer:qr});g(Hs.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,s=t+1;s<e;s++){var a=this.seg.distance(this.pts[s]);a>n&&(n=a,r=s)}if(n<=this.distanceTolerance)for(var s=t+1;s<e;s++)this.usePt[s]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new yt,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new _(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Hs}}),Hs.simplify=function(t,e){var n=new Hs(t);return n.setDistanceTolerance(e),n.simplify()},g(xs.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Ws(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new b;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return xs}}),xs.simplify=function(t,e){var n=new xs(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Ws,pe),g(Ws.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=pe.prototype.transformPolygon.call(this,t,e);return e instanceof ce?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=null;return r=n.length===0?new Array(0).fill(null):Hs.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)},transformMultiPolygon:function(t,e){var n=pe.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Rt,r=pe.prototype.transformLinearRing.call(this,t,e);return!n||r instanceof Qt?r:null},interfaces_:function(){return[]},getClass:function(){return Ws}}),xs.DPTransformer=Ws,c(js,st),g(js.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return js}}),g(Vi.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Vi.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Vi.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new js(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Vi.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Vi}}),Vi.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,r=0;r<t.size();r++)n=t.get(r),e[r]=n.p0;return e[e.length-1]=n.p1,e},g(Es.prototype,{remove:function(t){this.index.remove(new Q(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Vi)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var r=e[n];this.add(r)}else if(arguments[0]instanceof st){var s=arguments[0];this.index.insert(new Q(s.p0,s.p1),s)}},query:function(t){var e=new Q(t.p0,t.p1),n=new ia(t);this.index.query(e,n);var r=n.getItems();return r},interfaces_:function(){return[]},getClass:function(){return Es}}),g(ia.prototype,{visitItem:function(t){var e=t;Q.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[gi]},getClass:function(){return ia}}),g(Ks.prototype,{flatten:function(t,e){var n=this.linePts[t],r=this.linePts[e],s=new st(n,r);return this.remove(this.line,t,e),this.outputIndex.add(s),s},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var r=new Array(2).fill(null);if(t+1===e){var s=this.line.getSegment(t);return this.line.addToResult(s),null}var a=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var l=n+1;l<this.line.getMinimumSize()&&(a=!1)}var d=new Array(1).fill(null),v=this.findFurthestPoint(this.linePts,t,e,d);d[0]>this.distanceTolerance&&(a=!1);var w=new st;if(w.p0=this.linePts[t],w.p1=this.linePts[e],r[0]=t,r[1]=e,this.hasBadIntersection(this.line,r,w)&&(a=!1),a){var s=this.flatten(t,e);return this.line.addToResult(s),null}this.simplifySection(t,v,n),this.simplifySection(v,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,t))return!0}return!1},findFurthestPoint:function(t,e,n,r){var s=new st;s.p0=t[e],s.p1=t[n];for(var a=-1,l=e,d=e+1;d<n;d++){var v=t[d],w=s.distance(v);w>a&&(a=w,l=d)}return r[0]=a,l},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var r=e;r<n;r++){var s=t.getSegment(r);this.inputIndex.remove(s)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var r=this.inputIndex.query(n),s=r.iterator();s.hasNext();){var a=s.next();if(this.hasInteriorIntersection(a,n)){if(Ks.isInLineSection(t,e,a))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return Ks}}),Ks.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var r=n.getIndex();return r>=e[0]&&r<e[1]},g(ra.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new Ks(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return ra}}),g(Ur.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new An,this.inputGeom.apply(new Io(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new Js(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(t<0)throw new b;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.simplify=function(t,e){var n=new Ur(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Js,pe),g(Js.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof dt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return pe.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return Js}}),g(Io.prototype,{filter:function(t){if(t instanceof dt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,r=new Vi(e,n);this.tps.linestringMap.put(e,r)}},interfaces_:function(){return[At]},getClass:function(){return Io}}),Ur.LineStringTransformer=Js,Ur.LineStringMapBuilderFilter=Io;var ru=Object.freeze({DouglasPeuckerSimplifier:xs,TopologyPreservingSimplifier:Ur});g(ws.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=ws.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.getConstrainedLength(n),a=s/this.segLen;r.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(a):this.splitPt=ws.pointAlongReverse(this.seg,a)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return ws}}),ws.pointAlongReverse=function(t,e){var n=new _;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},g(sa.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return sa}}),g(Qs.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),r=n.getLength(),s=r/2,a=new ws(n),l=Qs.projectedSplitPoint(t,e),d=2*l.distance(e)*.8,v=d;return v>s&&(v=s),a.setMinimumLength(v),a.splitAt(l),a.getSplitPoint()},interfaces_:function(){return[sa]},getClass:function(){return Qs}}),Qs.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),r=n.project(e);return r},g(Yt.prototype,{interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Yt.isInCircleDDNormalized=function(t,e,n,r){var s=T.valueOf(t.x).selfSubtract(r.x),a=T.valueOf(t.y).selfSubtract(r.y),l=T.valueOf(e.x).selfSubtract(r.x),d=T.valueOf(e.y).selfSubtract(r.y),v=T.valueOf(n.x).selfSubtract(r.x),w=T.valueOf(n.y).selfSubtract(r.y),O=s.multiply(d).selfSubtract(l.multiply(a)),D=l.multiply(w).selfSubtract(v.multiply(d)),G=v.multiply(a).selfSubtract(s.multiply(w)),K=s.multiply(s).selfAdd(a.multiply(a)),rt=l.multiply(l).selfAdd(d.multiply(d)),ht=v.multiply(v).selfAdd(w.multiply(w)),Vt=K.selfMultiply(D).selfAdd(rt.selfMultiply(G)).selfAdd(ht.selfMultiply(O)),le=Vt.doubleValue()>0;return le},Yt.checkRobustInCircle=function(t,e,n,r){var s=Yt.isInCircleNonRobust(t,e,n,r),a=Yt.isInCircleDDSlow(t,e,n,r),l=Yt.isInCircleCC(t,e,n,r),d=Ft.circumcentre(t,e,n);ut.out.println("p radius diff a = "+Math.abs(r.distance(d)-t.distance(d))/t.distance(d)),s===a&&s===l||(ut.out.println("inCircle robustness failure (double result = "+s+", DD result = "+a+", CC result = "+l+")"),ut.out.println(de.toLineString(new qe([t,e,n,r]))),ut.out.println("Circumcentre = "+de.toPoint(d)+" radius = "+t.distance(d)),ut.out.println("p radius diff a = "+Math.abs(r.distance(d)/t.distance(d)-1)),ut.out.println("p radius diff b = "+Math.abs(r.distance(d)/e.distance(d)-1)),ut.out.println("p radius diff c = "+Math.abs(r.distance(d)/n.distance(d)-1)),ut.out.println())},Yt.isInCircleDDFast=function(t,e,n,r){var s=T.sqr(t.x).selfAdd(T.sqr(t.y)).selfMultiply(Yt.triAreaDDFast(e,n,r)),a=T.sqr(e.x).selfAdd(T.sqr(e.y)).selfMultiply(Yt.triAreaDDFast(t,n,r)),l=T.sqr(n.x).selfAdd(T.sqr(n.y)).selfMultiply(Yt.triAreaDDFast(t,e,r)),d=T.sqr(r.x).selfAdd(T.sqr(r.y)).selfMultiply(Yt.triAreaDDFast(t,e,n)),v=s.selfSubtract(a).selfAdd(l).selfSubtract(d),w=v.doubleValue()>0;return w},Yt.isInCircleCC=function(t,e,n,r){var s=Ft.circumcentre(t,e,n),a=t.distance(s),l=r.distance(s)-a;return l<=0},Yt.isInCircleNormalized=function(t,e,n,r){var s=t.x-r.x,a=t.y-r.y,l=e.x-r.x,d=e.y-r.y,v=n.x-r.x,w=n.y-r.y,O=s*d-l*a,D=l*w-v*d,G=v*a-s*w,K=s*s+a*a,rt=l*l+d*d,ht=v*v+w*w,Vt=K*D+rt*G+ht*O;return Vt>0},Yt.isInCircleDDSlow=function(t,e,n,r){var s=T.valueOf(r.x),a=T.valueOf(r.y),l=T.valueOf(t.x),d=T.valueOf(t.y),v=T.valueOf(e.x),w=T.valueOf(e.y),O=T.valueOf(n.x),D=T.valueOf(n.y),G=l.multiply(l).add(d.multiply(d)).multiply(Yt.triAreaDDSlow(v,w,O,D,s,a)),K=v.multiply(v).add(w.multiply(w)).multiply(Yt.triAreaDDSlow(l,d,O,D,s,a)),rt=O.multiply(O).add(D.multiply(D)).multiply(Yt.triAreaDDSlow(l,d,v,w,s,a)),ht=s.multiply(s).add(a.multiply(a)).multiply(Yt.triAreaDDSlow(l,d,v,w,O,D)),Vt=G.subtract(K).add(rt).subtract(ht),le=Vt.doubleValue()>0;return le},Yt.isInCircleNonRobust=function(t,e,n,r){var s=(t.x*t.x+t.y*t.y)*Yt.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*Yt.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*Yt.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*Yt.triArea(t,e,n)>0;return s},Yt.isInCircleRobust=function(t,e,n,r){return Yt.isInCircleNormalized(t,e,n,r)},Yt.triAreaDDSlow=function(t,e,n,r,s,a){return n.subtract(t).multiply(a.subtract(e)).subtract(r.subtract(e).multiply(s.subtract(t)))},Yt.triAreaDDFast=function(t,e,n){var r=T.valueOf(e.x).selfSubtract(t.x).selfMultiply(T.valueOf(n.y).selfSubtract(t.y)),s=T.valueOf(e.y).selfSubtract(t.y).selfMultiply(T.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(s)},g(Ot.prototype,{circleCenter:function(t,e){var n=new Ot(this.getX(),this.getY()),r=this.bisector(n,t),s=this.bisector(t,e),a=new Ut(r,s),l=null;try{l=new Ot(a.getX(),a.getY())}catch(d){if(!(d instanceof Tt))throw d;ut.err.println("a: "+n+"  b: "+t+"  c: "+e),ut.err.println(d)}finally{}return l},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),r=e.getY()-t.getY(),s=new Ut(t.getX()+n/2,t.getY()+r/2,1),a=new Ut(t.getX()-r+n/2,t.getY()+n+r/2,1);return new Ut(s,a)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Yt.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var r=t.getX(),s=t.getY(),a=e.getX()-r,l=n.getX()-r,d=e.getY()-s,v=n.getY()-s,w=a*v-l*d,O=this.getX()-r,D=this.getY()-s,G=(v*O-l*D)/w,K=(-d*O+a*D)/w,rt=t.getZ()+G*(e.getZ()-t.getZ())+K*(n.getZ()-t.getZ());return rt},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,r=(this.p.z+t.getZ())/2;return new Ot(e,n,r)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new Ot(t*this.p.x,t*this.p.y)},cross:function(){return new Ot(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new Ot(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,r=e.sub(t),s=n.sub(t),a=r.crossProduct(s);return a>0?Ot.LEFT:a<0?Ot.RIGHT:r.getX()*s.getX()<0||r.getY()*s.getY()<0?Ot.BEHIND:r.magn()<s.magn()?Ot.BEYOND:t.equals(n)?Ot.ORIGIN:e.equals(n)?Ot.DESTINATION:Ot.BETWEEN},sum:function(t){return new Ot(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),r=this.distance(n,t),s=this.distance(this,t),a=this.distance(t,e);return a<s&&(s=a),a=this.distance(e,this),a<s&&(s=a),r/s},interfaces_:function(){return[]},getClass:function(){return Ot}}),Ot.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=e.distance(n),s=t.distance(e),a=n.z-e.z,l=e.z+a*(s/r);return l}if(arguments.length===4){var d=arguments[0],v=arguments[1],w=arguments[2],O=arguments[3],D=v.x,G=v.y,K=w.x-D,rt=O.x-D,ht=w.y-G,Vt=O.y-G,le=K*Vt-rt*ht,Zn=d.x-D,Xr=d.y-G,Do=(Vt*Zn-rt*Xr)/le,Ao=(-ht*Zn+K*Xr)/le,Fo=v.z+Do*(w.z-v.z)+Ao*(O.z-v.z);return Fo}},Ot.LEFT=0,Ot.RIGHT=1,Ot.BEYOND=2,Ot.BEHIND=3,Ot.BETWEEN=4,Ot.ORIGIN=5,Ot.DESTINATION=6,c(gr,Ot),g(gr.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return gr}}),g(te.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new st(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return de.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return te}}),te.makeEdge=function(t,e){var n=new te,r=new te,s=new te,a=new te;n._rot=r,r._rot=s,s._rot=a,a._rot=n,n.setNext(n),r.setNext(a),s.setNext(s),a.setNext(r);var l=n;return l.setOrig(t),l.setDest(e),l},te.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();te.splice(t,e),te.splice(t.sym(),n),te.splice(t,e.lNext()),te.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},te.splice=function(t,e){var n=t.oNext().rot(),r=e.oNext().rot(),s=e.oNext(),a=t.oNext(),l=r.oNext(),d=n.oNext();t.setNext(s),e.setNext(a),n.setNext(l),r.setNext(d)},te.connect=function(t,e){var n=te.makeEdge(t.dest(),e.orig());return te.splice(n,t.lNext()),te.splice(n.sym(),e),n},g($s.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);te.splice(n,e);var r=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);for(;;){var s=e.oPrev();if(s.dest().rightOf(e)&&t.isInCircle(e.orig(),s.dest(),e.dest()))te.swap(e),e=e.oPrev();else{if(e.oNext()===r)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return $s}}),g(oa.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return oa}}),g(Co.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[oa]},getClass:function(){return Co}}),c(Is,F),g(Is.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Is}}),Is.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},g(Cs.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Cs}}),g(pn.prototype,{getTriangleVertices:function(t){var e=new So;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=te.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new M,r=t;do{var s=t.rot().orig().getCoordinate();n.add(s),t=t.oPrev()}while(t!==r);var a=new yt;a.addAll(n,!1),a.closeRing(),a.size()<4&&(ut.out.println(a),a.add(a.get(a.size()-1),!0));var l=a.toCoordinateArray(),d=e.createPolygon(e.createLinearRing(l),null),v=r.orig();return d.setUserData(v.getCoordinate()),d},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);te.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return te.splice(e.sym(),n),te.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);pn.getTriangleEdges(t,e);var n=new Array(3).fill(null);pn.getTriangleEdges(t.sym(),n);var r=t.lNext().dest();if(this.isFrameVertex(r))return!0;var s=t.sym().lNext().dest();return!!this.isFrameVertex(s)},makeEdge:function(t,e){var n=te.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new me;n.push(this.startingEdge);for(var r=new re;!n.empty();){var s=n.pop();if(!r.contains(s)){var a=this.fetchTriangleToVisit(s,n,e,r);a!==null&&t.visit(a)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new Q(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),r=0;r=e>n?10*e:10*n,this.frameVertex[0]=new Ot((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this.frameVertex[1]=new Ot(t.getMinX()-r,t.getMinY()-r),this.frameVertex[2]=new Ot(t.getMaxX()+r,t.getMinY()-r),this.frameEnv=new Q(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new bo;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new re,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),s=r.orig();!t&&this.isFrameVertex(s)||e.add(s);var a=r.dest();!t&&this.isFrameVertex(a)||e.add(a)}return e},fetchTriangleToVisit:function(t,e,n,r){var s=t,a=0,l=!1;do{this.triEdges[a]=s,this.isFrameEdge(s)&&(l=!0);var d=s.sym();r.contains(d)||e.push(d),r.add(s),a++,s=s.lNext()}while(s!==t);return l&&!n?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var a=s.next();n[r++]=t.createLineString([a.orig().getCoordinate(),a.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new M,n=new re,r=this.quadEdges.iterator();r.hasNext();){var s=r.next(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s));var l=s.sym(),d=l.orig();n.contains(d)||(n.add(d),!t&&this.isFrameVertex(d)||e.add(l))}return e},getTriangleEdges:function(t){var e=new Lo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new M,n=new me;n.push(this.startingEdge);for(var r=new re;!n.empty();){var s=n.pop();if(!r.contains(s)){var a=s.getPrimary();!t&&this.isFrameEdge(a)||e.add(a),n.push(s.oNext()),n.push(s.sym().oNext()),r.add(s),r.add(s.sym())}}return e},delete:function(t){te.splice(t,t.oPrev()),te.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),r=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(r),t.delete(),e.delete(),n.delete(),r.delete()},locateFromEdge:function(t,e){for(var n=0,r=this.quadEdges.size(),s=e;;){if(n++,n>r)throw new Is(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new No,!0);for(var e=new M,n=this.getVertexUniqueEdges(!1),r=n.iterator();r.hasNext();){var s=r.next();e.add(this.getVoronoiCellPolygon(s,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(gt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var a=s.next();n[r++]=t.createPolygon(t.createLinearRing(a),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);te.splice(n,e);var r=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);return r},locate:function(){if(arguments.length===1){if(arguments[0]instanceof Ot){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof _){var e=arguments[0];return this.locator.locate(new Ot(e))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.locator.locate(new Ot(n));if(s===null)return null;var a=s;s.dest().getCoordinate().equals2D(n)&&(a=s.sym());var l=a;do{if(l.dest().getCoordinate().equals2D(r))return l;l=l.oNext()}while(l!==a);return null}},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new b},g(No.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),s=Ft.circumcentre(e,n,r),a=new Ot(s),l=0;l<3;l++)t[l].rot().setOrig(a)},interfaces_:function(){return[Cs]},getClass:function(){return No}}),g(Lo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Cs]},getClass:function(){return Lo}}),g(So.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Cs]},getClass:function(){return So}}),g(bo.prototype,{checkTriangleSize:function(t){t.length>=2?de.toLineString(t[0],t[1]):t.length>=1&&de.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var r=this.coordList.toCoordinateArray();if(r.length!==4)return null;this.triCoords.add(r)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Cs]},getClass:function(){return bo}}),pn.TriangleCircumcentreVisitor=No,pn.TriangleEdgesListVisitor=Lo,pn.TriangleVertexListVisitor=So,pn.TriangleCoordinatesVisitor=bo,pn.EDGE_COINCIDENCE_TOL_FACTOR=1e3,g(Zr.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Zr}}),g(to.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return to}}),g(Po.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Po}}),g(Yr.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.root===null)return this.root=new Po(e,n),this.root;if(this.tolerance>0){var r=this.findBestMatchNode(e);if(r!==null)return r.increment(),r}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var n=arguments[0],r=new M;return this.query(n,r),r}if(arguments.length===2){if(arguments[0]instanceof Q&&W(arguments[1],pt))(function(){var l=t[0],d=t[1];e.queryNode(e.root,l,!0,{interfaces_:function(){return[to]},visit:function(v){d.add(v)}})})();else if(arguments[0]instanceof Q&&W(arguments[1],to)){var s=arguments[0],a=arguments[1];this.queryNode(this.root,s,!0,a)}}},queryNode:function(t,e,n,r){if(t===null)return null;var s=null,a=null,l=null;n?(s=e.getMinX(),a=e.getMaxX(),l=t.getX()):(s=e.getMinY(),a=e.getMaxY(),l=t.getY());var d=s<l,v=l<=a;d&&this.queryNode(t.getLeft(),e,!n,r),e.contains(t.getCoordinate())&&r.visit(t),v&&this.queryNode(t.getRight(),e,!n,r)},findBestMatchNode:function(t){var e=new To(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var n=this.root,r=this.root,s=!0,a=!0;n!==null;){if(n!==null){var l=t.distance(n.getCoordinate())<=this.tolerance;if(l)return n.increment(),n}a=s?t.x<n.getX():t.y<n.getY(),r=n,n=a?n.getLeft():n.getRight(),s=!s}this.numberOfNodes=this.numberOfNodes+1;var d=new Po(t,e);return a?r.setLeft(d):r.setRight(d),d},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return Yr.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new yt,s=e.iterator();s.hasNext();)for(var a=s.next(),l=n?a.getCount():1,d=0;d<l;d++)r.add(a.getCoordinate(),!0);return r.toCoordinateArray()}},g(To.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var r=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(r=!0),r&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new Q(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[to]},getClass:function(){return To}}),Yr.BestMatchVisitor=To,g(dr.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<dr.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}for(var s=this.segVertices.iterator();s.hasNext();){var r=s.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new gt,e=this.getPointArray(),n=new he(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new _((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(r),a=new Q(r);a.expandBy(s);for(var l=this.kdt.query(a),d=null,v=I.MAX_VALUE,w=l.iterator();w.hasNext();){var O=w.next(),D=O.getCoordinate();if(!D.equals2D(e)&&!D.equals2D(n)){var G=r.distance(D);if(G<s){var K=G;(d===null||K<v)&&(d=D,v=K)}}}return d},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new M,n=0,r=new M,s=t.iterator();s.hasNext();){var a=s.next(),l=this.findNonGabrielPoint(a);if(l!==null){this.splitPt=this.splitFinder.findSplitPoint(a,l);var d=this.createVertex(this.splitPt,a),v=(this.insertSite(d),new Zr(a.getStartX(),a.getStartY(),a.getStartZ(),d.getX(),d.getY(),d.getZ(),a.getData())),w=new Zr(d.getX(),d.getY(),d.getZ(),a.getEndX(),a.getEndY(),a.getEndZ(),a.getData());e.add(v),e.add(w),r.add(a),n+=1}}return t.removeAll(r),t.addAll(e),n},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new gr(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(n,r):new gr(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=dr.computeVertexEnvelope(this.initialVertices),e=dr.computeVertexEnvelope(this.segVertices),n=new Q(t);n.expandToInclude(e);var r=.2*n.getWidth(),s=.2*n.getHeight(),a=Math.max(r,s);this.computeAreaEnv=new Q(n),this.computeAreaEnv.expandBy(a)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new pn(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Co(this.subdiv)),this.incDel=new $s(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof gr){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof _){var r=arguments[0];this.insertSite(this.createVertex(r))}},interfaces_:function(){return[]},getClass:function(){return dr}}),dr.computeVertexEnvelope=function(t){for(var e=new Q,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r.getCoordinate())}return e},dr.MAX_SPLIT_ITER=99,g(ze.prototype,{create:function(){if(this.subdiv!==null)return null;var t=ze.envelope(this.siteCoords),e=ze.toVertices(this.siteCoords);this.subdiv=new pn(t,this.tolerance);var n=new $s(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Z){var t=arguments[0];this.siteCoords=ze.extractUniqueCoordinates(t)}else if(W(arguments[0],tt)){var e=arguments[0];this.siteCoords=ze.unique(nt.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return ze}}),ze.extractUniqueCoordinates=function(t){if(t===null)return new yt;var e=t.getCoordinates();return ze.unique(e)},ze.envelope=function(t){for(var e=new Q,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r)}return e},ze.unique=function(t){var e=nt.copyDeep(t);_n.sort(e);var n=new yt(e,!1);return n},ze.toVertices=function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ot(r))}return e},g(Ns.prototype,{createSiteVertices:function(t){for(var e=new M,n=t.iterator();n.hasNext();){var r=n.next();this.constraintVertexMap.containsKey(r)||e.add(new gr(r))}return e},create:function(){if(this.subdiv!==null)return null;var t=ze.envelope(this.siteCoords),e=new M;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Ns.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),r=new dr(n,this.tolerance);r.setConstraints(e,new M(this.constraintVertexMap.values())),r.formInitialDelaunay(),r.enforceConstraints(),this.subdiv=r.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=ze.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var r=new gr(e[n]);this.constraintVertexMap.put(e[n],r)}},interfaces_:function(){return[]},getClass:function(){return Ns}}),Ns.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=Ne.getLines(t),n=new M,r=e.iterator();r.hasNext();){var s=r.next();Ns.createConstraintSegments(s,n)}return n}if(arguments.length===2)for(var a=arguments[0],l=arguments[1],d=a.getCoordinates(),r=1;r<d.length;r++)l.add(new Zr(d[r-1],d[r]))},g(eo.prototype,{create:function(){if(this.subdiv!==null)return null;var t=ze.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var n=ze.toVertices(this.siteCoords);this.subdiv=new pn(t,this.tolerance);var r=new $s(this.subdiv);r.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return eo.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Z){var t=arguments[0];this.siteCoords=ze.extractUniqueCoordinates(t)}else if(W(arguments[0],tt)){var e=arguments[0];this.siteCoords=ze.unique(nt.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return eo}}),eo.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),r=new M,s=0;s<t.getNumGeometries();s++){var a=t.getGeometryN(s),l=null;e.contains(a.getEnvelopeInternal())?l=a:e.intersects(a.getEnvelopeInternal())&&(l=n.intersection(a),l.setUserData(a.getUserData())),l===null||l.isEmpty()||r.add(l)}return t.getFactory().createGeometryCollection(gt.toGeometryArray(r))};var su=Object.freeze({Vertex:Ot}),ou=Object.freeze({ConformingDelaunayTriangulationBuilder:Ns,DelaunayTriangulationBuilder:ze,VoronoiDiagramBuilder:eo,quadedge:su});g(Mo.prototype,{interfaces_:function(){return[]},getClass:function(){return Mo}}),Mo.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return et.createEmptyResult(et.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),se.overlayOp(t,e,et.UNION)},g(Z.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&Pt.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(arguments.length===0)return fr.union(this);if(arguments.length===1){var t=arguments[0];return Mo.union(this,t)}},isValid:function(){return dn.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return et.createEmptyResult(et.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Fi.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),se.overlayOp(this,t,et.INTERSECTION)},covers:function(t){return Pt.covers(this,t)},coveredBy:function(t){return Pt.coveredBy(this,t)},touches:function(t){return Pt.touches(this,t)},intersects:function(t){return Pt.intersects(this,t)},within:function(t){return Pt.within(this,t)},overlaps:function(t){return Pt.overlaps(this,t)},disjoint:function(t){return Pt.disjoint(this,t)},crosses:function(t){return Pt.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return R.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return R.bufferOp(this,e,n)}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];return R.bufferOp(this,r,s,a)}},convexHull:function(){return new he(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return Pt.relate.apply(Pt,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=ct.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var n=new ii(this);t=n.getInteriorPoint()}else if(e===1){var n=new os(this);t=n.getInteriorPoint()}else{var n=new cn(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return et.createEmptyResult(et.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),se.overlayOp(this,t,et.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new de;return t.write(this)},toString:function(){this.toText()},contains:function(t){return Pt.contains(this,t)},difference:function(t){return this.isEmpty()?et.createEmptyResult(et.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),se.overlayOp(this,t,et.DIFFERENCE))},isSimple:function(){var t=new Ci(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(n>e)&&ft.isWithinDistance(this,t,e)},distance:function(t){return ft.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var au="1.3.0 (6e65adb)";f.version=au,f.algorithm=Ba,f.densify=za,f.dissolve=Ga,f.geom=ka,f.geomgraph=Va,f.index=Za,f.io=Xa,f.noding=Ha,f.operation=nu,f.precision=iu,f.simplify=ru,f.triangulate=ou,Object.defineProperty(f,"__esModule",{value:!0})})})(ga,ga.exports);var Oa=ga.exports;const pa=window.location.hash.substring(1),Fu="./fixtures/";let oe;switch(pa){case"geo":oe="asia.geojson";break;case"states":oe="states_source.geojson";break;case"trapezoid":oe="trapezoid-box.geojson";break;case"canada":oe="canada.geojson";break;case"horseshoe":oe="horseshoe.geojson";break;case"hourglasses":oe="hourglasses.geojson";break;case"edge_overlap":oe="polygon_trapezoid_edge_overlap.geojson";break;case"touching_boxes":oe="touching_boxes.geojson";break;case"triangles":oe="two_pointed_triangles.geojson";break;case"holecut":oe="hole_cut.geojson";break;case"overlapping_segments":oe="overlapping_segments.geojson";break;case"overlap_loop":oe="overlap_loop.geojson";break;case"overlap_y":oe="overlap_y.geojson";break;case"overlap_two":oe="overlap_two.geojson";break;case"disjoint_boxes":oe="disjoint_boxes.geojson";break;case"polygons_edge_overlap":oe="polygons_edge_overlap.geojson";break;case"vertical_boxes":oe="vertical_boxes.geojson";break;case"collapsed":oe="collapsed.geojson";break;case"fatal1":oe="fatal1.geojson";break;case"fatal2":oe="fatal2.geojson";break;case"fatal3":oe="fatal3.geojson";break;case"fatal4":oe="fatal4.geojson";break;case"rectangles":oe="rectangles.geojson";break;default:oe="hole_hole.geojson";break}console.log(pa);const Vo=document.createElement("div");Vo.id="image-map";Vo.style.width=Vo.style.height="100%";document.body.appendChild(Vo);const _r=window.map=Xt.map("image-map",{minZoom:1,maxZoom:20,center:[0,0],zoom:2,crs:pa==="geo"?Xt.CRS.EPSG4326:Xt.extend({},Xt.CRS.Simple,{transformation:new Xt.Transformation(1/8,0,-1/8,0)}),editable:!0});_r.addControl(new Xt.NewPolygonControl({callback:_r.editTools.startPolygon}));_r.addControl(new Xt.Control.Coordinates);_r.addControl(new Xt.BooleanControl({callback:Vu,clear:Bu}));const ro=window.drawnItems=Xt.geoJSON().addTo(_r);let Hr=null;function ku(N){console.log(N),fetch(N).then(p=>p.json()).then(p=>{ro.addData(p),Hr=p,_r.fitBounds(ro.getBounds().pad(.05),{animate:!1})})}function Bu(){ro.clearLayers(),da.clearLayers(),Hr=null}const La=new Oa.io.GeoJSONReader,zu=new Oa.io.GeoJSONWriter;function Gu(N){return Hr!==null&&Hr.features.length>1?Hr.features[1]:N[1].toGeoJSON()}function Vu(N){const p=ro.getLayers();if(p.length<2)return;let f=Hr!==null?Hr.features[0]:p[0].toGeoJSON(),g=Gu(p),P;if(N===0)P=Du;else if(N===1)P=Ru;else if(N===2)P=Na;else if(N===5){P=Na;const I=f;f=g,g=I}else P=Ou;console.time("martinez");const b=P(f.geometry.coordinates,g.geometry.coordinates);console.timeEnd("martinez"),console.log("result",b),da.clearLayers(),b!==null&&(da.addData({type:"Feature",geometry:{type:"MultiPolygon",coordinates:b}}),setTimeout(function(){console.time("jsts");const I=La.read(f),k=La.read(g);let z;N===0?z=I.geometry.intersection(k.geometry):N===1?z=I.geometry.union(k.geometry):N===2?z=I.geometry.difference(k.geometry):z=I.geometry.symDifference(k.geometry),z=zu.write(z),console.timeEnd("jsts")},500))}_r.on("editable:created",function(N){ro.addLayer(N.layer),N.layer.on("click",function(p){(p.originalEvent.ctrlKey||p.originalEvent.metaKey)&&this.editEnabled()&&this.editor.newHole(p.latlng)})});const da=window.results=Xt.geoJSON(null,{style:function(N){return{color:"red",weight:1}}}).addTo(_r);ku(Fu+oe);
